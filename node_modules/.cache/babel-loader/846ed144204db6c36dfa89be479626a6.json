{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.initialState = exports[\"default\"] = void 0;\n\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\n\nvar _immer = _interopRequireDefault(require(\"immer\"));\n\nvar _lodash = require(\"lodash\");\n\nvar initialState = {\n  menu: [],\n  isLoading: true\n};\nexports.initialState = initialState;\n\nvar reducer = function reducer(state, action) {\n  return (// eslint-disable-next-line consistent-return\n    (0, _immer[\"default\"])(state, function (draftState) {\n      switch (action.type) {\n        case 'CHECK_PERMISSIONS_SUCCEEDED':\n          {\n            action.data.forEach(function (checkedPermissions) {\n              if (checkedPermissions.hasPermission) {\n                (0, _lodash.set)(draftState, ['menu'].concat((0, _toConsumableArray2[\"default\"])(checkedPermissions.path.split('.')), ['isDisplayed']), checkedPermissions.hasPermission);\n              }\n            }); // Remove the not needed links in each section\n\n            draftState.menu.forEach(function (section, sectionIndex) {\n              draftState.menu[sectionIndex].links = section.links.filter(function (link) {\n                return link.isDisplayed === true;\n              });\n            });\n            draftState.isLoading = false;\n            break;\n          }\n\n        default:\n          return draftState;\n      }\n    })\n  );\n};\n\nvar _default = reducer;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["/Users/joaovictorlobao/prefeituramaragogistrapi/.cache/admin/src/hooks/useSettingsMenu/reducer.js"],"names":["initialState","menu","isLoading","reducer","state","action","draftState","type","data","forEach","checkedPermissions","hasPermission","path","split","section","sectionIndex","links","filter","link","isDisplayed"],"mappings":";;;;;;;;;;;AAAA;;AACA;;AAEA,IAAMA,YAAY,GAAG;AACnBC,EAAAA,IAAI,EAAE,EADa;AAEnBC,EAAAA,SAAS,EAAE;AAFQ,CAArB;;;AAKA,IAAMC,OAAO,GAAG,SAAVA,OAAU,CAACC,KAAD,EAAQC,MAAR;AAAA,SACd;AACA,2BAAQD,KAAR,EAAe,UAAAE,UAAU,EAAI;AAC3B,cAAQD,MAAM,CAACE,IAAf;AACE,aAAK,6BAAL;AAAoC;AAClCF,YAAAA,MAAM,CAACG,IAAP,CAAYC,OAAZ,CAAoB,UAAAC,kBAAkB,EAAI;AACxC,kBAAIA,kBAAkB,CAACC,aAAvB,EAAsC;AACpC,iCACEL,UADF,GAEG,MAFH,6CAEcI,kBAAkB,CAACE,IAAnB,CAAwBC,KAAxB,CAA8B,GAA9B,CAFd,IAEkD,aAFlD,IAGEH,kBAAkB,CAACC,aAHrB;AAKD;AACF,aARD,EADkC,CAWlC;;AACAL,YAAAA,UAAU,CAACL,IAAX,CAAgBQ,OAAhB,CAAwB,UAACK,OAAD,EAAUC,YAAV,EAA2B;AACjDT,cAAAA,UAAU,CAACL,IAAX,CAAgBc,YAAhB,EAA8BC,KAA9B,GAAsCF,OAAO,CAACE,KAAR,CAAcC,MAAd,CACpC,UAAAC,IAAI;AAAA,uBAAIA,IAAI,CAACC,WAAL,KAAqB,IAAzB;AAAA,eADgC,CAAtC;AAGD,aAJD;AAMAb,YAAAA,UAAU,CAACJ,SAAX,GAAuB,KAAvB;AACA;AACD;;AAED;AACE,iBAAOI,UAAP;AAxBJ;AA0BD,KA3BD;AAFc;AAAA,CAAhB;;eA+BeH,O","sourcesContent":["import produce from 'immer';\nimport { set } from 'lodash';\n\nconst initialState = {\n  menu: [],\n  isLoading: true,\n};\n\nconst reducer = (state, action) =>\n  // eslint-disable-next-line consistent-return\n  produce(state, draftState => {\n    switch (action.type) {\n      case 'CHECK_PERMISSIONS_SUCCEEDED': {\n        action.data.forEach(checkedPermissions => {\n          if (checkedPermissions.hasPermission) {\n            set(\n              draftState,\n              ['menu', ...checkedPermissions.path.split('.'), 'isDisplayed'],\n              checkedPermissions.hasPermission\n            );\n          }\n        });\n\n        // Remove the not needed links in each section\n        draftState.menu.forEach((section, sectionIndex) => {\n          draftState.menu[sectionIndex].links = section.links.filter(\n            link => link.isDisplayed === true\n          );\n        });\n\n        draftState.isLoading = false;\n        break;\n      }\n\n      default:\n        return draftState;\n    }\n  });\n\nexport default reducer;\nexport { initialState };\n"]},"metadata":{},"sourceType":"script"}