{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _typeof = require(\"@babel/runtime/helpers/typeof\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _strapiHelperPlugin = require(\"strapi-helper-plugin\");\n\nvar _reactIntl = require(\"react-intl\");\n\nvar _lodash = require(\"lodash\");\n\nvar _core = require(\"@buffetjs/core\");\n\nvar _reactstrap = require(\"reactstrap\");\n\nvar _MagicLink = _interopRequireDefault(require(\"ee_else_ce/components/Users/MagicLink\"));\n\nvar _checkFormValidity = _interopRequireDefault(require(\"../../../utils/checkFormValidity\"));\n\nvar _form = _interopRequireDefault(require(\"./utils/form\"));\n\nvar _schema = _interopRequireDefault(require(\"./utils/schema\"));\n\nvar _reducer = require(\"./reducer\");\n\nvar _init = _interopRequireDefault(require(\"./init\"));\n\nvar _SizedInput = _interopRequireDefault(require(\"../../SizedInput\"));\n\nvar _Wrapper = _interopRequireDefault(require(\"./Wrapper\"));\n\nvar _RoleSettingsModalSection = _interopRequireDefault(require(\"../RoleSettingsModalSection\"));\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { \"default\": obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj[\"default\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2[\"default\"])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n// This component accepts a ref so we can have access to the submit handler.\nvar ModalCreateBody = /*#__PURE__*/(0, _react.forwardRef)(function (_ref, ref) {\n  var isDisabled = _ref.isDisabled,\n      onSubmit = _ref.onSubmit,\n      registrationToken = _ref.registrationToken,\n      setIsSubmiting = _ref.setIsSubmiting,\n      showMagicLink = _ref.showMagicLink;\n\n  var _useReducer = (0, _react.useReducer)(_reducer.reducer, _reducer.initialState, _init[\"default\"]),\n      _useReducer2 = (0, _slicedToArray2[\"default\"])(_useReducer, 2),\n      reducerState = _useReducer2[0],\n      dispatch = _useReducer2[1];\n\n  var formErrors = reducerState.formErrors,\n      modifiedData = reducerState.modifiedData;\n  var buttonSubmitRef = (0, _react.useRef)(null);\n\n  var _useIntl = (0, _reactIntl.useIntl)(),\n      formatMessage = _useIntl.formatMessage;\n\n  (0, _react.useImperativeHandle)(ref, function () {\n    return {\n      submit: function submit() {\n        buttonSubmitRef.current.click();\n      }\n    };\n  });\n\n  var handleChange = function handleChange(_ref2) {\n    var _ref2$target = _ref2.target,\n        name = _ref2$target.name,\n        value = _ref2$target.value;\n    dispatch({\n      type: 'ON_CHANGE',\n      keys: name,\n      value: value\n    });\n  };\n\n  var handleSubmit = /*#__PURE__*/function () {\n    var _ref3 = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee(e) {\n      var errors, requestURL, cleanedRoles, _yield$request, data, message;\n\n      return _regenerator[\"default\"].wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              e.persist();\n              e.preventDefault();\n              _context.next = 4;\n              return (0, _checkFormValidity[\"default\"])(modifiedData, _schema[\"default\"]);\n\n            case 4:\n              errors = _context.sent;\n\n              if (errors) {\n                _context.next = 26;\n                break;\n              }\n\n              _context.prev = 6;\n              // Prevent user interactions until the request is completed\n              strapi.lockAppWithOverlay();\n              setIsSubmiting(true);\n              requestURL = '/admin/users';\n              cleanedRoles = modifiedData.roles.map(function (role) {\n                return role.id;\n              });\n              _context.next = 13;\n              return (0, _strapiHelperPlugin.request)(requestURL, {\n                method: 'POST',\n                body: _objectSpread(_objectSpread({}, modifiedData), {}, {\n                  roles: cleanedRoles\n                })\n              });\n\n            case 13:\n              _yield$request = _context.sent;\n              data = _yield$request.data;\n              onSubmit(e, data);\n              _context.next = 22;\n              break;\n\n            case 18:\n              _context.prev = 18;\n              _context.t0 = _context[\"catch\"](6);\n              message = (0, _lodash.get)(_context.t0, ['response', 'payload', 'message'], 'An error occured');\n              strapi.notification.toggle({\n                type: 'warning',\n                message: message\n              });\n\n            case 22:\n              _context.prev = 22;\n              strapi.unlockApp();\n              setIsSubmiting(false);\n              return _context.finish(22);\n\n            case 26:\n              dispatch({\n                type: 'SET_ERRORS',\n                errors: errors || {}\n              });\n\n            case 27:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[6, 18, 22, 26]]);\n    }));\n\n    return function handleSubmit(_x) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_react[\"default\"].createElement(\"form\", {\n    onSubmit: handleSubmit\n  }, showMagicLink && /*#__PURE__*/_react[\"default\"].createElement(_react[\"default\"].Fragment, null, /*#__PURE__*/_react[\"default\"].createElement(_strapiHelperPlugin.BaselineAlignment, {\n    top: true,\n    size: \"18px\"\n  }), /*#__PURE__*/_react[\"default\"].createElement(_strapiHelperPlugin.ModalSection, null, /*#__PURE__*/_react[\"default\"].createElement(_MagicLink[\"default\"], {\n    registrationToken: registrationToken\n  }))), /*#__PURE__*/_react[\"default\"].createElement(_strapiHelperPlugin.ModalSection, null, /*#__PURE__*/_react[\"default\"].createElement(_core.Padded, {\n    top: true,\n    size: \"18px\"\n  }, /*#__PURE__*/_react[\"default\"].createElement(_core.Text, {\n    fontSize: \"xs\",\n    color: \"grey\",\n    fontWeight: \"bold\",\n    textTransform: \"uppercase\"\n  }, formatMessage({\n    id: 'app.components.Users.ModalCreateBody.block-title.details'\n  })))), /*#__PURE__*/_react[\"default\"].createElement(_strapiHelperPlugin.ModalSection, null, /*#__PURE__*/_react[\"default\"].createElement(_Wrapper[\"default\"], null, /*#__PURE__*/_react[\"default\"].createElement(_core.Padded, {\n    top: true,\n    size: \"smd\"\n  }, /*#__PURE__*/_react[\"default\"].createElement(_reactstrap.Row, null, Object.keys(_form[\"default\"]).map(function (inputName, i) {\n    return /*#__PURE__*/_react[\"default\"].createElement(_SizedInput[\"default\"], (0, _extends2[\"default\"])({\n      key: inputName\n    }, _form[\"default\"][inputName], {\n      autoFocus: i === 0,\n      disabled: isDisabled,\n      error: formErrors[inputName],\n      name: inputName,\n      onChange: handleChange,\n      value: modifiedData[inputName]\n    }));\n  }))))), /*#__PURE__*/_react[\"default\"].createElement(_strapiHelperPlugin.ModalSection, null, /*#__PURE__*/_react[\"default\"].createElement(_core.Padded, {\n    top: true,\n    size: \"3px\"\n  }, /*#__PURE__*/_react[\"default\"].createElement(_core.Text, {\n    fontSize: \"xs\",\n    color: \"grey\",\n    fontWeight: \"bold\",\n    textTransform: \"uppercase\"\n  }, formatMessage({\n    id: 'app.components.Users.ModalCreateBody.block-title.login'\n  })))), /*#__PURE__*/_react[\"default\"].createElement(_RoleSettingsModalSection[\"default\"], {\n    hasSSORegistration: modifiedData.useSSORegistration,\n    modifiedData: modifiedData,\n    onChange: handleChange,\n    formErrors: formErrors,\n    isDisabled: isDisabled\n  }), /*#__PURE__*/_react[\"default\"].createElement(\"button\", {\n    type: \"submit\",\n    style: {\n      display: 'none'\n    },\n    ref: buttonSubmitRef\n  }, \"hidden button to use the native form event\"));\n});\nModalCreateBody.defaultProps = {\n  isDisabled: false,\n  onSubmit: function onSubmit(e) {\n    return e.preventDefault();\n  },\n  registrationToken: '',\n  setIsSubmiting: function setIsSubmiting() {},\n  showMagicLink: false\n};\nModalCreateBody.propTypes = {\n  isDisabled: _propTypes[\"default\"].bool,\n  onSubmit: _propTypes[\"default\"].func,\n  registrationToken: _propTypes[\"default\"].string,\n  setIsSubmiting: _propTypes[\"default\"].func,\n  showMagicLink: _propTypes[\"default\"].bool\n};\nvar _default = ModalCreateBody;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["/Users/joaovictorlobao/prefeituramaragogistrapi/.cache/admin/src/components/Users/ModalCreateBody/index.js"],"names":["ModalCreateBody","ref","isDisabled","onSubmit","registrationToken","setIsSubmiting","showMagicLink","reducer","initialState","init","reducerState","dispatch","formErrors","modifiedData","buttonSubmitRef","formatMessage","submit","current","click","handleChange","target","name","value","type","keys","handleSubmit","e","persist","preventDefault","schema","errors","strapi","lockAppWithOverlay","requestURL","cleanedRoles","roles","map","role","id","method","body","data","message","notification","toggle","unlockApp","Object","form","inputName","i","useSSORegistration","display","defaultProps","propTypes","PropTypes","bool","func","string"],"mappings":"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","sourcesContent":["import React, { forwardRef, useReducer, useImperativeHandle, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport { BaselineAlignment, ModalSection, request } from 'strapi-helper-plugin';\nimport { useIntl } from 'react-intl';\nimport { get } from 'lodash';\nimport { Padded, Text } from '@buffetjs/core';\nimport { Row } from 'reactstrap';\nimport MagicLink from 'ee_else_ce/components/Users/MagicLink';\n\nimport checkFormValidity from '../../../utils/checkFormValidity';\nimport form from './utils/form';\nimport schema from './utils/schema';\nimport { initialState, reducer } from './reducer';\nimport init from './init';\nimport Input from '../../SizedInput';\nimport Wrapper from './Wrapper';\nimport RoleSettingsModalSection from '../RoleSettingsModalSection';\n\n// This component accepts a ref so we can have access to the submit handler.\nconst ModalCreateBody = forwardRef(\n  ({ isDisabled, onSubmit, registrationToken, setIsSubmiting, showMagicLink }, ref) => {\n    const [reducerState, dispatch] = useReducer(reducer, initialState, init);\n    const { formErrors, modifiedData } = reducerState;\n    const buttonSubmitRef = useRef(null);\n    const { formatMessage } = useIntl();\n\n    useImperativeHandle(ref, () => ({\n      submit: () => {\n        buttonSubmitRef.current.click();\n      },\n    }));\n\n    const handleChange = ({ target: { name, value } }) => {\n      dispatch({\n        type: 'ON_CHANGE',\n        keys: name,\n        value,\n      });\n    };\n\n    const handleSubmit = async e => {\n      e.persist();\n      e.preventDefault();\n      const errors = await checkFormValidity(modifiedData, schema);\n\n      if (!errors) {\n        try {\n          // Prevent user interactions until the request is completed\n          strapi.lockAppWithOverlay();\n\n          setIsSubmiting(true);\n\n          const requestURL = '/admin/users';\n          const cleanedRoles = modifiedData.roles.map(role => role.id);\n\n          const { data } = await request(requestURL, {\n            method: 'POST',\n            body: { ...modifiedData, roles: cleanedRoles },\n          });\n\n          onSubmit(e, data);\n        } catch (err) {\n          const message = get(err, ['response', 'payload', 'message'], 'An error occured');\n\n          strapi.notification.toggle({ type: 'warning', message });\n        } finally {\n          strapi.unlockApp();\n          setIsSubmiting(false);\n        }\n      }\n\n      dispatch({\n        type: 'SET_ERRORS',\n        errors: errors || {},\n      });\n    };\n\n    return (\n      <form onSubmit={handleSubmit}>\n        {showMagicLink && (\n          <>\n            <BaselineAlignment top size=\"18px\" />\n            <ModalSection>\n              <MagicLink registrationToken={registrationToken} />\n            </ModalSection>\n          </>\n        )}\n        <ModalSection>\n          <Padded top size=\"18px\">\n            <Text fontSize=\"xs\" color=\"grey\" fontWeight=\"bold\" textTransform=\"uppercase\">\n              {formatMessage({ id: 'app.components.Users.ModalCreateBody.block-title.details' })}\n            </Text>\n          </Padded>\n        </ModalSection>\n        <ModalSection>\n          <Wrapper>\n            <Padded top size=\"smd\">\n              <Row>\n                {Object.keys(form).map((inputName, i) => (\n                  <Input\n                    key={inputName}\n                    {...form[inputName]}\n                    autoFocus={i === 0}\n                    disabled={isDisabled}\n                    error={formErrors[inputName]}\n                    name={inputName}\n                    onChange={handleChange}\n                    value={modifiedData[inputName]}\n                  />\n                ))}\n              </Row>\n            </Padded>\n          </Wrapper>\n        </ModalSection>\n        <ModalSection>\n          <Padded top size=\"3px\">\n            <Text fontSize=\"xs\" color=\"grey\" fontWeight=\"bold\" textTransform=\"uppercase\">\n              {formatMessage({ id: 'app.components.Users.ModalCreateBody.block-title.login' })}\n            </Text>\n          </Padded>\n        </ModalSection>\n        <RoleSettingsModalSection\n          hasSSORegistration={modifiedData.useSSORegistration}\n          modifiedData={modifiedData}\n          onChange={handleChange}\n          formErrors={formErrors}\n          isDisabled={isDisabled}\n        />\n        <button type=\"submit\" style={{ display: 'none' }} ref={buttonSubmitRef}>\n          hidden button to use the native form event\n        </button>\n      </form>\n    );\n  }\n);\n\nModalCreateBody.defaultProps = {\n  isDisabled: false,\n  onSubmit: e => e.preventDefault(),\n  registrationToken: '',\n  setIsSubmiting: () => {},\n  showMagicLink: false,\n};\n\nModalCreateBody.propTypes = {\n  isDisabled: PropTypes.bool,\n  onSubmit: PropTypes.func,\n  registrationToken: PropTypes.string,\n  setIsSubmiting: PropTypes.func,\n  showMagicLink: PropTypes.bool,\n};\n\nexport default ModalCreateBody;\n"]},"metadata":{},"sourceType":"script"}