{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _typeof = require(\"@babel/runtime/helpers/typeof\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ListRow = ListRow;\nexports[\"default\"] = void 0;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _lodash = require(\"lodash\");\n\nvar _reactIntl = require(\"react-intl\");\n\nvar _core = require(\"@buffetjs/core\");\n\nvar _reactFontawesome = require(\"@fortawesome/react-fontawesome\");\n\nvar _pluginId = _interopRequireDefault(require(\"../../pluginId\"));\n\nvar _useDataManager2 = _interopRequireDefault(require(\"../../hooks/useDataManager\"));\n\nvar _getAttributeDisplayedType = _interopRequireDefault(require(\"../../utils/getAttributeDisplayedType\"));\n\nvar _getTrad = _interopRequireDefault(require(\"../../utils/getTrad\"));\n\nvar _Curve = _interopRequireDefault(require(\"../../icons/Curve\"));\n\nvar _UpperFirst = _interopRequireDefault(require(\"../UpperFirst\"));\n\nvar _Wrapper = _interopRequireDefault(require(\"./Wrapper\"));\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { \"default\": obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj[\"default\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2[\"default\"])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction ListRow(_ref) {\n  var configurable = _ref.configurable,\n      name = _ref.name,\n      dzName = _ref.dzName,\n      nature = _ref.nature,\n      onClick = _ref.onClick,\n      plugin = _ref.plugin,\n      target = _ref.target,\n      targetUid = _ref.targetUid,\n      type = _ref.type,\n      mainTypeName = _ref.mainTypeName,\n      editTarget = _ref.editTarget,\n      firstLoopComponentName = _ref.firstLoopComponentName,\n      firstLoopComponentUid = _ref.firstLoopComponentUid,\n      isFromDynamicZone = _ref.isFromDynamicZone,\n      repeatable = _ref.repeatable,\n      secondLoopComponentName = _ref.secondLoopComponentName,\n      secondLoopComponentUid = _ref.secondLoopComponentUid,\n      isNestedInDZComponent = _ref.isNestedInDZComponent;\n\n  var _useDataManager = (0, _useDataManager2[\"default\"])(),\n      contentTypes = _useDataManager.contentTypes,\n      isInDevelopmentMode = _useDataManager.isInDevelopmentMode,\n      modifiedData = _useDataManager.modifiedData,\n      removeAttribute = _useDataManager.removeAttribute;\n\n  var isMorph = target === '*';\n  var ico = ['integer', 'biginteger', 'float', 'decimal'].includes(type) ? 'number' : type;\n  var readableType = type;\n\n  if (['integer', 'biginteger', 'float', 'decimal'].includes(type)) {\n    readableType = 'number';\n  } else if (['string'].includes(type)) {\n    readableType = 'text';\n  }\n\n  var contentTypeFriendlyName = (0, _lodash.get)(contentTypes, [target, 'schema', 'name'], '');\n  var src = target ? 'relation' : ico;\n\n  var handleClick = function handleClick() {\n    if (isMorph) {\n      return;\n    }\n\n    if (configurable !== false) {\n      var firstComponentCategory = (0, _lodash.get)(modifiedData, ['components', firstLoopComponentUid, 'category'], null);\n      var secondComponentCategory = (0, _lodash.get)(modifiedData, ['components', secondLoopComponentUid, 'category'], null);\n      var attrType = nature ? 'relation' : type;\n      var icoType = (0, _getAttributeDisplayedType[\"default\"])(attrType);\n      var firstHeaderObject = {\n        header_label_1: mainTypeName,\n        header_icon_name_1: icoType,\n        header_icon_isCustom_1: false,\n        header_info_category_1: null,\n        header_info_name_1: null\n      };\n      var secondHeaderObject = {\n        header_label_2: name,\n        header_icon_name_2: null,\n        header_icon_isCustom_2: false,\n        header_info_category_2: null,\n        header_info_name_2: null\n      };\n      var thirdHeaderObject = {\n        header_icon_name_3: 'component',\n        header_icon_isCustom_3: false,\n        header_info_category_3: null,\n        header_info_name_3: null\n      };\n      var fourthHeaderObject = {\n        header_icon_name_4: null,\n        header_icon_isCustom_4: false,\n        header_info_category_4: null,\n        header_info_name_4: null\n      };\n      var fifthHeaderObject = {\n        header_icon_name_5: null,\n        header_icon_isCustom_5: false,\n        header_info_category_5: null,\n        header_info_name_5: null\n      };\n\n      if (firstLoopComponentName) {\n        secondHeaderObject = {\n          header_label_2: firstLoopComponentName,\n          header_icon_name_2: 'component',\n          header_icon_isCustom_2: false,\n          header_info_category_2: firstComponentCategory,\n          header_info_name_2: firstLoopComponentName\n        };\n        thirdHeaderObject = _objectSpread(_objectSpread({}, thirdHeaderObject), {}, {\n          header_label_3: name,\n          header_icon_name_3: null\n        });\n      }\n\n      if (secondLoopComponentUid) {\n        thirdHeaderObject = _objectSpread(_objectSpread({}, thirdHeaderObject), {}, {\n          header_label_3: secondLoopComponentName,\n          header_icon_name_3: 'component',\n          header_info_category_3: secondComponentCategory,\n          header_info_name_3: secondLoopComponentName\n        });\n        fourthHeaderObject = _objectSpread(_objectSpread({}, fourthHeaderObject), {}, {\n          header_label_4: name,\n          header_icon_name_4: null\n        });\n      }\n\n      if (isFromDynamicZone || isNestedInDZComponent) {\n        secondHeaderObject = {\n          header_label_2: dzName,\n          header_icon_name_2: 'dynamiczone',\n          header_icon_isCustom_2: false,\n          header_info_name_2: null,\n          header_info_category_2: null\n        };\n        thirdHeaderObject = {\n          header_icon_name_3: 'component',\n          header_label_3: firstLoopComponentName,\n          header_info_name_3: firstComponentCategory,\n          header_info_category_3: firstComponentCategory\n        };\n\n        if (!isNestedInDZComponent) {\n          fourthHeaderObject = {\n            header_icon_name_4: null,\n            header_icon_isCustom_4: false,\n            header_info_category_4: null,\n            header_label_4: name\n          };\n        } else {\n          fourthHeaderObject = {\n            header_icon_name_4: 'components',\n            header_icon_isCustom_4: false,\n            header_info_category_4: secondComponentCategory,\n            header_info_name_4: secondLoopComponentName,\n            header_label_4: secondLoopComponentName\n          };\n          fifthHeaderObject = _objectSpread(_objectSpread({}, fifthHeaderObject), {}, {\n            header_label_5: name\n          });\n        }\n      }\n\n      onClick( // Tells where the attribute is located in the main modifiedData object : contentType, component or components\n      editTarget, // main data type uid\n      secondLoopComponentUid || firstLoopComponentUid || targetUid, // Name of the attribute\n      name, // Type of the attribute\n      attrType, firstHeaderObject, secondHeaderObject, thirdHeaderObject, fourthHeaderObject, fifthHeaderObject);\n    }\n  };\n\n  var loopNumber;\n\n  if (secondLoopComponentUid && firstLoopComponentUid) {\n    loopNumber = 2;\n  } else if (firstLoopComponentUid) {\n    loopNumber = 1;\n  } else {\n    loopNumber = 0;\n  }\n\n  return /*#__PURE__*/_react[\"default\"].createElement(_Wrapper[\"default\"], {\n    onClick: handleClick,\n    className: [target ? 'relation-row' : '', configurable ? 'clickable' : ''],\n    loopNumber: loopNumber\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"td\", null, /*#__PURE__*/_react[\"default\"].createElement(_core.AttributeIcon, {\n    key: src,\n    type: src\n  }), /*#__PURE__*/_react[\"default\"].createElement(_Curve[\"default\"], {\n    fill: isFromDynamicZone ? '#AED4FB' : '#f3f4f4'\n  })), /*#__PURE__*/_react[\"default\"].createElement(\"td\", {\n    style: {\n      fontWeight: 600\n    }\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"p\", null, name)), /*#__PURE__*/_react[\"default\"].createElement(\"td\", null, target ? /*#__PURE__*/_react[\"default\"].createElement(\"div\", null, /*#__PURE__*/_react[\"default\"].createElement(_reactIntl.FormattedMessage, {\n    id: \"\".concat(_pluginId[\"default\"], \".modelPage.attribute.\").concat(isMorph ? 'relation-polymorphic' : 'relationWith')\n  }), \"\\xA0\", /*#__PURE__*/_react[\"default\"].createElement(_reactIntl.FormattedMessage, {\n    id: \"\".concat(_pluginId[\"default\"], \".from\")\n  }, function (msg) {\n    return /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n      style: {\n        fontStyle: 'italic'\n      }\n    }, /*#__PURE__*/_react[\"default\"].createElement(_UpperFirst[\"default\"], {\n      content: contentTypeFriendlyName\n    }), \"\\xA0\", plugin && \"(\".concat(msg, \": \").concat(plugin, \")\"));\n  })) : /*#__PURE__*/_react[\"default\"].createElement(_react[\"default\"].Fragment, null, /*#__PURE__*/_react[\"default\"].createElement(_reactIntl.FormattedMessage, {\n    id: \"\".concat(_pluginId[\"default\"], \".attribute.\").concat(readableType)\n  }), \"\\xA0\", repeatable && /*#__PURE__*/_react[\"default\"].createElement(_reactIntl.FormattedMessage, {\n    id: (0, _getTrad[\"default\"])('component.repeatable')\n  }))), /*#__PURE__*/_react[\"default\"].createElement(\"td\", {\n    className: \"button-container\"\n  }, isInDevelopmentMode && /*#__PURE__*/_react[\"default\"].createElement(_react[\"default\"].Fragment, null, configurable ? /*#__PURE__*/_react[\"default\"].createElement(_react[\"default\"].Fragment, null, !isMorph ? /*#__PURE__*/_react[\"default\"].createElement(_core.IconLinks, {\n    links: [{\n      icon: /*#__PURE__*/_react[\"default\"].createElement(_reactFontawesome.FontAwesomeIcon, {\n        icon: \"pencil-alt\"\n      }),\n      onClick: function onClick() {\n        return handleClick();\n      }\n    }, {\n      icon: /*#__PURE__*/_react[\"default\"].createElement(_reactFontawesome.FontAwesomeIcon, {\n        icon: \"trash-alt\"\n      }),\n      onClick: function onClick(e) {\n        e.stopPropagation();\n        removeAttribute(editTarget, name, secondLoopComponentUid || firstLoopComponentUid || '');\n      }\n    }]\n  }) : /*#__PURE__*/_react[\"default\"].createElement(_core.IconLinks, {\n    links: [{\n      icon: /*#__PURE__*/_react[\"default\"].createElement(_reactFontawesome.FontAwesomeIcon, {\n        icon: \"trash-alt\"\n      }),\n      onClick: function onClick(e) {\n        e.stopPropagation();\n        removeAttribute(editTarget, name, secondLoopComponentUid || firstLoopComponentUid || '');\n      }\n    }]\n  })) : /*#__PURE__*/_react[\"default\"].createElement(\"button\", {\n    type: \"button\"\n  }, /*#__PURE__*/_react[\"default\"].createElement(_reactFontawesome.FontAwesomeIcon, {\n    icon: \"lock\"\n  })))));\n}\n\nListRow.defaultProps = {\n  configurable: true,\n  dzName: null,\n  firstLoopComponentName: null,\n  firstLoopComponentUid: null,\n  isFromDynamicZone: false,\n  isNestedInDZComponent: false,\n  nature: null,\n  onClick: function onClick() {},\n  plugin: null,\n  repeatable: false,\n  secondLoopComponentName: null,\n  secondLoopComponentUid: null,\n  target: null,\n  targetUid: null,\n  type: null\n};\nListRow.propTypes = {\n  configurable: _propTypes[\"default\"].bool,\n  dzName: _propTypes[\"default\"].string,\n  editTarget: _propTypes[\"default\"].string.isRequired,\n  firstLoopComponentName: _propTypes[\"default\"].string,\n  firstLoopComponentUid: _propTypes[\"default\"].string,\n  isFromDynamicZone: _propTypes[\"default\"].bool,\n  isNestedInDZComponent: _propTypes[\"default\"].bool,\n  mainTypeName: _propTypes[\"default\"].string.isRequired,\n  name: _propTypes[\"default\"].string.isRequired,\n  nature: _propTypes[\"default\"].string,\n  onClick: _propTypes[\"default\"].func,\n  plugin: _propTypes[\"default\"].string,\n  repeatable: _propTypes[\"default\"].bool,\n  secondLoopComponentName: _propTypes[\"default\"].string,\n  secondLoopComponentUid: _propTypes[\"default\"].string,\n  target: _propTypes[\"default\"].string,\n  targetUid: _propTypes[\"default\"].string,\n  type: _propTypes[\"default\"].string\n};\n\nvar _default = /*#__PURE__*/(0, _react.memo)(ListRow);\n\nexports[\"default\"] = _default;","map":{"version":3,"sources":["/Users/joaovictorlobao/prefeituramaragogistrapi/.cache/plugins/strapi-plugin-content-type-builder/admin/src/components/ListRow/index.js"],"names":["ListRow","configurable","name","dzName","nature","onClick","plugin","target","targetUid","type","mainTypeName","editTarget","firstLoopComponentName","firstLoopComponentUid","isFromDynamicZone","repeatable","secondLoopComponentName","secondLoopComponentUid","isNestedInDZComponent","contentTypes","isInDevelopmentMode","modifiedData","removeAttribute","isMorph","ico","includes","readableType","contentTypeFriendlyName","src","handleClick","firstComponentCategory","secondComponentCategory","attrType","icoType","firstHeaderObject","header_label_1","header_icon_name_1","header_icon_isCustom_1","header_info_category_1","header_info_name_1","secondHeaderObject","header_label_2","header_icon_name_2","header_icon_isCustom_2","header_info_category_2","header_info_name_2","thirdHeaderObject","header_icon_name_3","header_icon_isCustom_3","header_info_category_3","header_info_name_3","fourthHeaderObject","header_icon_name_4","header_icon_isCustom_4","header_info_category_4","header_info_name_4","fifthHeaderObject","header_icon_name_5","header_icon_isCustom_5","header_info_category_5","header_info_name_5","header_label_3","header_label_4","header_label_5","loopNumber","fontWeight","pluginId","msg","fontStyle","icon","e","stopPropagation","defaultProps","propTypes","PropTypes","bool","string","isRequired","func"],"mappings":"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","sourcesContent":["import React, { memo } from 'react';\nimport PropTypes from 'prop-types';\nimport { get } from 'lodash';\nimport { FormattedMessage } from 'react-intl';\nimport { AttributeIcon, IconLinks } from '@buffetjs/core';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport pluginId from '../../pluginId';\nimport useDataManager from '../../hooks/useDataManager';\nimport getAttributeDisplayedType from '../../utils/getAttributeDisplayedType';\nimport getTrad from '../../utils/getTrad';\nimport Curve from '../../icons/Curve';\nimport UpperFist from '../UpperFirst';\nimport Wrapper from './Wrapper';\n\nfunction ListRow({\n  configurable,\n  name,\n  dzName,\n  nature,\n  onClick,\n  plugin,\n  target,\n  targetUid,\n  type,\n  mainTypeName,\n  editTarget,\n  firstLoopComponentName,\n  firstLoopComponentUid,\n  isFromDynamicZone,\n  repeatable,\n  secondLoopComponentName,\n  secondLoopComponentUid,\n  isNestedInDZComponent,\n}) {\n  const { contentTypes, isInDevelopmentMode, modifiedData, removeAttribute } = useDataManager();\n  const isMorph = target === '*';\n  const ico = ['integer', 'biginteger', 'float', 'decimal'].includes(type) ? 'number' : type;\n\n  let readableType = type;\n\n  if (['integer', 'biginteger', 'float', 'decimal'].includes(type)) {\n    readableType = 'number';\n  } else if (['string'].includes(type)) {\n    readableType = 'text';\n  }\n\n  const contentTypeFriendlyName = get(contentTypes, [target, 'schema', 'name'], '');\n  const src = target ? 'relation' : ico;\n\n  const handleClick = () => {\n    if (isMorph) {\n      return;\n    }\n\n    if (configurable !== false) {\n      const firstComponentCategory = get(\n        modifiedData,\n        ['components', firstLoopComponentUid, 'category'],\n        null\n      );\n      const secondComponentCategory = get(\n        modifiedData,\n        ['components', secondLoopComponentUid, 'category'],\n        null\n      );\n\n      const attrType = nature ? 'relation' : type;\n      const icoType = getAttributeDisplayedType(attrType);\n\n      let firstHeaderObject = {\n        header_label_1: mainTypeName,\n        header_icon_name_1: icoType,\n        header_icon_isCustom_1: false,\n        header_info_category_1: null,\n        header_info_name_1: null,\n      };\n      let secondHeaderObject = {\n        header_label_2: name,\n        header_icon_name_2: null,\n        header_icon_isCustom_2: false,\n        header_info_category_2: null,\n        header_info_name_2: null,\n      };\n      let thirdHeaderObject = {\n        header_icon_name_3: 'component',\n        header_icon_isCustom_3: false,\n        header_info_category_3: null,\n        header_info_name_3: null,\n      };\n      let fourthHeaderObject = {\n        header_icon_name_4: null,\n        header_icon_isCustom_4: false,\n        header_info_category_4: null,\n        header_info_name_4: null,\n      };\n      let fifthHeaderObject = {\n        header_icon_name_5: null,\n        header_icon_isCustom_5: false,\n        header_info_category_5: null,\n        header_info_name_5: null,\n      };\n\n      if (firstLoopComponentName) {\n        secondHeaderObject = {\n          header_label_2: firstLoopComponentName,\n          header_icon_name_2: 'component',\n          header_icon_isCustom_2: false,\n          header_info_category_2: firstComponentCategory,\n          header_info_name_2: firstLoopComponentName,\n        };\n\n        thirdHeaderObject = {\n          ...thirdHeaderObject,\n          header_label_3: name,\n          header_icon_name_3: null,\n        };\n      }\n\n      if (secondLoopComponentUid) {\n        thirdHeaderObject = {\n          ...thirdHeaderObject,\n          header_label_3: secondLoopComponentName,\n          header_icon_name_3: 'component',\n          header_info_category_3: secondComponentCategory,\n          header_info_name_3: secondLoopComponentName,\n        };\n        fourthHeaderObject = {\n          ...fourthHeaderObject,\n          header_label_4: name,\n          header_icon_name_4: null,\n        };\n      }\n\n      if (isFromDynamicZone || isNestedInDZComponent) {\n        secondHeaderObject = {\n          header_label_2: dzName,\n          header_icon_name_2: 'dynamiczone',\n          header_icon_isCustom_2: false,\n          header_info_name_2: null,\n          header_info_category_2: null,\n        };\n        thirdHeaderObject = {\n          header_icon_name_3: 'component',\n          header_label_3: firstLoopComponentName,\n          header_info_name_3: firstComponentCategory,\n          header_info_category_3: firstComponentCategory,\n        };\n\n        if (!isNestedInDZComponent) {\n          fourthHeaderObject = {\n            header_icon_name_4: null,\n            header_icon_isCustom_4: false,\n            header_info_category_4: null,\n            header_label_4: name,\n          };\n        } else {\n          fourthHeaderObject = {\n            header_icon_name_4: 'components',\n            header_icon_isCustom_4: false,\n            header_info_category_4: secondComponentCategory,\n            header_info_name_4: secondLoopComponentName,\n            header_label_4: secondLoopComponentName,\n          };\n\n          fifthHeaderObject = {\n            ...fifthHeaderObject,\n            header_label_5: name,\n          };\n        }\n      }\n\n      onClick(\n        // Tells where the attribute is located in the main modifiedData object : contentType, component or components\n        editTarget,\n        // main data type uid\n        secondLoopComponentUid || firstLoopComponentUid || targetUid,\n        // Name of the attribute\n        name,\n        // Type of the attribute\n        attrType,\n        firstHeaderObject,\n        secondHeaderObject,\n        thirdHeaderObject,\n        fourthHeaderObject,\n        fifthHeaderObject\n      );\n    }\n  };\n  let loopNumber;\n\n  if (secondLoopComponentUid && firstLoopComponentUid) {\n    loopNumber = 2;\n  } else if (firstLoopComponentUid) {\n    loopNumber = 1;\n  } else {\n    loopNumber = 0;\n  }\n\n  return (\n    <Wrapper\n      onClick={handleClick}\n      className={[target ? 'relation-row' : '', configurable ? 'clickable' : '']}\n      loopNumber={loopNumber}\n    >\n      <td>\n        <AttributeIcon key={src} type={src} />\n        <Curve fill={isFromDynamicZone ? '#AED4FB' : '#f3f4f4'} />\n      </td>\n      <td style={{ fontWeight: 600 }}>\n        <p>{name}</p>\n      </td>\n      <td>\n        {target ? (\n          <div>\n            <FormattedMessage\n              id={`${pluginId}.modelPage.attribute.${\n                isMorph ? 'relation-polymorphic' : 'relationWith'\n              }`}\n            />\n            &nbsp;\n            <FormattedMessage id={`${pluginId}.from`}>\n              {msg => (\n                <span style={{ fontStyle: 'italic' }}>\n                  <UpperFist content={contentTypeFriendlyName} />\n                  &nbsp;\n                  {plugin && `(${msg}: ${plugin})`}\n                </span>\n              )}\n            </FormattedMessage>\n          </div>\n        ) : (\n          <>\n            <FormattedMessage id={`${pluginId}.attribute.${readableType}`} />\n            &nbsp;\n            {repeatable && <FormattedMessage id={getTrad('component.repeatable')} />}\n          </>\n        )}\n      </td>\n      <td className=\"button-container\">\n        {isInDevelopmentMode && (\n          <>\n            {configurable ? (\n              <>\n                {!isMorph ? (\n                  <IconLinks\n                    links={[\n                      {\n                        icon: <FontAwesomeIcon icon=\"pencil-alt\" />,\n                        onClick: () => handleClick(),\n                      },\n                      {\n                        icon: <FontAwesomeIcon icon=\"trash-alt\" />,\n                        onClick: e => {\n                          e.stopPropagation();\n                          removeAttribute(\n                            editTarget,\n                            name,\n                            secondLoopComponentUid || firstLoopComponentUid || ''\n                          );\n                        },\n                      },\n                    ]}\n                  />\n                ) : (\n                  <IconLinks\n                    links={[\n                      {\n                        icon: <FontAwesomeIcon icon=\"trash-alt\" />,\n                        onClick: e => {\n                          e.stopPropagation();\n                          removeAttribute(\n                            editTarget,\n                            name,\n                            secondLoopComponentUid || firstLoopComponentUid || ''\n                          );\n                        },\n                      },\n                    ]}\n                  />\n                )}\n              </>\n            ) : (\n              <button type=\"button\">\n                <FontAwesomeIcon icon=\"lock\" />\n              </button>\n            )}\n          </>\n        )}\n      </td>\n    </Wrapper>\n  );\n}\n\nListRow.defaultProps = {\n  configurable: true,\n  dzName: null,\n  firstLoopComponentName: null,\n  firstLoopComponentUid: null,\n  isFromDynamicZone: false,\n  isNestedInDZComponent: false,\n  nature: null,\n  onClick: () => {},\n  plugin: null,\n  repeatable: false,\n  secondLoopComponentName: null,\n  secondLoopComponentUid: null,\n  target: null,\n  targetUid: null,\n  type: null,\n};\n\nListRow.propTypes = {\n  configurable: PropTypes.bool,\n  dzName: PropTypes.string,\n  editTarget: PropTypes.string.isRequired,\n  firstLoopComponentName: PropTypes.string,\n  firstLoopComponentUid: PropTypes.string,\n  isFromDynamicZone: PropTypes.bool,\n  isNestedInDZComponent: PropTypes.bool,\n  mainTypeName: PropTypes.string.isRequired,\n  name: PropTypes.string.isRequired,\n  nature: PropTypes.string,\n  onClick: PropTypes.func,\n  plugin: PropTypes.string,\n  repeatable: PropTypes.bool,\n  secondLoopComponentName: PropTypes.string,\n  secondLoopComponentUid: PropTypes.string,\n  target: PropTypes.string,\n  targetUid: PropTypes.string,\n  type: PropTypes.string,\n};\n\nexport default memo(ListRow);\nexport { ListRow };\n"]},"metadata":{},"sourceType":"script"}