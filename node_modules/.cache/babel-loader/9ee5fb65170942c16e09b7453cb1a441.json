{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _strapiHelperPlugin = require(\"strapi-helper-plugin\");\n\nvar _reactDnd = require(\"react-dnd\");\n\nvar _reactDndHtml5Backend = _interopRequireDefault(require(\"react-dnd-html5-backend\"));\n\nvar _lodash = require(\"lodash\");\n\nvar _DragLayer = _interopRequireDefault(require(\"../../components/DragLayer\"));\n\nvar _permissions = _interopRequireDefault(require(\"../../permissions\"));\n\nvar _InputModalStepper = _interopRequireDefault(require(\"./InputModalStepper\"));\n\nvar _InputModalStepperProvider = _interopRequireDefault(require(\"../InputModalStepperProvider\"));\n\nvar InputModal = function InputModal(_ref) {\n  var allowedTypes = _ref.allowedTypes,\n      filesToUpload = _ref.filesToUpload,\n      fileToEdit = _ref.fileToEdit,\n      isOpen = _ref.isOpen,\n      multiple = _ref.multiple,\n      noNavigation = _ref.noNavigation,\n      onClosed = _ref.onClosed,\n      onInputMediaChange = _ref.onInputMediaChange,\n      onToggle = _ref.onToggle,\n      selectedFiles = _ref.selectedFiles,\n      step = _ref.step;\n  var singularTypes = allowedTypes.map(function (type) {\n    return type.substring(0, type.length - 1);\n  });\n\n  var permissions = _react[\"default\"].useMemo(function () {\n    return (0, _lodash.omit)(_permissions[\"default\"], 'main');\n  }, []);\n\n  var _useUserPermissions = (0, _strapiHelperPlugin.useUserPermissions)(permissions),\n      allowedActions = _useUserPermissions.allowedActions,\n      isLoading = _useUserPermissions.isLoading;\n\n  if (isLoading) {\n    return null;\n  }\n\n  return /*#__PURE__*/_react[\"default\"].createElement(_reactDnd.DndProvider, {\n    backend: _reactDndHtml5Backend[\"default\"]\n  }, /*#__PURE__*/_react[\"default\"].createElement(_DragLayer[\"default\"], null), /*#__PURE__*/_react[\"default\"].createElement(_InputModalStepperProvider[\"default\"], {\n    allowedActions: allowedActions,\n    onClosed: onClosed,\n    initialFilesToUpload: filesToUpload,\n    initialFileToEdit: fileToEdit,\n    isOpen: isOpen,\n    multiple: multiple,\n    noNavigation: noNavigation,\n    selectedFiles: selectedFiles,\n    step: step,\n    allowedTypes: singularTypes\n  }, /*#__PURE__*/_react[\"default\"].createElement(_InputModalStepper[\"default\"], {\n    allowedActions: allowedActions,\n    isOpen: isOpen,\n    noNavigation: noNavigation,\n    onToggle: onToggle,\n    onInputMediaChange: onInputMediaChange\n  })));\n};\n\nInputModal.defaultProps = {\n  allowedTypes: [],\n  filesToUpload: null,\n  fileToEdit: null,\n  noNavigation: false,\n  onInputMediaChange: function onInputMediaChange() {},\n  onToggle: function onToggle() {},\n  selectedFiles: [],\n  step: 'list'\n};\nInputModal.propTypes = {\n  allowedTypes: _propTypes[\"default\"].arrayOf(_propTypes[\"default\"].string),\n  filesToUpload: _propTypes[\"default\"].object,\n  fileToEdit: _propTypes[\"default\"].object,\n  isOpen: _propTypes[\"default\"].bool.isRequired,\n  multiple: _propTypes[\"default\"].bool.isRequired,\n  noNavigation: _propTypes[\"default\"].bool,\n  onClosed: _propTypes[\"default\"].func.isRequired,\n  onInputMediaChange: _propTypes[\"default\"].func,\n  onToggle: _propTypes[\"default\"].func,\n  selectedFiles: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].object, _propTypes[\"default\"].array]),\n  step: _propTypes[\"default\"].string\n};\nvar _default = InputModal;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["/Users/joaovictorlobao/prefeituramaragogistrapi/.cache/plugins/strapi-plugin-upload/admin/src/containers/InputModalStepper/index.js"],"names":["InputModal","allowedTypes","filesToUpload","fileToEdit","isOpen","multiple","noNavigation","onClosed","onInputMediaChange","onToggle","selectedFiles","step","singularTypes","map","type","substring","length","permissions","React","useMemo","pluginPermissions","allowedActions","isLoading","HTML5Backend","defaultProps","propTypes","PropTypes","arrayOf","string","object","bool","isRequired","func","oneOfType","array"],"mappings":"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","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { useUserPermissions } from 'strapi-helper-plugin';\nimport { DndProvider } from 'react-dnd';\nimport HTML5Backend from 'react-dnd-html5-backend';\nimport { omit } from 'lodash';\nimport DragLayer from '../../components/DragLayer';\n\nimport pluginPermissions from '../../permissions';\nimport InputModalStepper from './InputModalStepper';\nimport InputModalStepperProvider from '../InputModalStepperProvider';\n\nconst InputModal = ({\n  allowedTypes,\n  filesToUpload,\n  fileToEdit,\n  isOpen,\n  multiple,\n  noNavigation,\n  onClosed,\n  onInputMediaChange,\n  onToggle,\n  selectedFiles,\n  step,\n}) => {\n  const singularTypes = allowedTypes.map(type => type.substring(0, type.length - 1));\n  const permissions = React.useMemo(() => omit(pluginPermissions, 'main'), []);\n  const { allowedActions, isLoading } = useUserPermissions(permissions);\n\n  if (isLoading) {\n    return null;\n  }\n\n  return (\n    <DndProvider backend={HTML5Backend}>\n      <DragLayer />\n      <InputModalStepperProvider\n        allowedActions={allowedActions}\n        onClosed={onClosed}\n        initialFilesToUpload={filesToUpload}\n        initialFileToEdit={fileToEdit}\n        isOpen={isOpen}\n        multiple={multiple}\n        noNavigation={noNavigation}\n        selectedFiles={selectedFiles}\n        step={step}\n        allowedTypes={singularTypes}\n      >\n        <InputModalStepper\n          allowedActions={allowedActions}\n          isOpen={isOpen}\n          noNavigation={noNavigation}\n          onToggle={onToggle}\n          onInputMediaChange={onInputMediaChange}\n        />\n      </InputModalStepperProvider>\n    </DndProvider>\n  );\n};\n\nInputModal.defaultProps = {\n  allowedTypes: [],\n  filesToUpload: null,\n  fileToEdit: null,\n  noNavigation: false,\n  onInputMediaChange: () => {},\n  onToggle: () => {},\n  selectedFiles: [],\n  step: 'list',\n};\n\nInputModal.propTypes = {\n  allowedTypes: PropTypes.arrayOf(PropTypes.string),\n  filesToUpload: PropTypes.object,\n  fileToEdit: PropTypes.object,\n  isOpen: PropTypes.bool.isRequired,\n  multiple: PropTypes.bool.isRequired,\n  noNavigation: PropTypes.bool,\n  onClosed: PropTypes.func.isRequired,\n  onInputMediaChange: PropTypes.func,\n  onToggle: PropTypes.func,\n  selectedFiles: PropTypes.oneOfType([PropTypes.object, PropTypes.array]),\n  step: PropTypes.string,\n};\n\nexport default InputModal;\n"]},"metadata":{},"sourceType":"script"}