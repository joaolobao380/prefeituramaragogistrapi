{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _typeof = require(\"@babel/runtime/helpers/typeof\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _reactFontawesome = require(\"@fortawesome/react-fontawesome\");\n\nvar _lodash = require(\"lodash\");\n\nvar _reactstrap = require(\"reactstrap\");\n\nvar _useDataManager2 = _interopRequireDefault(require(\"../../hooks/useDataManager\"));\n\nvar _Item = _interopRequireDefault(require(\"./Item\"));\n\nvar _Wrapper = _interopRequireDefault(require(\"./Wrapper\"));\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { \"default\": obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj[\"default\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nvar RelationTargetPicker = function RelationTargetPicker(_ref) {\n  var onChange = _ref.onChange,\n      oneThatIsCreatingARelationWithAnother = _ref.oneThatIsCreatingARelationWithAnother,\n      target = _ref.target;\n\n  var _useState = (0, _react.useState)(false),\n      _useState2 = (0, _slicedToArray2[\"default\"])(_useState, 2),\n      isOpen = _useState2[0],\n      setIsOpen = _useState2[1];\n\n  var _useDataManager = (0, _useDataManager2[\"default\"])(),\n      contentTypes = _useDataManager.contentTypes,\n      sortedContentTypesList = _useDataManager.sortedContentTypesList;\n\n  var allowedContentTypesForRelation = (0, _react.useMemo)(function () {\n    return sortedContentTypesList.filter(function (obj) {\n      return obj.kind === 'collectionType';\n    }).filter(function (obj) {\n      return obj.restrictRelationsTo === null || Array.isArray(obj.restrictRelationsTo) && obj.restrictRelationsTo.length > 0;\n    });\n  }, [sortedContentTypesList]);\n  var pluginInfo = (0, _react.useMemo)(function () {\n    var plugin = (0, _lodash.get)(contentTypes, [target, 'plugin'], null);\n\n    if (plugin) {\n      return /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n        style: {\n          fontStyle: 'italic',\n          textTransform: 'none'\n        }\n      }, \"\\xA0 (from: \", plugin, \")\");\n    }\n\n    return null;\n  }, [contentTypes, target]);\n  var targetFriendlyName = (0, _react.useMemo)(function () {\n    var name = (0, _lodash.get)(contentTypes, [target, 'schema', 'name'], 'error');\n    return name;\n  }, [contentTypes, target]);\n  return /*#__PURE__*/_react[\"default\"].createElement(_Wrapper[\"default\"], null, /*#__PURE__*/_react[\"default\"].createElement(_reactstrap.Dropdown, {\n    isOpen: isOpen,\n    toggle: function toggle() {\n      setIsOpen(!isOpen);\n    }\n  }, /*#__PURE__*/_react[\"default\"].createElement(_reactstrap.DropdownToggle, {\n    caret: true\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"p\", null, /*#__PURE__*/_react[\"default\"].createElement(_reactFontawesome.FontAwesomeIcon, {\n    icon: ['far', 'caret-square-right'],\n    style: {\n      fontSize: 12,\n      marginTop: '-3px'\n    }\n  }), targetFriendlyName, pluginInfo)), /*#__PURE__*/_react[\"default\"].createElement(_reactstrap.DropdownMenu, {\n    style: {\n      paddingTop: '3px'\n    }\n  }, allowedContentTypesForRelation.map(function (_ref2) {\n    var uid = _ref2.uid,\n        title = _ref2.title,\n        restrictRelationsTo = _ref2.restrictRelationsTo,\n        plugin = _ref2.plugin;\n    return /*#__PURE__*/_react[\"default\"].createElement(_Item[\"default\"], {\n      key: uid,\n      uid: uid,\n      title: title,\n      restrictRelationsTo: restrictRelationsTo,\n      plugin: plugin,\n      onChange: onChange,\n      oneThatIsCreatingARelationWithAnother: oneThatIsCreatingARelationWithAnother\n    });\n  }))));\n};\n\nRelationTargetPicker.propTypes = {\n  onChange: _propTypes[\"default\"].func.isRequired,\n  oneThatIsCreatingARelationWithAnother: _propTypes[\"default\"].string.isRequired,\n  target: _propTypes[\"default\"].string.isRequired\n};\nvar _default = RelationTargetPicker;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["/Users/joaovictorlobao/prefeituramaragogistrapi/.cache/plugins/strapi-plugin-content-type-builder/admin/src/components/RelationTargetPicker/index.js"],"names":["RelationTargetPicker","onChange","oneThatIsCreatingARelationWithAnother","target","isOpen","setIsOpen","contentTypes","sortedContentTypesList","allowedContentTypesForRelation","filter","obj","kind","restrictRelationsTo","Array","isArray","length","pluginInfo","plugin","fontStyle","textTransform","targetFriendlyName","name","fontSize","marginTop","paddingTop","map","uid","title","propTypes","PropTypes","func","isRequired","string"],"mappings":";;;;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AAEA;;AACA;;AACA;;;;;;AAEA,IAAMA,oBAAoB,GAAG,SAAvBA,oBAAuB,OAAiE;AAAA,MAA9DC,QAA8D,QAA9DA,QAA8D;AAAA,MAApDC,qCAAoD,QAApDA,qCAAoD;AAAA,MAAbC,MAAa,QAAbA,MAAa;;AAC5F,kBAA4B,qBAAS,KAAT,CAA5B;AAAA;AAAA,MAAOC,MAAP;AAAA,MAAeC,SAAf;;AACA,wBAAiD,kCAAjD;AAAA,MAAQC,YAAR,mBAAQA,YAAR;AAAA,MAAsBC,sBAAtB,mBAAsBA,sBAAtB;;AACA,MAAMC,8BAA8B,GAAG,oBACrC;AAAA,WACED,sBAAsB,CACnBE,MADH,CACU,UAAAC,GAAG;AAAA,aAAIA,GAAG,CAACC,IAAJ,KAAa,gBAAjB;AAAA,KADb,EAEGF,MAFH,CAGI,UAAAC,GAAG;AAAA,aACDA,GAAG,CAACE,mBAAJ,KAA4B,IAA5B,IACCC,KAAK,CAACC,OAAN,CAAcJ,GAAG,CAACE,mBAAlB,KAA0CF,GAAG,CAACE,mBAAJ,CAAwBG,MAAxB,GAAiC,CAF3E;AAAA,KAHP,CADF;AAAA,GADqC,EASrC,CAACR,sBAAD,CATqC,CAAvC;AAYA,MAAMS,UAAU,GAAG,oBAAQ,YAAM;AAC/B,QAAMC,MAAM,GAAG,iBAAIX,YAAJ,EAAkB,CAACH,MAAD,EAAS,QAAT,CAAlB,EAAsC,IAAtC,CAAf;;AAEA,QAAIc,MAAJ,EAAY;AACV,0BACE;AAAM,QAAA,KAAK,EAAE;AAAEC,UAAAA,SAAS,EAAE,QAAb;AAAuBC,UAAAA,aAAa,EAAE;AAAtC;AAAb,yBAA4EF,MAA5E,MADF;AAGD;;AAED,WAAO,IAAP;AACD,GAVkB,EAUhB,CAACX,YAAD,EAAeH,MAAf,CAVgB,CAAnB;AAYA,MAAMiB,kBAAkB,GAAG,oBAAQ,YAAM;AACvC,QAAMC,IAAI,GAAG,iBAAIf,YAAJ,EAAkB,CAACH,MAAD,EAAS,QAAT,EAAmB,MAAnB,CAAlB,EAA8C,OAA9C,CAAb;AAEA,WAAOkB,IAAP;AACD,GAJ0B,EAIxB,CAACf,YAAD,EAAeH,MAAf,CAJwB,CAA3B;AAMA,sBACE,gCAAC,mBAAD,qBACE,gCAAC,oBAAD;AACE,IAAA,MAAM,EAAEC,MADV;AAEE,IAAA,MAAM,EAAE,kBAAM;AACZC,MAAAA,SAAS,CAAC,CAACD,MAAF,CAAT;AACD;AAJH,kBAME,gCAAC,0BAAD;AAAgB,IAAA,KAAK;AAArB,kBACE,wDACE,gCAAC,iCAAD;AACE,IAAA,IAAI,EAAE,CAAC,KAAD,EAAQ,oBAAR,CADR;AAEE,IAAA,KAAK,EAAE;AAAEkB,MAAAA,QAAQ,EAAE,EAAZ;AAAgBC,MAAAA,SAAS,EAAE;AAA3B;AAFT,IADF,EAKGH,kBALH,EAMGJ,UANH,CADF,CANF,eAgBE,gCAAC,wBAAD;AAAc,IAAA,KAAK,EAAE;AAAEQ,MAAAA,UAAU,EAAE;AAAd;AAArB,KACGhB,8BAA8B,CAACiB,GAA/B,CAAmC,iBAAiD;AAAA,QAA9CC,GAA8C,SAA9CA,GAA8C;AAAA,QAAzCC,KAAyC,SAAzCA,KAAyC;AAAA,QAAlCf,mBAAkC,SAAlCA,mBAAkC;AAAA,QAAbK,MAAa,SAAbA,MAAa;AACnF,wBACE,gCAAC,gBAAD;AACE,MAAA,GAAG,EAAES,GADP;AAEE,MAAA,GAAG,EAAEA,GAFP;AAGE,MAAA,KAAK,EAAEC,KAHT;AAIE,MAAA,mBAAmB,EAAEf,mBAJvB;AAKE,MAAA,MAAM,EAAEK,MALV;AAME,MAAA,QAAQ,EAAEhB,QANZ;AAOE,MAAA,qCAAqC,EAAEC;AAPzC,MADF;AAWD,GAZA,CADH,CAhBF,CADF,CADF;AAoCD,CArED;;AAuEAF,oBAAoB,CAAC4B,SAArB,GAAiC;AAC/B3B,EAAAA,QAAQ,EAAE4B,sBAAUC,IAAV,CAAeC,UADM;AAE/B7B,EAAAA,qCAAqC,EAAE2B,sBAAUG,MAAV,CAAiBD,UAFzB;AAG/B5B,EAAAA,MAAM,EAAE0B,sBAAUG,MAAV,CAAiBD;AAHM,CAAjC;eAMe/B,oB","sourcesContent":["import React, { useMemo, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { get } from 'lodash';\nimport { Dropdown, DropdownToggle, DropdownMenu } from 'reactstrap';\n\nimport useDataManager from '../../hooks/useDataManager';\nimport Item from './Item';\nimport Wrapper from './Wrapper';\n\nconst RelationTargetPicker = ({ onChange, oneThatIsCreatingARelationWithAnother, target }) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const { contentTypes, sortedContentTypesList } = useDataManager();\n  const allowedContentTypesForRelation = useMemo(\n    () =>\n      sortedContentTypesList\n        .filter(obj => obj.kind === 'collectionType')\n        .filter(\n          obj =>\n            obj.restrictRelationsTo === null ||\n            (Array.isArray(obj.restrictRelationsTo) && obj.restrictRelationsTo.length > 0)\n        ),\n    [sortedContentTypesList]\n  );\n\n  const pluginInfo = useMemo(() => {\n    const plugin = get(contentTypes, [target, 'plugin'], null);\n\n    if (plugin) {\n      return (\n        <span style={{ fontStyle: 'italic', textTransform: 'none' }}>&nbsp; (from: {plugin})</span>\n      );\n    }\n\n    return null;\n  }, [contentTypes, target]);\n\n  const targetFriendlyName = useMemo(() => {\n    const name = get(contentTypes, [target, 'schema', 'name'], 'error');\n\n    return name;\n  }, [contentTypes, target]);\n\n  return (\n    <Wrapper>\n      <Dropdown\n        isOpen={isOpen}\n        toggle={() => {\n          setIsOpen(!isOpen);\n        }}\n      >\n        <DropdownToggle caret>\n          <p>\n            <FontAwesomeIcon\n              icon={['far', 'caret-square-right']}\n              style={{ fontSize: 12, marginTop: '-3px' }}\n            />\n            {targetFriendlyName}\n            {pluginInfo}\n          </p>\n        </DropdownToggle>\n        <DropdownMenu style={{ paddingTop: '3px' }}>\n          {allowedContentTypesForRelation.map(({ uid, title, restrictRelationsTo, plugin }) => {\n            return (\n              <Item\n                key={uid}\n                uid={uid}\n                title={title}\n                restrictRelationsTo={restrictRelationsTo}\n                plugin={plugin}\n                onChange={onChange}\n                oneThatIsCreatingARelationWithAnother={oneThatIsCreatingARelationWithAnother}\n              />\n            );\n          })}\n        </DropdownMenu>\n      </Dropdown>\n    </Wrapper>\n  );\n};\n\nRelationTargetPicker.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  oneThatIsCreatingARelationWithAnother: PropTypes.string.isRequired,\n  target: PropTypes.string.isRequired,\n};\n\nexport default RelationTargetPicker;\n"]},"metadata":{},"sourceType":"script"}