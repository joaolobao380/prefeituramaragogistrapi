{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nvar _lodash = require(\"lodash\");\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2[\"default\"])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nvar formatLayoutToApi = function formatLayoutToApi(_ref) {\n  var layouts = _ref.layouts,\n      metadatas = _ref.metadatas,\n      rest = (0, _objectWithoutProperties2[\"default\"])(_ref, [\"layouts\", \"metadatas\"]);\n  var list = layouts.list.map(function (obj) {\n    if (obj.name) {\n      return obj.name;\n    }\n\n    return obj;\n  });\n  var editRelations = layouts.editRelations.map(function (_ref2) {\n    var name = _ref2.name;\n    return name;\n  });\n  var formattedMetadatas = Object.keys(metadatas).reduce(function (acc, current) {\n    var currentMetadatas = (0, _lodash.get)(metadatas, [current], {});\n    var editMetadatas = currentMetadatas.edit;\n\n    if (editMetadatas.mainField) {\n      editMetadatas = _objectSpread(_objectSpread({}, editMetadatas), {}, {\n        mainField: currentMetadatas.edit.mainField.name\n      });\n    }\n\n    return _objectSpread(_objectSpread({}, acc), {}, (0, _defineProperty2[\"default\"])({}, current, {\n      edit: editMetadatas,\n      list: (0, _lodash.omit)(currentMetadatas.list, ['mainField'])\n    }));\n  }, {});\n  var edit = layouts.edit.map(function (row) {\n    return row.map(function (_ref3) {\n      var name = _ref3.name,\n          size = _ref3.size;\n      return {\n        name: name,\n        size: size\n      };\n    });\n  });\n  return _objectSpread(_objectSpread({}, rest), {}, {\n    layouts: {\n      edit: edit,\n      editRelations: editRelations,\n      list: list\n    },\n    metadatas: formattedMetadatas\n  });\n};\n\nvar _default = formatLayoutToApi;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["/Users/joaovictorlobao/prefeituramaragogistrapi/.cache/plugins/strapi-plugin-content-manager/admin/src/utils/formatLayoutToApi.js"],"names":["formatLayoutToApi","layouts","metadatas","rest","list","map","obj","name","editRelations","formattedMetadatas","Object","keys","reduce","acc","current","currentMetadatas","editMetadatas","edit","mainField","row","size"],"mappings":";;;;;;;;;;;;;AAAA;;;;;;AAEA,IAAMA,iBAAiB,GAAG,SAApBA,iBAAoB,OAAqC;AAAA,MAAlCC,OAAkC,QAAlCA,OAAkC;AAAA,MAAzBC,SAAyB,QAAzBA,SAAyB;AAAA,MAAXC,IAAW;AAC7D,MAAMC,IAAI,GAAGH,OAAO,CAACG,IAAR,CAAaC,GAAb,CAAiB,UAAAC,GAAG,EAAI;AACnC,QAAIA,GAAG,CAACC,IAAR,EAAc;AACZ,aAAOD,GAAG,CAACC,IAAX;AACD;;AAED,WAAOD,GAAP;AACD,GANY,CAAb;AAOA,MAAME,aAAa,GAAGP,OAAO,CAACO,aAAR,CAAsBH,GAAtB,CAA0B;AAAA,QAAGE,IAAH,SAAGA,IAAH;AAAA,WAAcA,IAAd;AAAA,GAA1B,CAAtB;AAEA,MAAME,kBAAkB,GAAGC,MAAM,CAACC,IAAP,CAAYT,SAAZ,EAAuBU,MAAvB,CAA8B,UAACC,GAAD,EAAMC,OAAN,EAAkB;AACzE,QAAMC,gBAAgB,GAAG,iBAAIb,SAAJ,EAAe,CAACY,OAAD,CAAf,EAA0B,EAA1B,CAAzB;AACA,QAAIE,aAAa,GAAGD,gBAAgB,CAACE,IAArC;;AAEA,QAAID,aAAa,CAACE,SAAlB,EAA6B;AAC3BF,MAAAA,aAAa,mCAAQA,aAAR;AAAuBE,QAAAA,SAAS,EAAEH,gBAAgB,CAACE,IAAjB,CAAsBC,SAAtB,CAAgCX;AAAlE,QAAb;AACD;;AAED,2CACKM,GADL,4CAEGC,OAFH,EAEa;AACTG,MAAAA,IAAI,EAAED,aADG;AAETZ,MAAAA,IAAI,EAAE,kBAAKW,gBAAgB,CAACX,IAAtB,EAA4B,CAAC,WAAD,CAA5B;AAFG,KAFb;AAOD,GAf0B,EAexB,EAfwB,CAA3B;AAiBA,MAAMa,IAAI,GAAGhB,OAAO,CAACgB,IAAR,CAAaZ,GAAb,CAAiB,UAAAc,GAAG;AAAA,WAC/BA,GAAG,CAACd,GAAJ,CAAQ;AAAA,UAAGE,IAAH,SAAGA,IAAH;AAAA,UAASa,IAAT,SAASA,IAAT;AAAA,aAAqB;AAC3Bb,QAAAA,IAAI,EAAJA,IAD2B;AAE3Ba,QAAAA,IAAI,EAAJA;AAF2B,OAArB;AAAA,KAAR,CAD+B;AAAA,GAApB,CAAb;AAOA,yCACKjB,IADL;AAEEF,IAAAA,OAAO,EAAE;AAAEgB,MAAAA,IAAI,EAAJA,IAAF;AAAQT,MAAAA,aAAa,EAAbA,aAAR;AAAuBJ,MAAAA,IAAI,EAAJA;AAAvB,KAFX;AAGEF,IAAAA,SAAS,EAAEO;AAHb;AAKD,CAvCD;;eAyCeT,iB","sourcesContent":["import { omit, get } from 'lodash';\n\nconst formatLayoutToApi = ({ layouts, metadatas, ...rest }) => {\n  const list = layouts.list.map(obj => {\n    if (obj.name) {\n      return obj.name;\n    }\n\n    return obj;\n  });\n  const editRelations = layouts.editRelations.map(({ name }) => name);\n\n  const formattedMetadatas = Object.keys(metadatas).reduce((acc, current) => {\n    const currentMetadatas = get(metadatas, [current], {});\n    let editMetadatas = currentMetadatas.edit;\n\n    if (editMetadatas.mainField) {\n      editMetadatas = { ...editMetadatas, mainField: currentMetadatas.edit.mainField.name };\n    }\n\n    return {\n      ...acc,\n      [current]: {\n        edit: editMetadatas,\n        list: omit(currentMetadatas.list, ['mainField']),\n      },\n    };\n  }, {});\n\n  const edit = layouts.edit.map(row =>\n    row.map(({ name, size }) => ({\n      name,\n      size,\n    }))\n  );\n\n  return {\n    ...rest,\n    layouts: { edit, editRelations, list },\n    metadatas: formattedMetadatas,\n  };\n};\n\nexport default formatLayoutToApi;\n"]},"metadata":{},"sourceType":"script"}