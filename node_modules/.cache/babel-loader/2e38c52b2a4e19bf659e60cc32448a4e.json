{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _typeof = require(\"@babel/runtime/helpers/typeof\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _reactRouterDom = require(\"react-router-dom\");\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _strapiHelperPlugin = require(\"strapi-helper-plugin\");\n\nvar _permissions = _interopRequireDefault(require(\"../../permissions\"));\n\nvar _contexts = require(\"../../contexts\");\n\nvar _hooks = require(\"../../hooks\");\n\nvar _utils = require(\"../../utils\");\n\nvar _EditViewLayoutManager = _interopRequireDefault(require(\"../EditViewLayoutManager\"));\n\nvar _EditSettingsView = _interopRequireDefault(require(\"../EditSettingsView\"));\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { \"default\": obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj[\"default\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nvar SingleTypeRecursivePath = function SingleTypeRecursivePath(_ref) {\n  var _ref$match = _ref.match,\n      slug = _ref$match.params.slug,\n      url = _ref$match.url;\n\n  var _useFetchContentTypeL = (0, _hooks.useFetchContentTypeLayout)(slug),\n      isLoading = _useFetchContentTypeL.isLoading,\n      layout = _useFetchContentTypeL.layout,\n      updateLayout = _useFetchContentTypeL.updateLayout;\n\n  var _useMemo = (0, _react.useMemo)(function () {\n    var rawComponentsLayouts = {};\n    var rawContentTypeLayout = {};\n\n    if (layout.contentType) {\n      rawContentTypeLayout = (0, _utils.formatLayoutToApi)(layout.contentType);\n    }\n\n    if (layout.components) {\n      rawComponentsLayouts = Object.keys(layout.components).reduce(function (acc, current) {\n        acc[current] = (0, _utils.formatLayoutToApi)(layout.components[current]);\n        return acc;\n      }, {});\n    }\n\n    return {\n      rawContentTypeLayout: rawContentTypeLayout,\n      rawComponentsLayouts: rawComponentsLayouts\n    };\n  }, [layout]),\n      rawContentTypeLayout = _useMemo.rawContentTypeLayout,\n      rawComponentsLayouts = _useMemo.rawComponentsLayouts;\n\n  if (isLoading) {\n    return /*#__PURE__*/_react[\"default\"].createElement(_strapiHelperPlugin.LoadingIndicatorPage, null);\n  }\n\n  return /*#__PURE__*/_react[\"default\"].createElement(_contexts.ContentTypeLayoutContext.Provider, {\n    value: layout\n  }, /*#__PURE__*/_react[\"default\"].createElement(_reactRouterDom.Switch, null, /*#__PURE__*/_react[\"default\"].createElement(_reactRouterDom.Route, {\n    path: \"\".concat(url, \"/configurations/edit\")\n  }, /*#__PURE__*/_react[\"default\"].createElement(_strapiHelperPlugin.CheckPagePermissions, {\n    permissions: _permissions[\"default\"].singleTypesConfigurations\n  }, /*#__PURE__*/_react[\"default\"].createElement(_EditSettingsView[\"default\"], {\n    components: rawComponentsLayouts,\n    isContentTypeView: true,\n    mainLayout: rawContentTypeLayout,\n    slug: slug,\n    updateLayout: updateLayout\n  }))), /*#__PURE__*/_react[\"default\"].createElement(_reactRouterDom.Route, {\n    path: url,\n    render: function render(_ref2) {\n      var state = _ref2.location.state,\n          goBack = _ref2.history.goBack;\n      return /*#__PURE__*/_react[\"default\"].createElement(_EditViewLayoutManager[\"default\"], {\n        layout: layout,\n        slug: slug,\n        isSingleType: true,\n        state: state,\n        goBack: goBack\n      });\n    }\n  })));\n};\n\nSingleTypeRecursivePath.propTypes = {\n  match: _propTypes[\"default\"].shape({\n    url: _propTypes[\"default\"].string.isRequired,\n    params: _propTypes[\"default\"].shape({\n      slug: _propTypes[\"default\"].string.isRequired\n    }).isRequired\n  }).isRequired\n};\n\nvar _default = /*#__PURE__*/(0, _react.memo)(SingleTypeRecursivePath);\n\nexports[\"default\"] = _default;","map":{"version":3,"sources":["/Users/joaovictorlobao/prefeituramaragogistrapi/.cache/plugins/strapi-plugin-content-manager/admin/src/containers/SingleTypeRecursivePath/index.js"],"names":["SingleTypeRecursivePath","match","slug","params","url","isLoading","layout","updateLayout","rawComponentsLayouts","rawContentTypeLayout","contentType","components","Object","keys","reduce","acc","current","pluginPermissions","singleTypesConfigurations","state","location","goBack","history","propTypes","PropTypes","shape","string","isRequired"],"mappings":"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","sourcesContent":["import React, { memo, useMemo } from 'react';\nimport { Switch, Route } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport { LoadingIndicatorPage, CheckPagePermissions } from 'strapi-helper-plugin';\nimport pluginPermissions from '../../permissions';\nimport { ContentTypeLayoutContext } from '../../contexts';\nimport { useFetchContentTypeLayout } from '../../hooks';\nimport { formatLayoutToApi } from '../../utils';\nimport EditViewLayoutManager from '../EditViewLayoutManager';\nimport EditSettingsView from '../EditSettingsView';\n\nconst SingleTypeRecursivePath = ({\n  match: {\n    params: { slug },\n    url,\n  },\n}) => {\n  const { isLoading, layout, updateLayout } = useFetchContentTypeLayout(slug);\n\n  const { rawContentTypeLayout, rawComponentsLayouts } = useMemo(() => {\n    let rawComponentsLayouts = {};\n    let rawContentTypeLayout = {};\n\n    if (layout.contentType) {\n      rawContentTypeLayout = formatLayoutToApi(layout.contentType);\n    }\n\n    if (layout.components) {\n      rawComponentsLayouts = Object.keys(layout.components).reduce((acc, current) => {\n        acc[current] = formatLayoutToApi(layout.components[current]);\n\n        return acc;\n      }, {});\n    }\n\n    return { rawContentTypeLayout, rawComponentsLayouts };\n  }, [layout]);\n\n  if (isLoading) {\n    return <LoadingIndicatorPage />;\n  }\n\n  return (\n    <ContentTypeLayoutContext.Provider value={layout}>\n      <Switch>\n        <Route path={`${url}/configurations/edit`}>\n          <CheckPagePermissions permissions={pluginPermissions.singleTypesConfigurations}>\n            <EditSettingsView\n              components={rawComponentsLayouts}\n              isContentTypeView\n              mainLayout={rawContentTypeLayout}\n              slug={slug}\n              updateLayout={updateLayout}\n            />\n          </CheckPagePermissions>\n        </Route>\n        <Route\n          path={url}\n          render={({ location: { state }, history: { goBack } }) => {\n            return (\n              <EditViewLayoutManager\n                layout={layout}\n                slug={slug}\n                isSingleType\n                state={state}\n                goBack={goBack}\n              />\n            );\n          }}\n        />\n      </Switch>\n    </ContentTypeLayoutContext.Provider>\n  );\n};\n\nSingleTypeRecursivePath.propTypes = {\n  match: PropTypes.shape({\n    url: PropTypes.string.isRequired,\n    params: PropTypes.shape({\n      slug: PropTypes.string.isRequired,\n    }).isRequired,\n  }).isRequired,\n};\nexport default memo(SingleTypeRecursivePath);\n"]},"metadata":{},"sourceType":"script"}