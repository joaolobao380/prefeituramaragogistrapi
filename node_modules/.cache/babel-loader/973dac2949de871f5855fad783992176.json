{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _codemirror = _interopRequireDefault(require(\"codemirror\"));\n\nrequire(\"codemirror/mode/javascript/javascript\");\n\nrequire(\"codemirror/addon/lint/lint\");\n\nrequire(\"codemirror/addon/lint/javascript-lint\");\n\nrequire(\"codemirror/addon/edit/closebrackets\");\n\nrequire(\"codemirror/addon/selection/mark-selection\");\n\nrequire(\"codemirror/lib/codemirror.css\");\n\nrequire(\"codemirror/theme/solarized.css\");\n\nvar _lodash = require(\"lodash\");\n\nvar _jsonlint = _interopRequireDefault(require(\"./jsonlint\"));\n\nvar _components = _interopRequireDefault(require(\"./components\"));\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2[\"default\"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2[\"default\"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2[\"default\"])(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nvar WAIT = 600;\nvar stringify = JSON.stringify;\nvar DEFAULT_THEME = 'solarized dark';\n\nvar InputJSON = /*#__PURE__*/function (_React$Component) {\n  (0, _inherits2[\"default\"])(InputJSON, _React$Component);\n\n  var _super = _createSuper(InputJSON);\n\n  function InputJSON(props) {\n    var _this;\n\n    (0, _classCallCheck2[\"default\"])(this, InputJSON);\n    _this = _super.call(this, props);\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"timer\", null);\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"setInitValue\", function () {\n      var value = _this.props.value;\n\n      try {\n        if (value === null) return _this.codeMirror.setValue('');\n        var nextValue = typeof value !== 'string' ? stringify(value, null, 2) : value;\n        return _this.codeMirror.setValue(nextValue);\n      } catch (err) {\n        return _this.setState({\n          error: true\n        });\n      }\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"setSize\", function () {\n      return _this.codeMirror.setSize('100%', 'auto');\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"getContentAtLine\", function (line) {\n      return _this.codeMirror.getLine(line);\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"getEditorOption\", function (opt) {\n      return _this.codeMirror.getOption(opt);\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"getValue\", function () {\n      return _this.codeMirror.getValue();\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"markSelection\", function (_ref) {\n      var message = _ref.message;\n      var line = parseInt(message.split(':')[0].split('line ')[1], 10) - 1;\n\n      var content = _this.getContentAtLine(line);\n\n      if (content === '{') {\n        line += 1;\n        content = _this.getContentAtLine(line);\n      }\n\n      var chEnd = content.length;\n      var chStart = chEnd - (0, _lodash.trimStart)(content, ' ').length;\n\n      var markedText = _this.codeMirror.markText({\n        line: line,\n        ch: chStart\n      }, {\n        line: line,\n        ch: chEnd\n      }, {\n        className: 'colored'\n      });\n\n      _this.setState({\n        markedText: markedText\n      });\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"handleBlur\", function (_ref2) {\n      var target = _ref2.target;\n      var _this$props = _this.props,\n          name = _this$props.name,\n          onBlur = _this$props.onBlur;\n\n      if (target === undefined) {\n        // codemirror catches multiple events\n        onBlur({\n          target: {\n            name: name,\n            type: 'json',\n            value: _this.getValue()\n          }\n        });\n      }\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"handleChange\", function (doc, change) {\n      if (change.origin === 'setValue') {\n        return;\n      }\n\n      var _this$props2 = _this.props,\n          name = _this$props2.name,\n          onChange = _this$props2.onChange;\n      var value = doc.getValue();\n\n      if (value === '') {\n        value = null;\n      } // Update the parent\n\n\n      onChange({\n        target: {\n          name: name,\n          value: value,\n          type: 'json'\n        }\n      }); // Remove higlight error\n\n      if (_this.state.markedText) {\n        _this.state.markedText.clear();\n\n        _this.setState({\n          markedText: null,\n          error: null\n        });\n      }\n\n      clearTimeout(_this.timer);\n      _this.timer = setTimeout(function () {\n        return _this.testJSON(doc.getValue());\n      }, WAIT);\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"testJSON\", function (value) {\n      try {\n        _jsonlint[\"default\"].parse(value);\n      } catch (err) {\n        _this.markSelection(err);\n      }\n    });\n    _this.editor = /*#__PURE__*/_react[\"default\"].createRef();\n    _this.state = {\n      error: false,\n      markedText: null\n    };\n    return _this;\n  }\n\n  (0, _createClass2[\"default\"])(InputJSON, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      // Init codemirror component\n      this.codeMirror = _codemirror[\"default\"].fromTextArea(this.editor.current, {\n        autoCloseBrackets: true,\n        lineNumbers: true,\n        matchBrackets: true,\n        mode: 'application/json',\n        readOnly: this.props.disabled,\n        smartIndent: true,\n        styleSelectedText: true,\n        tabSize: 2,\n        theme: DEFAULT_THEME,\n        fontSize: '13px'\n      });\n      this.codeMirror.on('change', this.handleChange);\n      this.codeMirror.on('blur', this.handleBlur);\n      this.setSize();\n      this.setInitValue();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (prevProps.value !== this.props.value && !this.codeMirror.state.focused) {\n        this.setInitValue();\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (this.state.error) {\n        return /*#__PURE__*/_react[\"default\"].createElement(\"div\", null, \"error json\");\n      }\n\n      return /*#__PURE__*/_react[\"default\"].createElement(_components[\"default\"], {\n        disabled: this.props.disabled\n      }, /*#__PURE__*/_react[\"default\"].createElement(\"textarea\", {\n        ref: this.editor,\n        autoComplete: \"off\",\n        id: this.props.name,\n        defaultValue: \"\"\n      }));\n    }\n  }]);\n  return InputJSON;\n}(_react[\"default\"].Component);\n\nInputJSON.defaultProps = {\n  disabled: false,\n  onBlur: function onBlur() {},\n  onChange: function onChange() {},\n  value: null\n};\nInputJSON.propTypes = {\n  disabled: _propTypes[\"default\"].bool,\n  name: _propTypes[\"default\"].string.isRequired,\n  onBlur: _propTypes[\"default\"].func,\n  onChange: _propTypes[\"default\"].func,\n  value: _propTypes[\"default\"].any\n};\nvar _default = InputJSON;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["/Users/joaovictorlobao/prefeituramaragogistrapi/.cache/plugins/strapi-plugin-content-manager/admin/src/components/InputJSON/index.js"],"names":["WAIT","stringify","JSON","DEFAULT_THEME","InputJSON","props","value","codeMirror","setValue","nextValue","err","setState","error","setSize","line","getLine","opt","getOption","getValue","message","parseInt","split","content","getContentAtLine","chEnd","length","chStart","markedText","markText","ch","className","target","name","onBlur","undefined","type","doc","change","origin","onChange","state","clear","clearTimeout","timer","setTimeout","testJSON","jsonlint","parse","markSelection","editor","React","createRef","cm","fromTextArea","current","autoCloseBrackets","lineNumbers","matchBrackets","mode","readOnly","disabled","smartIndent","styleSelectedText","tabSize","theme","fontSize","on","handleChange","handleBlur","setInitValue","prevProps","focused","Component","defaultProps","propTypes","PropTypes","bool","string","isRequired","func","any"],"mappings":"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","sourcesContent":["/**\n *\n * InputJSON\n *\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport cm from 'codemirror';\nimport 'codemirror/mode/javascript/javascript';\nimport 'codemirror/addon/lint/lint';\nimport 'codemirror/addon/lint/javascript-lint';\nimport 'codemirror/addon/edit/closebrackets';\nimport 'codemirror/addon/selection/mark-selection';\nimport 'codemirror/lib/codemirror.css';\nimport 'codemirror/theme/solarized.css';\n\nimport { trimStart } from 'lodash';\nimport jsonlint from './jsonlint';\nimport Wrapper from './components';\n\nconst WAIT = 600;\nconst stringify = JSON.stringify;\nconst DEFAULT_THEME = 'solarized dark';\n\nclass InputJSON extends React.Component {\n  timer = null;\n\n  constructor(props) {\n    super(props);\n    this.editor = React.createRef();\n    this.state = { error: false, markedText: null };\n  }\n\n  componentDidMount() {\n    // Init codemirror component\n    this.codeMirror = cm.fromTextArea(this.editor.current, {\n      autoCloseBrackets: true,\n      lineNumbers: true,\n      matchBrackets: true,\n      mode: 'application/json',\n      readOnly: this.props.disabled,\n      smartIndent: true,\n      styleSelectedText: true,\n      tabSize: 2,\n      theme: DEFAULT_THEME,\n      fontSize: '13px',\n    });\n    this.codeMirror.on('change', this.handleChange);\n    this.codeMirror.on('blur', this.handleBlur);\n\n    this.setSize();\n    this.setInitValue();\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.value !== this.props.value && !this.codeMirror.state.focused) {\n      this.setInitValue();\n    }\n  }\n\n  setInitValue = () => {\n    const { value } = this.props;\n\n    try {\n      if (value === null) return this.codeMirror.setValue('');\n\n      const nextValue = typeof value !== 'string' ? stringify(value, null, 2) : value;\n\n      return this.codeMirror.setValue(nextValue);\n    } catch (err) {\n      return this.setState({ error: true });\n    }\n  };\n\n  setSize = () => this.codeMirror.setSize('100%', 'auto');\n\n  getContentAtLine = line => this.codeMirror.getLine(line);\n\n  getEditorOption = opt => this.codeMirror.getOption(opt);\n\n  getValue = () => this.codeMirror.getValue();\n\n  markSelection = ({ message }) => {\n    let line = parseInt(message.split(':')[0].split('line ')[1], 10) - 1;\n    let content = this.getContentAtLine(line);\n\n    if (content === '{') {\n      line += 1;\n      content = this.getContentAtLine(line);\n    }\n    const chEnd = content.length;\n    const chStart = chEnd - trimStart(content, ' ').length;\n    const markedText = this.codeMirror.markText(\n      { line, ch: chStart },\n      { line, ch: chEnd },\n      { className: 'colored' }\n    );\n    this.setState({ markedText });\n  };\n\n  handleBlur = ({ target }) => {\n    const { name, onBlur } = this.props;\n\n    if (target === undefined) {\n      // codemirror catches multiple events\n      onBlur({\n        target: {\n          name,\n          type: 'json',\n          value: this.getValue(),\n        },\n      });\n    }\n  };\n\n  handleChange = (doc, change) => {\n    if (change.origin === 'setValue') {\n      return;\n    }\n\n    const { name, onChange } = this.props;\n    let value = doc.getValue();\n\n    if (value === '') {\n      value = null;\n    }\n\n    // Update the parent\n    onChange({\n      target: {\n        name,\n        value,\n        type: 'json',\n      },\n    });\n\n    // Remove higlight error\n    if (this.state.markedText) {\n      this.state.markedText.clear();\n      this.setState({ markedText: null, error: null });\n    }\n\n    clearTimeout(this.timer);\n    this.timer = setTimeout(() => this.testJSON(doc.getValue()), WAIT);\n  };\n\n  testJSON = value => {\n    try {\n      jsonlint.parse(value);\n    } catch (err) {\n      this.markSelection(err);\n    }\n  };\n\n  render() {\n    if (this.state.error) {\n      return <div>error json</div>;\n    }\n\n    return (\n      <Wrapper disabled={this.props.disabled}>\n        <textarea ref={this.editor} autoComplete=\"off\" id={this.props.name} defaultValue=\"\" />\n      </Wrapper>\n    );\n  }\n}\n\nInputJSON.defaultProps = {\n  disabled: false,\n  onBlur: () => {},\n  onChange: () => {},\n  value: null,\n};\n\nInputJSON.propTypes = {\n  disabled: PropTypes.bool,\n  name: PropTypes.string.isRequired,\n  onBlur: PropTypes.func,\n  onChange: PropTypes.func,\n  value: PropTypes.any,\n};\n\nexport default InputJSON;\n"]},"metadata":{},"sourceType":"script"}