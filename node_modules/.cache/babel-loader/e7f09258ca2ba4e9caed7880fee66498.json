{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _reactDnd = require(\"react-dnd\");\n\nvar _LayoutDndProvider = _interopRequireDefault(require(\"../../containers/LayoutDndProvider\"));\n\nvar _ItemTypes = _interopRequireDefault(require(\"../../utils/ItemTypes\"));\n\nvar _Banner = _interopRequireDefault(require(\"../RepeatableComponent/Banner\"));\n\nvar _Relation = _interopRequireDefault(require(\"../SelectMany/Relation\"));\n\nvar _components = require(\"../SelectMany/components\");\n\nvar _DraggedField = _interopRequireDefault(require(\"../DraggedField\"));\n\nvar layerStyles = {\n  position: 'fixed',\n  pointerEvents: 'none',\n  zIndex: 100,\n  left: 0,\n  top: 0,\n  width: '100%',\n  height: '100%'\n};\n\nfunction getItemStyles(initialOffset, currentOffset, mouseOffset) {\n  if (!initialOffset || !currentOffset) {\n    return {\n      display: 'none'\n    };\n  }\n\n  var x = mouseOffset.x,\n      y = mouseOffset.y; // TODO adjust\n\n  var transform = \"translate(\".concat(x, \"px, \").concat(y, \"px)\");\n  return {\n    transform: transform,\n    WebkitTransform: transform\n  };\n}\n\nvar CustomDragLayer = function CustomDragLayer() {\n  var _useDragLayer = (0, _reactDnd.useDragLayer)(function (monitor) {\n    return {\n      item: monitor.getItem(),\n      itemType: monitor.getItemType(),\n      initialOffset: monitor.getInitialSourceClientOffset(),\n      currentOffset: monitor.getSourceClientOffset(),\n      isDragging: monitor.isDragging(),\n      mouseOffset: monitor.getClientOffset()\n    };\n  }),\n      itemType = _useDragLayer.itemType,\n      isDragging = _useDragLayer.isDragging,\n      item = _useDragLayer.item,\n      initialOffset = _useDragLayer.initialOffset,\n      currentOffset = _useDragLayer.currentOffset,\n      mouseOffset = _useDragLayer.mouseOffset;\n\n  function renderItem() {\n    switch (itemType) {\n      case _ItemTypes[\"default\"].FIELD:\n        return /*#__PURE__*/_react[\"default\"].createElement(_DraggedField[\"default\"], {\n          name: item.id,\n          selectedItem: item.name\n        });\n\n      case _ItemTypes[\"default\"].COMPONENT:\n        return /*#__PURE__*/_react[\"default\"].createElement(_Banner[\"default\"], (0, _extends2[\"default\"])({}, item, {\n          isOpen: true,\n          isReadOnly: false,\n          style: {\n            width: '40vw',\n            border: '1px solid #AED4FB',\n            borderRadius: 2\n          }\n        }));\n\n      case _ItemTypes[\"default\"].RELATION:\n        return /*#__PURE__*/_react[\"default\"].createElement(_components.Li, null, /*#__PURE__*/_react[\"default\"].createElement(_Relation[\"default\"], {\n          data: item.data,\n          displayNavigationLink: false,\n          mainField: item.mainField,\n          isDisabled: false,\n          isDragging: true,\n          hasDraftAndPublish: item.hasDraftAndPublish\n        }));\n\n      case _ItemTypes[\"default\"].EDIT_FIELD:\n      case _ItemTypes[\"default\"].EDIT_RELATION:\n        return /*#__PURE__*/_react[\"default\"].createElement(_DraggedField[\"default\"], {\n          name: item.name,\n          size: 12,\n          selectedItem: item.name\n        });\n\n      default:\n        return null;\n    }\n  }\n\n  if (!isDragging) {\n    return null;\n  }\n\n  return /*#__PURE__*/_react[\"default\"].createElement(_LayoutDndProvider[\"default\"], null, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    style: layerStyles\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    style: getItemStyles(initialOffset, currentOffset, mouseOffset),\n    className: \"col-md-2\"\n  }, renderItem())));\n};\n\nvar _default = CustomDragLayer;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["/Users/joaovictorlobao/prefeituramaragogistrapi/.cache/plugins/strapi-plugin-content-manager/admin/src/components/DragLayer/index.js"],"names":["layerStyles","position","pointerEvents","zIndex","left","top","width","height","getItemStyles","initialOffset","currentOffset","mouseOffset","display","x","y","transform","WebkitTransform","CustomDragLayer","monitor","item","getItem","itemType","getItemType","getInitialSourceClientOffset","getSourceClientOffset","isDragging","getClientOffset","renderItem","ItemTypes","FIELD","id","name","COMPONENT","border","borderRadius","RELATION","data","mainField","hasDraftAndPublish","EDIT_FIELD","EDIT_RELATION"],"mappings":";;;;;;;;;;;AAAA;;AACA;;AACA;;AAEA;;AAEA;;AACA;;AACA;;AACA;;AAEA,IAAMA,WAAW,GAAG;AAClBC,EAAAA,QAAQ,EAAE,OADQ;AAElBC,EAAAA,aAAa,EAAE,MAFG;AAGlBC,EAAAA,MAAM,EAAE,GAHU;AAIlBC,EAAAA,IAAI,EAAE,CAJY;AAKlBC,EAAAA,GAAG,EAAE,CALa;AAMlBC,EAAAA,KAAK,EAAE,MANW;AAOlBC,EAAAA,MAAM,EAAE;AAPU,CAApB;;AAUA,SAASC,aAAT,CAAuBC,aAAvB,EAAsCC,aAAtC,EAAqDC,WAArD,EAAkE;AAChE,MAAI,CAACF,aAAD,IAAkB,CAACC,aAAvB,EAAsC;AACpC,WAAO;AAAEE,MAAAA,OAAO,EAAE;AAAX,KAAP;AACD;;AAED,MAAQC,CAAR,GAAiBF,WAAjB,CAAQE,CAAR;AAAA,MAAWC,CAAX,GAAiBH,WAAjB,CAAWG,CAAX,CALgE,CAMhE;;AACA,MAAMC,SAAS,uBAAgBF,CAAhB,iBAAwBC,CAAxB,QAAf;AAEA,SAAO;AACLC,IAAAA,SAAS,EAATA,SADK;AAELC,IAAAA,eAAe,EAAED;AAFZ,GAAP;AAID;;AAED,IAAME,eAAe,GAAG,SAAlBA,eAAkB,GAAM;AAC5B,sBAAkF,4BAChF,UAAAC,OAAO;AAAA,WAAK;AACVC,MAAAA,IAAI,EAAED,OAAO,CAACE,OAAR,EADI;AAEVC,MAAAA,QAAQ,EAAEH,OAAO,CAACI,WAAR,EAFA;AAGVb,MAAAA,aAAa,EAAES,OAAO,CAACK,4BAAR,EAHL;AAIVb,MAAAA,aAAa,EAAEQ,OAAO,CAACM,qBAAR,EAJL;AAKVC,MAAAA,UAAU,EAAEP,OAAO,CAACO,UAAR,EALF;AAMVd,MAAAA,WAAW,EAAEO,OAAO,CAACQ,eAAR;AANH,KAAL;AAAA,GADyE,CAAlF;AAAA,MAAQL,QAAR,iBAAQA,QAAR;AAAA,MAAkBI,UAAlB,iBAAkBA,UAAlB;AAAA,MAA8BN,IAA9B,iBAA8BA,IAA9B;AAAA,MAAoCV,aAApC,iBAAoCA,aAApC;AAAA,MAAmDC,aAAnD,iBAAmDA,aAAnD;AAAA,MAAkEC,WAAlE,iBAAkEA,WAAlE;;AAWA,WAASgB,UAAT,GAAsB;AACpB,YAAQN,QAAR;AACE,WAAKO,sBAAUC,KAAf;AACE,4BAAO,gCAAC,wBAAD;AAAc,UAAA,IAAI,EAAEV,IAAI,CAACW,EAAzB;AAA6B,UAAA,YAAY,EAAEX,IAAI,CAACY;AAAhD,UAAP;;AACF,WAAKH,sBAAUI,SAAf;AACE,4BACE,gCAAC,kBAAD,gCACMb,IADN;AAEE,UAAA,MAAM,MAFR;AAGE,UAAA,UAAU,EAAE,KAHd;AAIE,UAAA,KAAK,EAAE;AACLb,YAAAA,KAAK,EAAE,MADF;AAEL2B,YAAAA,MAAM,EAAE,mBAFH;AAGLC,YAAAA,YAAY,EAAE;AAHT;AAJT,WADF;;AAYF,WAAKN,sBAAUO,QAAf;AACE,4BACE,gCAAC,cAAD,qBACE,gCAAC,oBAAD;AACE,UAAA,IAAI,EAAEhB,IAAI,CAACiB,IADb;AAEE,UAAA,qBAAqB,EAAE,KAFzB;AAGE,UAAA,SAAS,EAAEjB,IAAI,CAACkB,SAHlB;AAIE,UAAA,UAAU,EAAE,KAJd;AAKE,UAAA,UAAU,MALZ;AAME,UAAA,kBAAkB,EAAElB,IAAI,CAACmB;AAN3B,UADF,CADF;;AAYF,WAAKV,sBAAUW,UAAf;AACA,WAAKX,sBAAUY,aAAf;AACE,4BAAO,gCAAC,wBAAD;AAAc,UAAA,IAAI,EAAErB,IAAI,CAACY,IAAzB;AAA+B,UAAA,IAAI,EAAE,EAArC;AAAyC,UAAA,YAAY,EAAEZ,IAAI,CAACY;AAA5D,UAAP;;AACF;AACE,eAAO,IAAP;AAjCJ;AAmCD;;AAED,MAAI,CAACN,UAAL,EAAiB;AACf,WAAO,IAAP;AACD;;AAED,sBACE,gCAAC,6BAAD,qBACE;AAAK,IAAA,KAAK,EAAEzB;AAAZ,kBACE;AAAK,IAAA,KAAK,EAAEQ,aAAa,CAACC,aAAD,EAAgBC,aAAhB,EAA+BC,WAA/B,CAAzB;AAAsE,IAAA,SAAS,EAAC;AAAhF,KACGgB,UAAU,EADb,CADF,CADF,CADF;AASD,CA/DD;;eAiEeV,e","sourcesContent":["import React from 'react';\nimport { useDragLayer } from 'react-dnd';\nimport LayoutDndProvider from '../../containers/LayoutDndProvider';\n\nimport ItemTypes from '../../utils/ItemTypes';\n\nimport ComponentBanner from '../RepeatableComponent/Banner';\nimport RelationItem from '../SelectMany/Relation';\nimport { Li } from '../SelectMany/components';\nimport DraggedField from '../DraggedField';\n\nconst layerStyles = {\n  position: 'fixed',\n  pointerEvents: 'none',\n  zIndex: 100,\n  left: 0,\n  top: 0,\n  width: '100%',\n  height: '100%',\n};\n\nfunction getItemStyles(initialOffset, currentOffset, mouseOffset) {\n  if (!initialOffset || !currentOffset) {\n    return { display: 'none' };\n  }\n\n  const { x, y } = mouseOffset;\n  // TODO adjust\n  const transform = `translate(${x}px, ${y}px)`;\n\n  return {\n    transform,\n    WebkitTransform: transform,\n  };\n}\n\nconst CustomDragLayer = () => {\n  const { itemType, isDragging, item, initialOffset, currentOffset, mouseOffset } = useDragLayer(\n    monitor => ({\n      item: monitor.getItem(),\n      itemType: monitor.getItemType(),\n      initialOffset: monitor.getInitialSourceClientOffset(),\n      currentOffset: monitor.getSourceClientOffset(),\n      isDragging: monitor.isDragging(),\n      mouseOffset: monitor.getClientOffset(),\n    })\n  );\n\n  function renderItem() {\n    switch (itemType) {\n      case ItemTypes.FIELD:\n        return <DraggedField name={item.id} selectedItem={item.name} />;\n      case ItemTypes.COMPONENT:\n        return (\n          <ComponentBanner\n            {...item}\n            isOpen\n            isReadOnly={false}\n            style={{\n              width: '40vw',\n              border: '1px solid #AED4FB',\n              borderRadius: 2,\n            }}\n          />\n        );\n      case ItemTypes.RELATION:\n        return (\n          <Li>\n            <RelationItem\n              data={item.data}\n              displayNavigationLink={false}\n              mainField={item.mainField}\n              isDisabled={false}\n              isDragging\n              hasDraftAndPublish={item.hasDraftAndPublish}\n            />\n          </Li>\n        );\n      case ItemTypes.EDIT_FIELD:\n      case ItemTypes.EDIT_RELATION:\n        return <DraggedField name={item.name} size={12} selectedItem={item.name} />;\n      default:\n        return null;\n    }\n  }\n\n  if (!isDragging) {\n    return null;\n  }\n\n  return (\n    <LayoutDndProvider>\n      <div style={layerStyles}>\n        <div style={getItemStyles(initialOffset, currentOffset, mouseOffset)} className=\"col-md-2\">\n          {renderItem()}\n        </div>\n      </div>\n    </LayoutDndProvider>\n  );\n};\n\nexport default CustomDragLayer;\n"]},"metadata":{},"sourceType":"script"}