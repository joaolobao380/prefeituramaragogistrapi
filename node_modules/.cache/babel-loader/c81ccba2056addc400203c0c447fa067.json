{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _typeof = require(\"@babel/runtime/helpers/typeof\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _hooks = require(\"@buffetjs/hooks\");\n\nvar _core = require(\"@buffetjs/core\");\n\nvar _strapiHelperPlugin = require(\"strapi-helper-plugin\");\n\nvar _hooks2 = require(\"../../../hooks\");\n\nvar _utils = require(\"../../../utils\");\n\nvar _ControlsWrapper = _interopRequireDefault(require(\"../../../components/ControlsWrapper\"));\n\nvar _Filters = _interopRequireDefault(require(\"../../../components/Filters\"));\n\nvar _SelectAll = _interopRequireDefault(require(\"../../../components/SelectAll\"));\n\nvar _SortPicker = _interopRequireDefault(require(\"../../../components/SortPicker\"));\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { \"default\": obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj[\"default\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nvar HomePageSettings = function HomePageSettings(_ref) {\n  var areAllCheckboxesSelected = _ref.areAllCheckboxesSelected,\n      filters = _ref.filters,\n      hasSomeCheckboxSelected = _ref.hasSomeCheckboxSelected,\n      isLoading = _ref.isLoading,\n      onChange = _ref.onChange,\n      onFilterDelete = _ref.onFilterDelete,\n      onSelectAll = _ref.onSelectAll;\n\n  var _useAppContext = (0, _hooks2.useAppContext)(),\n      canUpdate = _useAppContext.allowedActions.canUpdate;\n\n  var _useGlobalContext = (0, _strapiHelperPlugin.useGlobalContext)(),\n      formatMessage = _useGlobalContext.formatMessage,\n      plugins = _useGlobalContext.plugins;\n\n  var _getFileModelTimestam = (0, _utils.getFileModelTimestamps)(plugins),\n      _getFileModelTimestam2 = (0, _slicedToArray2[\"default\"])(_getFileModelTimestam, 2),\n      updated_at = _getFileModelTimestam2[1];\n\n  var query = (0, _strapiHelperPlugin.useQuery)();\n\n  var _useState = (0, _react.useState)(query.get('_q') || ''),\n      _useState2 = (0, _slicedToArray2[\"default\"])(_useState, 2),\n      searchValue = _useState2[0],\n      setSearchValue = _useState2[1];\n\n  var debouncedSearch = (0, _hooks.useDebounce)(searchValue, 300);\n  var pluginName = formatMessage({\n    id: (0, _utils.getTrad)('plugin.name')\n  });\n  (0, _react.useEffect)(function () {\n    onChange({\n      target: {\n        name: '_q',\n        value: debouncedSearch\n      }\n    }); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [debouncedSearch]);\n\n  var handleChangeSearchValue = function handleChangeSearchValue(_ref2) {\n    var value = _ref2.target.value;\n    setSearchValue(value);\n  };\n\n  var handleClearSearch = function handleClearSearch() {\n    setSearchValue('');\n  };\n\n  return /*#__PURE__*/_react[\"default\"].createElement(_react[\"default\"].Fragment, null, /*#__PURE__*/_react[\"default\"].createElement(_strapiHelperPlugin.HeaderSearch, {\n    label: pluginName,\n    onChange: handleChangeSearchValue,\n    onClear: handleClearSearch,\n    placeholder: formatMessage({\n      id: (0, _utils.getTrad)('search.placeholder')\n    }),\n    name: \"_q\",\n    value: searchValue,\n    autoFocus: true\n  }), isLoading ? /*#__PURE__*/_react[\"default\"].createElement(_react[\"default\"].Fragment, null, /*#__PURE__*/_react[\"default\"].createElement(_core.Padded, {\n    top: true,\n    bottom: true,\n    size: \"lg\"\n  }), /*#__PURE__*/_react[\"default\"].createElement(_strapiHelperPlugin.LoadingIndicator, null)) : /*#__PURE__*/_react[\"default\"].createElement(_ControlsWrapper[\"default\"], null, canUpdate && /*#__PURE__*/_react[\"default\"].createElement(_react[\"default\"].Fragment, null, /*#__PURE__*/_react[\"default\"].createElement(_SelectAll[\"default\"], {\n    onChange: onSelectAll,\n    checked: areAllCheckboxesSelected,\n    someChecked: hasSomeCheckboxSelected && !areAllCheckboxesSelected\n  }), /*#__PURE__*/_react[\"default\"].createElement(_core.Padded, {\n    right: true\n  })), /*#__PURE__*/_react[\"default\"].createElement(_SortPicker[\"default\"], {\n    onChange: onChange,\n    value: query.get('_sort') || \"\".concat(updated_at, \":DESC\")\n  }), /*#__PURE__*/_react[\"default\"].createElement(_core.Padded, {\n    right: true\n  }), /*#__PURE__*/_react[\"default\"].createElement(_Filters[\"default\"], {\n    onChange: onChange,\n    filters: filters,\n    onClick: onFilterDelete\n  })));\n};\n\nHomePageSettings.defaultProps = {\n  areAllCheckboxesSelected: false,\n  filters: [],\n  hasSomeCheckboxSelected: false,\n  onChange: function onChange() {},\n  onFilterDelete: function onFilterDelete() {},\n  onSelectAll: function onSelectAll() {}\n};\nHomePageSettings.propTypes = {\n  areAllCheckboxesSelected: _propTypes[\"default\"].bool,\n  filters: _propTypes[\"default\"].array,\n  hasSomeCheckboxSelected: _propTypes[\"default\"].bool,\n  isLoading: _propTypes[\"default\"].bool.isRequired,\n  onChange: _propTypes[\"default\"].func,\n  onFilterDelete: _propTypes[\"default\"].func,\n  onSelectAll: _propTypes[\"default\"].func\n};\nvar _default = HomePageSettings;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["/Users/joaovictorlobao/prefeituramaragogistrapi/.cache/plugins/strapi-plugin-upload/admin/src/containers/HomePage/HomePageContent/HomePageSettings.js"],"names":["HomePageSettings","areAllCheckboxesSelected","filters","hasSomeCheckboxSelected","isLoading","onChange","onFilterDelete","onSelectAll","canUpdate","allowedActions","formatMessage","plugins","updated_at","query","get","searchValue","setSearchValue","debouncedSearch","pluginName","id","target","name","value","handleChangeSearchValue","handleClearSearch","defaultProps","propTypes","PropTypes","bool","array","isRequired","func"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { useDebounce } from '@buffetjs/hooks';\nimport { Padded } from '@buffetjs/core';\nimport { HeaderSearch, useGlobalContext, useQuery, LoadingIndicator } from 'strapi-helper-plugin';\n\nimport { useAppContext } from '../../../hooks';\nimport { getTrad, getFileModelTimestamps } from '../../../utils';\nimport ControlsWrapper from '../../../components/ControlsWrapper';\nimport Filters from '../../../components/Filters';\nimport SelectAll from '../../../components/SelectAll';\nimport SortPicker from '../../../components/SortPicker';\n\nconst HomePageSettings = ({\n  areAllCheckboxesSelected,\n  filters,\n  hasSomeCheckboxSelected,\n  isLoading,\n  onChange,\n  onFilterDelete,\n  onSelectAll,\n}) => {\n  const {\n    allowedActions: { canUpdate },\n  } = useAppContext();\n  const { formatMessage, plugins } = useGlobalContext();\n  const [, updated_at] = getFileModelTimestamps(plugins);\n  const query = useQuery();\n  const [searchValue, setSearchValue] = useState(query.get('_q') || '');\n  const debouncedSearch = useDebounce(searchValue, 300);\n  const pluginName = formatMessage({ id: getTrad('plugin.name') });\n\n  useEffect(() => {\n    onChange({ target: { name: '_q', value: debouncedSearch } });\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [debouncedSearch]);\n\n  const handleChangeSearchValue = ({ target: { value } }) => {\n    setSearchValue(value);\n  };\n\n  const handleClearSearch = () => {\n    setSearchValue('');\n  };\n\n  return (\n    <>\n      <HeaderSearch\n        label={pluginName}\n        onChange={handleChangeSearchValue}\n        onClear={handleClearSearch}\n        placeholder={formatMessage({ id: getTrad('search.placeholder') })}\n        name=\"_q\"\n        value={searchValue}\n        autoFocus\n      />\n      {isLoading ? (\n        <>\n          <Padded top bottom size=\"lg\" />\n          <LoadingIndicator />\n        </>\n      ) : (\n        <ControlsWrapper>\n          {canUpdate && (\n            <>\n              <SelectAll\n                onChange={onSelectAll}\n                checked={areAllCheckboxesSelected}\n                someChecked={hasSomeCheckboxSelected && !areAllCheckboxesSelected}\n              />\n              <Padded right />\n            </>\n          )}\n          <SortPicker onChange={onChange} value={query.get('_sort') || `${updated_at}:DESC`} />\n          <Padded right />\n          <Filters onChange={onChange} filters={filters} onClick={onFilterDelete} />\n        </ControlsWrapper>\n      )}\n    </>\n  );\n};\n\nHomePageSettings.defaultProps = {\n  areAllCheckboxesSelected: false,\n  filters: [],\n  hasSomeCheckboxSelected: false,\n  onChange: () => {},\n  onFilterDelete: () => {},\n  onSelectAll: () => {},\n};\n\nHomePageSettings.propTypes = {\n  areAllCheckboxesSelected: PropTypes.bool,\n  filters: PropTypes.array,\n  hasSomeCheckboxSelected: PropTypes.bool,\n  isLoading: PropTypes.bool.isRequired,\n  onChange: PropTypes.func,\n  onFilterDelete: PropTypes.func,\n  onSelectAll: PropTypes.func,\n};\n\nexport default HomePageSettings;\n"]},"metadata":{},"sourceType":"script"}