{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _typeof = require(\"@babel/runtime/helpers/typeof\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _lodash = require(\"lodash\");\n\nvar _reactRouterDom = require(\"react-router-dom\");\n\nvar _strapiHelperPlugin = require(\"strapi-helper-plugin\");\n\nvar _core = require(\"@buffetjs/core\");\n\nvar _pluginId = _interopRequireDefault(require(\"../../pluginId\"));\n\nvar _getTrad = _interopRequireDefault(require(\"../../utils/getTrad\"));\n\nvar _CustomLink = _interopRequireDefault(require(\"../../components/CustomLink\"));\n\nvar _useDataManager2 = _interopRequireDefault(require(\"../../hooks/useDataManager\"));\n\nvar _makeSearch = _interopRequireDefault(require(\"../../utils/makeSearch\"));\n\nvar _Wrapper = _interopRequireDefault(require(\"./Wrapper\"));\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { \"default\": obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj[\"default\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2[\"default\"])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n/* eslint-disable indent */\nvar displayNotificationCTNotSaved = function displayNotificationCTNotSaved() {\n  strapi.notification.toggle({\n    type: 'info',\n    message: {\n      id: \"\".concat(_pluginId[\"default\"], \".notification.info.creating.notSaved\")\n    }\n  });\n};\n\nfunction LeftMenu(_ref) {\n  var wait = _ref.wait;\n\n  var _useDataManager = (0, _useDataManager2[\"default\"])(),\n      components = _useDataManager.components,\n      componentsGroupedByCategory = _useDataManager.componentsGroupedByCategory,\n      contentTypes = _useDataManager.contentTypes,\n      isInDevelopmentMode = _useDataManager.isInDevelopmentMode,\n      sortedContentTypesList = _useDataManager.sortedContentTypesList;\n\n  var _useGlobalContext = (0, _strapiHelperPlugin.useGlobalContext)(),\n      emitEvent = _useGlobalContext.emitEvent,\n      formatMessage = _useGlobalContext.formatMessage;\n\n  var _useHistory = (0, _reactRouterDom.useHistory)(),\n      push = _useHistory.push;\n\n  var componentsData = (0, _lodash.sortBy)(Object.keys(componentsGroupedByCategory).map(function (category) {\n    return {\n      name: category,\n      title: category,\n      isEditable: isInDevelopmentMode,\n      onClickEdit: function onClickEdit(e, data) {\n        e.stopPropagation();\n        var search = (0, _makeSearch[\"default\"])({\n          actionType: 'edit',\n          modalType: 'editCategory',\n          categoryName: data.name,\n          header_label_1: formatMessage({\n            id: (0, _getTrad[\"default\"])('modalForm.header.categories')\n          }),\n          header_icon_name_1: 'component',\n          header_icon_isCustom_1: false,\n          header_info_category_1: null,\n          header_info_name_1: null,\n          header_label_2: data.name,\n          header_icon_name_2: null,\n          header_icon_isCustom_2: false,\n          header_info_category_2: null,\n          header_info_name_2: null,\n          settingType: 'base'\n        });\n        push({\n          search: search\n        });\n      },\n      links: (0, _lodash.sortBy)(componentsGroupedByCategory[category].map(function (compo) {\n        return {\n          name: compo.uid,\n          to: \"/plugins/\".concat(_pluginId[\"default\"], \"/component-categories/\").concat(category, \"/\").concat(compo.uid),\n          title: compo.schema.name\n        };\n      }), function (obj) {\n        return obj.title;\n      })\n    };\n  }), function (obj) {\n    return obj.title;\n  });\n\n  var canOpenModalCreateCTorComponent = function canOpenModalCreateCTorComponent() {\n    return !Object.keys(contentTypes).some(function (ct) {\n      return contentTypes[ct].isTemporary === true;\n    }) && !Object.keys(components).some(function (component) {\n      return components[component].isTemporary === true;\n    });\n  };\n\n  var handleClickOpenModal = /*#__PURE__*/function () {\n    var _ref2 = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee(modalType) {\n      var kind,\n          type,\n          search,\n          _args = arguments;\n      return _regenerator[\"default\"].wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              kind = _args.length > 1 && _args[1] !== undefined ? _args[1] : '';\n              type = kind === 'singleType' ? kind : modalType;\n\n              if (!canOpenModalCreateCTorComponent()) {\n                _context.next = 10;\n                break;\n              }\n\n              emitEvent(\"willCreate\".concat((0, _lodash.upperFirst)((0, _lodash.camelCase)(type))));\n              _context.next = 6;\n              return wait();\n\n            case 6:\n              search = (0, _makeSearch[\"default\"])({\n                modalType: modalType,\n                kind: kind,\n                actionType: 'create',\n                settingType: 'base',\n                forTarget: modalType,\n                headerId: (0, _getTrad[\"default\"])(\"modalForm.\".concat(type, \".header-create\")),\n                header_icon_isCustom_1: 'false',\n                header_icon_name_1: type,\n                header_label_1: 'null'\n              });\n              push({\n                search: search\n              });\n              _context.next = 11;\n              break;\n\n            case 10:\n              displayNotificationCTNotSaved();\n\n            case 11:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handleClickOpenModal(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var displayedContentTypes = (0, _react.useMemo)(function () {\n    return sortedContentTypesList.filter(function (obj) {\n      return obj.visible;\n    }).map(function (obj) {\n      if (obj.plugin) {\n        return _objectSpread(_objectSpread({}, obj), {}, {\n          CustomComponent: function CustomComponent() {\n            return /*#__PURE__*/_react[\"default\"].createElement(\"p\", {\n              style: {\n                justifyContent: 'normal'\n              }\n            }, obj.title, \"\\xA0\", /*#__PURE__*/_react[\"default\"].createElement(_core.Text, {\n              as: \"span\",\n              ellipsis: true // This is needed here\n              ,\n              style: {\n                fontStyle: 'italic'\n              },\n              fontWeight: \"inherit\",\n              lineHeight: \"inherit\"\n            }, \"(\", formatMessage({\n              id: (0, _getTrad[\"default\"])('from')\n            }), \": \", obj.plugin, \")\\xA0\"));\n          }\n        });\n      }\n\n      return obj;\n    });\n  }, [sortedContentTypesList, formatMessage]);\n  var data = [{\n    name: 'models',\n    title: {\n      id: \"\".concat(_pluginId[\"default\"], \".menu.section.models.name.\")\n    },\n    searchable: true,\n    customLink: isInDevelopmentMode ? {\n      Component: _CustomLink[\"default\"],\n      componentProps: {\n        id: \"\".concat(_pluginId[\"default\"], \".button.model.create\"),\n        onClick: function onClick() {\n          handleClickOpenModal('contentType', 'collectionType');\n        }\n      }\n    } : null,\n    links: displayedContentTypes.filter(function (contentType) {\n      return contentType.kind === 'collectionType';\n    })\n  }, {\n    name: 'singleTypes',\n    title: {\n      id: \"\".concat(_pluginId[\"default\"], \".menu.section.single-types.name.\")\n    },\n    searchable: true,\n    customLink: isInDevelopmentMode ? {\n      Component: _CustomLink[\"default\"],\n      componentProps: {\n        id: \"\".concat(_pluginId[\"default\"], \".button.single-types.create\"),\n        onClick: function onClick() {\n          handleClickOpenModal('contentType', 'singleType');\n        }\n      }\n    } : null,\n    links: displayedContentTypes.filter(function (singleType) {\n      return singleType.kind === 'singleType';\n    })\n  }, {\n    name: 'components',\n    title: {\n      id: \"\".concat(_pluginId[\"default\"], \".menu.section.components.name.\")\n    },\n    searchable: true,\n    customLink: isInDevelopmentMode ? {\n      Component: _CustomLink[\"default\"],\n      componentProps: {\n        id: \"\".concat(_pluginId[\"default\"], \".button.component.create\"),\n        onClick: function onClick() {\n          handleClickOpenModal('component');\n        }\n      }\n    } : null,\n    links: componentsData\n  }];\n  return /*#__PURE__*/_react[\"default\"].createElement(_Wrapper[\"default\"], {\n    className: \"col-md-3\"\n  }, data.map(function (list) {\n    return /*#__PURE__*/_react[\"default\"].createElement(_strapiHelperPlugin.LeftMenuList, (0, _extends2[\"default\"])({}, list, {\n      key: list.name\n    }));\n  }));\n}\n\nLeftMenu.defaultProps = {\n  wait: function wait() {}\n};\nLeftMenu.propTypes = {\n  wait: _propTypes[\"default\"].func\n};\nvar _default = LeftMenu;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["/Users/joaovictorlobao/prefeituramaragogistrapi/.cache/plugins/strapi-plugin-content-type-builder/admin/src/containers/LeftMenu/index.js"],"names":["displayNotificationCTNotSaved","strapi","notification","toggle","type","message","id","pluginId","LeftMenu","wait","components","componentsGroupedByCategory","contentTypes","isInDevelopmentMode","sortedContentTypesList","emitEvent","formatMessage","push","componentsData","Object","keys","map","category","name","title","isEditable","onClickEdit","e","data","stopPropagation","search","actionType","modalType","categoryName","header_label_1","header_icon_name_1","header_icon_isCustom_1","header_info_category_1","header_info_name_1","header_label_2","header_icon_name_2","header_icon_isCustom_2","header_info_category_2","header_info_name_2","settingType","links","compo","uid","to","schema","obj","canOpenModalCreateCTorComponent","some","ct","isTemporary","component","handleClickOpenModal","kind","forTarget","headerId","displayedContentTypes","filter","visible","plugin","CustomComponent","justifyContent","fontStyle","searchable","customLink","Component","CustomLink","componentProps","onClick","contentType","singleType","list","defaultProps","propTypes","PropTypes","func"],"mappings":";;;;;;;;;;;;;;;;;;;AAMA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;;;;;;;AAEA;AAEA,IAAMA,6BAA6B,GAAG,SAAhCA,6BAAgC,GAAM;AAC1CC,EAAAA,MAAM,CAACC,YAAP,CAAoBC,MAApB,CAA2B;AACzBC,IAAAA,IAAI,EAAE,MADmB;AAEzBC,IAAAA,OAAO,EAAE;AAAEC,MAAAA,EAAE,YAAKC,oBAAL;AAAJ;AAFgB,GAA3B;AAID,CALD;;AAOA,SAASC,QAAT,OAA4B;AAAA,MAARC,IAAQ,QAARA,IAAQ;;AAC1B,wBAMI,kCANJ;AAAA,MACEC,UADF,mBACEA,UADF;AAAA,MAEEC,2BAFF,mBAEEA,2BAFF;AAAA,MAGEC,YAHF,mBAGEA,YAHF;AAAA,MAIEC,mBAJF,mBAIEA,mBAJF;AAAA,MAKEC,sBALF,mBAKEA,sBALF;;AAOA,0BAAqC,2CAArC;AAAA,MAAQC,SAAR,qBAAQA,SAAR;AAAA,MAAmBC,aAAnB,qBAAmBA,aAAnB;;AACA,oBAAiB,iCAAjB;AAAA,MAAQC,IAAR,eAAQA,IAAR;;AACA,MAAMC,cAAc,GAAG,oBACrBC,MAAM,CAACC,IAAP,CAAYT,2BAAZ,EAAyCU,GAAzC,CAA6C,UAAAC,QAAQ;AAAA,WAAK;AACxDC,MAAAA,IAAI,EAAED,QADkD;AAExDE,MAAAA,KAAK,EAAEF,QAFiD;AAGxDG,MAAAA,UAAU,EAAEZ,mBAH4C;AAIxDa,MAAAA,WAAW,EAAE,qBAACC,CAAD,EAAIC,IAAJ,EAAa;AACxBD,QAAAA,CAAC,CAACE,eAAF;AAEA,YAAMC,MAAM,GAAG,4BAAW;AACxBC,UAAAA,UAAU,EAAE,MADY;AAExBC,UAAAA,SAAS,EAAE,cAFa;AAGxBC,UAAAA,YAAY,EAAEL,IAAI,CAACL,IAHK;AAIxBW,UAAAA,cAAc,EAAElB,aAAa,CAAC;AAC5BV,YAAAA,EAAE,EAAE,yBAAQ,6BAAR;AADwB,WAAD,CAJL;AAOxB6B,UAAAA,kBAAkB,EAAE,WAPI;AAQxBC,UAAAA,sBAAsB,EAAE,KARA;AASxBC,UAAAA,sBAAsB,EAAE,IATA;AAUxBC,UAAAA,kBAAkB,EAAE,IAVI;AAWxBC,UAAAA,cAAc,EAAEX,IAAI,CAACL,IAXG;AAYxBiB,UAAAA,kBAAkB,EAAE,IAZI;AAaxBC,UAAAA,sBAAsB,EAAE,KAbA;AAcxBC,UAAAA,sBAAsB,EAAE,IAdA;AAexBC,UAAAA,kBAAkB,EAAE,IAfI;AAiBxBC,UAAAA,WAAW,EAAE;AAjBW,SAAX,CAAf;AAoBA3B,QAAAA,IAAI,CAAC;AAAEa,UAAAA,MAAM,EAANA;AAAF,SAAD,CAAJ;AACD,OA5BuD;AA6BxDe,MAAAA,KAAK,EAAE,oBACLlC,2BAA2B,CAACW,QAAD,CAA3B,CAAsCD,GAAtC,CAA0C,UAAAyB,KAAK;AAAA,eAAK;AAClDvB,UAAAA,IAAI,EAAEuB,KAAK,CAACC,GADsC;AAElDC,UAAAA,EAAE,qBAAczC,oBAAd,mCAA+Ce,QAA/C,cAA2DwB,KAAK,CAACC,GAAjE,CAFgD;AAGlDvB,UAAAA,KAAK,EAAEsB,KAAK,CAACG,MAAN,CAAa1B;AAH8B,SAAL;AAAA,OAA/C,CADK,EAML,UAAA2B,GAAG;AAAA,eAAIA,GAAG,CAAC1B,KAAR;AAAA,OANE;AA7BiD,KAAL;AAAA,GAArD,CADqB,EAuCrB,UAAA0B,GAAG;AAAA,WAAIA,GAAG,CAAC1B,KAAR;AAAA,GAvCkB,CAAvB;;AA0CA,MAAM2B,+BAA+B,GAAG,SAAlCA,+BAAkC,GAAM;AAC5C,WACE,CAAChC,MAAM,CAACC,IAAP,CAAYR,YAAZ,EAA0BwC,IAA1B,CAA+B,UAAAC,EAAE;AAAA,aAAIzC,YAAY,CAACyC,EAAD,CAAZ,CAAiBC,WAAjB,KAAiC,IAArC;AAAA,KAAjC,CAAD,IACA,CAACnC,MAAM,CAACC,IAAP,CAAYV,UAAZ,EAAwB0C,IAAxB,CAA6B,UAAAG,SAAS;AAAA,aAAI7C,UAAU,CAAC6C,SAAD,CAAV,CAAsBD,WAAtB,KAAsC,IAA1C;AAAA,KAAtC,CAFH;AAID,GALD;;AAOA,MAAME,oBAAoB;AAAA,8FAAG,iBAAOxB,SAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkByB,cAAAA,IAAlB,2DAAyB,EAAzB;AACrBrD,cAAAA,IADqB,GACdqD,IAAI,KAAK,YAAT,GAAwBA,IAAxB,GAA+BzB,SADjB;;AAAA,mBAGvBmB,+BAA+B,EAHR;AAAA;AAAA;AAAA;;AAIzBpC,cAAAA,SAAS,qBAAc,wBAAW,uBAAUX,IAAV,CAAX,CAAd,EAAT;AAJyB;AAAA,qBAMnBK,IAAI,EANe;;AAAA;AAOnBqB,cAAAA,MAPmB,GAOV,4BAAW;AACxBE,gBAAAA,SAAS,EAATA,SADwB;AAExByB,gBAAAA,IAAI,EAAJA,IAFwB;AAGxB1B,gBAAAA,UAAU,EAAE,QAHY;AAIxBa,gBAAAA,WAAW,EAAE,MAJW;AAKxBc,gBAAAA,SAAS,EAAE1B,SALa;AAMxB2B,gBAAAA,QAAQ,EAAE,6CAAqBvD,IAArB,oBANc;AAOxBgC,gBAAAA,sBAAsB,EAAE,OAPA;AAQxBD,gBAAAA,kBAAkB,EAAE/B,IARI;AASxB8B,gBAAAA,cAAc,EAAE;AATQ,eAAX,CAPU;AAkBzBjB,cAAAA,IAAI,CAAC;AACHa,gBAAAA,MAAM,EAANA;AADG,eAAD,CAAJ;AAlByB;AAAA;;AAAA;AAsBzB9B,cAAAA,6BAA6B;;AAtBJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAApBwD,oBAAoB;AAAA;AAAA;AAAA,KAA1B;;AA0BA,MAAMI,qBAAqB,GAAG,oBAAQ,YAAM;AAC1C,WAAO9C,sBAAsB,CAC1B+C,MADI,CACG,UAAAX,GAAG;AAAA,aAAIA,GAAG,CAACY,OAAR;AAAA,KADN,EAEJzC,GAFI,CAEA,UAAA6B,GAAG,EAAI;AACV,UAAIA,GAAG,CAACa,MAAR,EAAgB;AACd,+CACKb,GADL;AAEEc,UAAAA,eAAe,EAAE;AAAA,gCACf;AAAG,cAAA,KAAK,EAAE;AAAEC,gBAAAA,cAAc,EAAE;AAAlB;AAAV,eACGf,GAAG,CAAC1B,KADP,uBAEE,gCAAC,UAAD;AACE,cAAA,EAAE,EAAC,MADL;AAEE,cAAA,QAAQ,MAFV,CAGE;AAHF;AAIE,cAAA,KAAK,EAAE;AAAE0C,gBAAAA,SAAS,EAAE;AAAb,eAJT;AAKE,cAAA,UAAU,EAAC,SALb;AAME,cAAA,UAAU,EAAC;AANb,oBAQIlD,aAAa,CAAC;AAAEV,cAAAA,EAAE,EAAE,yBAAQ,MAAR;AAAN,aAAD,CARjB,QAQ8C4C,GAAG,CAACa,MARlD,UAFF,CADe;AAAA;AAFnB;AAkBD;;AAED,aAAOb,GAAP;AACD,KAzBI,CAAP;AA0BD,GA3B6B,EA2B3B,CAACpC,sBAAD,EAAyBE,aAAzB,CA3B2B,CAA9B;AA6BA,MAAMY,IAAI,GAAG,CACX;AACEL,IAAAA,IAAI,EAAE,QADR;AAEEC,IAAAA,KAAK,EAAE;AACLlB,MAAAA,EAAE,YAAKC,oBAAL;AADG,KAFT;AAKE4D,IAAAA,UAAU,EAAE,IALd;AAMEC,IAAAA,UAAU,EAAEvD,mBAAmB,GAC3B;AACEwD,MAAAA,SAAS,EAAEC,sBADb;AAEEC,MAAAA,cAAc,EAAE;AACdjE,QAAAA,EAAE,YAAKC,oBAAL,yBADY;AAEdiE,QAAAA,OAAO,EAAE,mBAAM;AACbhB,UAAAA,oBAAoB,CAAC,aAAD,EAAgB,gBAAhB,CAApB;AACD;AAJa;AAFlB,KAD2B,GAU3B,IAhBN;AAiBEX,IAAAA,KAAK,EAAEe,qBAAqB,CAACC,MAAtB,CAA6B,UAAAY,WAAW;AAAA,aAAIA,WAAW,CAAChB,IAAZ,KAAqB,gBAAzB;AAAA,KAAxC;AAjBT,GADW,EAoBX;AACElC,IAAAA,IAAI,EAAE,aADR;AAEEC,IAAAA,KAAK,EAAE;AACLlB,MAAAA,EAAE,YAAKC,oBAAL;AADG,KAFT;AAKE4D,IAAAA,UAAU,EAAE,IALd;AAMEC,IAAAA,UAAU,EAAEvD,mBAAmB,GAC3B;AACEwD,MAAAA,SAAS,EAAEC,sBADb;AAEEC,MAAAA,cAAc,EAAE;AACdjE,QAAAA,EAAE,YAAKC,oBAAL,gCADY;AAEdiE,QAAAA,OAAO,EAAE,mBAAM;AACbhB,UAAAA,oBAAoB,CAAC,aAAD,EAAgB,YAAhB,CAApB;AACD;AAJa;AAFlB,KAD2B,GAU3B,IAhBN;AAiBEX,IAAAA,KAAK,EAAEe,qBAAqB,CAACC,MAAtB,CAA6B,UAAAa,UAAU;AAAA,aAAIA,UAAU,CAACjB,IAAX,KAAoB,YAAxB;AAAA,KAAvC;AAjBT,GApBW,EAuCX;AACElC,IAAAA,IAAI,EAAE,YADR;AAEEC,IAAAA,KAAK,EAAE;AACLlB,MAAAA,EAAE,YAAKC,oBAAL;AADG,KAFT;AAKE4D,IAAAA,UAAU,EAAE,IALd;AAMEC,IAAAA,UAAU,EAAEvD,mBAAmB,GAC3B;AACEwD,MAAAA,SAAS,EAAEC,sBADb;AAEEC,MAAAA,cAAc,EAAE;AACdjE,QAAAA,EAAE,YAAKC,oBAAL,6BADY;AAEdiE,QAAAA,OAAO,EAAE,mBAAM;AACbhB,UAAAA,oBAAoB,CAAC,WAAD,CAApB;AACD;AAJa;AAFlB,KAD2B,GAU3B,IAhBN;AAiBEX,IAAAA,KAAK,EAAE3B;AAjBT,GAvCW,CAAb;AA4DA,sBACE,gCAAC,mBAAD;AAAS,IAAA,SAAS,EAAC;AAAnB,KACGU,IAAI,CAACP,GAAL,CAAS,UAAAsD,IAAI,EAAI;AAChB,wBAAO,gCAAC,gCAAD,gCAAkBA,IAAlB;AAAwB,MAAA,GAAG,EAAEA,IAAI,CAACpD;AAAlC,OAAP;AACD,GAFA,CADH,CADF;AAOD;;AAEDf,QAAQ,CAACoE,YAAT,GAAwB;AACtBnE,EAAAA,IAAI,EAAE,gBAAM,CAAE;AADQ,CAAxB;AAIAD,QAAQ,CAACqE,SAAT,GAAqB;AACnBpE,EAAAA,IAAI,EAAEqE,sBAAUC;AADG,CAArB;eAIevE,Q","sourcesContent":["/**\n *\n * LeftMenu\n *\n */\n\nimport React, { useMemo } from 'react';\nimport PropTypes from 'prop-types';\nimport { sortBy, camelCase, upperFirst } from 'lodash';\nimport { useHistory } from 'react-router-dom';\nimport { LeftMenuList, useGlobalContext } from 'strapi-helper-plugin';\nimport { Text } from '@buffetjs/core';\nimport pluginId from '../../pluginId';\nimport getTrad from '../../utils/getTrad';\nimport CustomLink from '../../components/CustomLink';\nimport useDataManager from '../../hooks/useDataManager';\nimport makeSearch from '../../utils/makeSearch';\nimport Wrapper from './Wrapper';\n\n/* eslint-disable indent */\n\nconst displayNotificationCTNotSaved = () => {\n  strapi.notification.toggle({\n    type: 'info',\n    message: { id: `${pluginId}.notification.info.creating.notSaved` },\n  });\n};\n\nfunction LeftMenu({ wait }) {\n  const {\n    components,\n    componentsGroupedByCategory,\n    contentTypes,\n    isInDevelopmentMode,\n    sortedContentTypesList,\n  } = useDataManager();\n  const { emitEvent, formatMessage } = useGlobalContext();\n  const { push } = useHistory();\n  const componentsData = sortBy(\n    Object.keys(componentsGroupedByCategory).map(category => ({\n      name: category,\n      title: category,\n      isEditable: isInDevelopmentMode,\n      onClickEdit: (e, data) => {\n        e.stopPropagation();\n\n        const search = makeSearch({\n          actionType: 'edit',\n          modalType: 'editCategory',\n          categoryName: data.name,\n          header_label_1: formatMessage({\n            id: getTrad('modalForm.header.categories'),\n          }),\n          header_icon_name_1: 'component',\n          header_icon_isCustom_1: false,\n          header_info_category_1: null,\n          header_info_name_1: null,\n          header_label_2: data.name,\n          header_icon_name_2: null,\n          header_icon_isCustom_2: false,\n          header_info_category_2: null,\n          header_info_name_2: null,\n\n          settingType: 'base',\n        });\n\n        push({ search });\n      },\n      links: sortBy(\n        componentsGroupedByCategory[category].map(compo => ({\n          name: compo.uid,\n          to: `/plugins/${pluginId}/component-categories/${category}/${compo.uid}`,\n          title: compo.schema.name,\n        })),\n        obj => obj.title\n      ),\n    })),\n    obj => obj.title\n  );\n\n  const canOpenModalCreateCTorComponent = () => {\n    return (\n      !Object.keys(contentTypes).some(ct => contentTypes[ct].isTemporary === true) &&\n      !Object.keys(components).some(component => components[component].isTemporary === true)\n    );\n  };\n\n  const handleClickOpenModal = async (modalType, kind = '') => {\n    const type = kind === 'singleType' ? kind : modalType;\n\n    if (canOpenModalCreateCTorComponent()) {\n      emitEvent(`willCreate${upperFirst(camelCase(type))}`);\n\n      await wait();\n      const search = makeSearch({\n        modalType,\n        kind,\n        actionType: 'create',\n        settingType: 'base',\n        forTarget: modalType,\n        headerId: getTrad(`modalForm.${type}.header-create`),\n        header_icon_isCustom_1: 'false',\n        header_icon_name_1: type,\n        header_label_1: 'null',\n      });\n      push({\n        search,\n      });\n    } else {\n      displayNotificationCTNotSaved();\n    }\n  };\n\n  const displayedContentTypes = useMemo(() => {\n    return sortedContentTypesList\n      .filter(obj => obj.visible)\n      .map(obj => {\n        if (obj.plugin) {\n          return {\n            ...obj,\n            CustomComponent: () => (\n              <p style={{ justifyContent: 'normal' }}>\n                {obj.title}&nbsp;\n                <Text\n                  as=\"span\"\n                  ellipsis\n                  // This is needed here\n                  style={{ fontStyle: 'italic' }}\n                  fontWeight=\"inherit\"\n                  lineHeight=\"inherit\"\n                >\n                  ({formatMessage({ id: getTrad('from') })}: {obj.plugin})&nbsp;\n                </Text>\n              </p>\n            ),\n          };\n        }\n\n        return obj;\n      });\n  }, [sortedContentTypesList, formatMessage]);\n\n  const data = [\n    {\n      name: 'models',\n      title: {\n        id: `${pluginId}.menu.section.models.name.`,\n      },\n      searchable: true,\n      customLink: isInDevelopmentMode\n        ? {\n            Component: CustomLink,\n            componentProps: {\n              id: `${pluginId}.button.model.create`,\n              onClick: () => {\n                handleClickOpenModal('contentType', 'collectionType');\n              },\n            },\n          }\n        : null,\n      links: displayedContentTypes.filter(contentType => contentType.kind === 'collectionType'),\n    },\n    {\n      name: 'singleTypes',\n      title: {\n        id: `${pluginId}.menu.section.single-types.name.`,\n      },\n      searchable: true,\n      customLink: isInDevelopmentMode\n        ? {\n            Component: CustomLink,\n            componentProps: {\n              id: `${pluginId}.button.single-types.create`,\n              onClick: () => {\n                handleClickOpenModal('contentType', 'singleType');\n              },\n            },\n          }\n        : null,\n      links: displayedContentTypes.filter(singleType => singleType.kind === 'singleType'),\n    },\n    {\n      name: 'components',\n      title: {\n        id: `${pluginId}.menu.section.components.name.`,\n      },\n      searchable: true,\n      customLink: isInDevelopmentMode\n        ? {\n            Component: CustomLink,\n            componentProps: {\n              id: `${pluginId}.button.component.create`,\n              onClick: () => {\n                handleClickOpenModal('component');\n              },\n            },\n          }\n        : null,\n      links: componentsData,\n    },\n  ];\n\n  return (\n    <Wrapper className=\"col-md-3\">\n      {data.map(list => {\n        return <LeftMenuList {...list} key={list.name} />;\n      })}\n    </Wrapper>\n  );\n}\n\nLeftMenu.defaultProps = {\n  wait: () => {},\n};\n\nLeftMenu.propTypes = {\n  wait: PropTypes.func,\n};\n\nexport default LeftMenu;\n"]},"metadata":{},"sourceType":"script"}