{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _typeof = require(\"@babel/runtime/helpers/typeof\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _custom = require(\"@buffetjs/custom\");\n\nvar _reactHelmet = require(\"react-helmet\");\n\nvar _reactIntl = require(\"react-intl\");\n\nvar _reactRouterDom = require(\"react-router-dom\");\n\nvar _reactFontawesome = require(\"@fortawesome/react-fontawesome\");\n\nvar _strapiHelperPlugin = require(\"strapi-helper-plugin\");\n\nvar _permissions = _interopRequireDefault(require(\"../../../permissions\"));\n\nvar _Roles = require(\"../../../components/Roles\");\n\nvar _hooks = require(\"../../../hooks\");\n\nvar _BaselineAlignment = _interopRequireDefault(require(\"./BaselineAlignment\"));\n\nvar _pluginId = _interopRequireDefault(require(\"../../../pluginId\"));\n\nvar _utils = require(\"../../../utils\");\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { \"default\": obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj[\"default\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nvar RoleListPage = function RoleListPage() {\n  var _useIntl = (0, _reactIntl.useIntl)(),\n      formatMessage = _useIntl.formatMessage;\n\n  var _useGlobalContext = (0, _strapiHelperPlugin.useGlobalContext)(),\n      emitEvent = _useGlobalContext.emitEvent;\n\n  var _useHistory = (0, _reactRouterDom.useHistory)(),\n      push = _useHistory.push;\n\n  var _useState = (0, _react.useState)(),\n      _useState2 = (0, _slicedToArray2[\"default\"])(_useState, 2),\n      modalToDelete = _useState2[0],\n      setModalDelete = _useState2[1];\n\n  var _useState3 = (0, _react.useState)(false),\n      _useState4 = (0, _slicedToArray2[\"default\"])(_useState3, 2),\n      shouldRefetchData = _useState4[0],\n      setShouldRefetchData = _useState4[1];\n\n  var _useState5 = (0, _react.useState)(false),\n      _useState6 = (0, _slicedToArray2[\"default\"])(_useState5, 2),\n      showModalConfirmButtonLoading = _useState6[0],\n      setModalButtonLoading = _useState6[1];\n\n  var updatePermissions = (0, _react.useMemo)(function () {\n    return {\n      update: _permissions[\"default\"].updateRole,\n      create: _permissions[\"default\"].createRole,\n      \"delete\": _permissions[\"default\"].deleteRole,\n      read: _permissions[\"default\"].readRoles\n    };\n  }, []);\n\n  var _useUserPermissions = (0, _strapiHelperPlugin.useUserPermissions)(updatePermissions),\n      isLoadingForPermissions = _useUserPermissions.isLoading,\n      _useUserPermissions$a = _useUserPermissions.allowedActions,\n      canCreate = _useUserPermissions$a.canCreate,\n      canUpdate = _useUserPermissions$a.canUpdate,\n      canDelete = _useUserPermissions$a.canDelete,\n      canRead = _useUserPermissions$a.canRead;\n\n  var shouldFetchData = !isLoadingForPermissions && canRead;\n\n  var _useRolesList = (0, _hooks.useRolesList)(shouldFetchData),\n      roles = _useRolesList.roles,\n      getData = _useRolesList.getData,\n      isLoading = _useRolesList.isLoading;\n\n  var handleGoTo = function handleGoTo(id) {\n    if (canUpdate) {\n      push(\"/settings/\".concat(_pluginId[\"default\"], \"/roles/\").concat(id));\n    }\n  };\n\n  var handleDelete = function handleDelete() {\n    strapi.lockAppWithOverlay();\n    setModalButtonLoading(true);\n    Promise.resolve((0, _strapiHelperPlugin.request)(\"/\".concat(_pluginId[\"default\"], \"/roles/\").concat(modalToDelete), {\n      method: 'DELETE'\n    })).then(function () {\n      setShouldRefetchData(true);\n      strapi.notification.toggle({\n        type: 'success',\n        message: {\n          id: (0, _utils.getTrad)('Settings.roles.deleted')\n        }\n      });\n    })[\"catch\"](function (err) {\n      console.error(err);\n      strapi.notification.toggle({\n        type: 'warning',\n        message: {\n          id: 'notification.error'\n        }\n      });\n    })[\"finally\"](function () {\n      setModalDelete(null);\n      strapi.unlockApp();\n    });\n  };\n\n  var handleClosedModalDelete = function handleClosedModalDelete() {\n    if (shouldRefetchData) {\n      getData();\n    }\n\n    setModalButtonLoading(false);\n    setShouldRefetchData(false);\n  };\n\n  var handleNewRoleClick = function handleNewRoleClick() {\n    emitEvent('willCreateRole');\n    push(\"/settings/\".concat(_pluginId[\"default\"], \"/roles/new\"));\n  };\n  /* eslint-disable indent */\n\n\n  var headerActions = canCreate ? [{\n    label: formatMessage({\n      id: 'List.button.roles',\n      defaultMessage: 'Add new role'\n    }),\n    onClick: handleNewRoleClick,\n    color: 'primary',\n    type: 'button',\n    icon: true\n  }] : [];\n  /* eslint-enable indent */\n\n  var checkCanDeleteRole = (0, _react.useCallback)(function (role) {\n    return canDelete && !['public', 'authenticated'].includes(role.type);\n  }, [canDelete]);\n\n  var getLinks = function getLinks(role) {\n    var links = [];\n\n    if (canUpdate) {\n      links.push({\n        icon: /*#__PURE__*/_react[\"default\"].createElement(_reactFontawesome.FontAwesomeIcon, {\n          icon: \"pencil-alt\"\n        }),\n        onClick: function onClick() {\n          return handleGoTo(role.id);\n        }\n      });\n    }\n\n    if (checkCanDeleteRole(role)) {\n      links.push({\n        icon: /*#__PURE__*/_react[\"default\"].createElement(_reactFontawesome.FontAwesomeIcon, {\n          icon: \"trash-alt\"\n        }),\n        onClick: function onClick(e) {\n          e.preventDefault();\n          setModalDelete(role.id);\n          e.stopPropagation();\n        }\n      });\n    }\n\n    return links;\n  };\n\n  return /*#__PURE__*/_react[\"default\"].createElement(_react[\"default\"].Fragment, null, /*#__PURE__*/_react[\"default\"].createElement(_reactHelmet.Helmet, {\n    title: formatMessage({\n      id: (0, _utils.getTrad)('page.title')\n    })\n  }), /*#__PURE__*/_react[\"default\"].createElement(_custom.Header, {\n    icon: true,\n    title: {\n      label: formatMessage({\n        id: 'Settings.roles.title',\n        defaultMessage: 'Roles & Permissions'\n      })\n    },\n    content: formatMessage({\n      id: 'Settings.roles.list.description',\n      defaultMessage: 'Define the roles and permissions for your users.'\n    }),\n    actions: headerActions // Show a loader in the header while requesting data\n    ,\n    isLoading: isLoading || isLoadingForPermissions\n  }), /*#__PURE__*/_react[\"default\"].createElement(_BaselineAlignment[\"default\"], null), canRead && /*#__PURE__*/_react[\"default\"].createElement(_Roles.RoleListWrapper, null, /*#__PURE__*/_react[\"default\"].createElement(_custom.List, {\n    title: formatMessage({\n      id: \"Settings.roles.list.title\".concat(roles.length > 1 ? '.plural' : '.singular')\n    }, {\n      number: roles.length\n    }),\n    items: roles,\n    isLoading: isLoading || isLoadingForPermissions,\n    customRowComponent: function customRowComponent(role) {\n      return /*#__PURE__*/_react[\"default\"].createElement(_Roles.RoleRow, {\n        onClick: function onClick() {\n          return handleGoTo(role.id);\n        },\n        links: getLinks(role),\n        role: role\n      });\n    }\n  }), !roles && !isLoading && !isLoadingForPermissions && /*#__PURE__*/_react[\"default\"].createElement(_Roles.EmptyRole, null), /*#__PURE__*/_react[\"default\"].createElement(_strapiHelperPlugin.PopUpWarning, {\n    isOpen: Boolean(modalToDelete),\n    onConfirm: handleDelete,\n    onClosed: handleClosedModalDelete,\n    toggleModal: function toggleModal() {\n      return setModalDelete(null);\n    },\n    isConfirmButtonLoading: showModalConfirmButtonLoading\n  })));\n};\n\nvar _default = RoleListPage;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["/Users/joaovictorlobao/prefeituramaragogistrapi/.cache/plugins/strapi-plugin-users-permissions/admin/src/containers/Roles/ListPage/index.js"],"names":["RoleListPage","formatMessage","emitEvent","push","modalToDelete","setModalDelete","shouldRefetchData","setShouldRefetchData","showModalConfirmButtonLoading","setModalButtonLoading","updatePermissions","update","permissions","updateRole","create","createRole","deleteRole","read","readRoles","isLoadingForPermissions","isLoading","allowedActions","canCreate","canUpdate","canDelete","canRead","shouldFetchData","roles","getData","handleGoTo","id","pluginId","handleDelete","strapi","lockAppWithOverlay","Promise","resolve","method","then","notification","toggle","type","message","err","console","error","unlockApp","handleClosedModalDelete","handleNewRoleClick","headerActions","label","defaultMessage","onClick","color","icon","checkCanDeleteRole","role","includes","getLinks","links","e","preventDefault","stopPropagation","length","number","Boolean"],"mappings":"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","sourcesContent":["import React, { useCallback, useMemo, useState } from 'react';\nimport { List, Header } from '@buffetjs/custom';\nimport { Helmet } from 'react-helmet';\nimport { useIntl } from 'react-intl';\nimport { useHistory } from 'react-router-dom';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { useUserPermissions, PopUpWarning, request, useGlobalContext } from 'strapi-helper-plugin';\n\nimport permissions from '../../../permissions';\nimport { EmptyRole, RoleListWrapper, RoleRow } from '../../../components/Roles';\nimport { useRolesList } from '../../../hooks';\nimport BaselineAlignment from './BaselineAlignment';\nimport pluginId from '../../../pluginId';\nimport { getTrad } from '../../../utils';\n\nconst RoleListPage = () => {\n  const { formatMessage } = useIntl();\n  const { emitEvent } = useGlobalContext();\n  const { push } = useHistory();\n\n  const [modalToDelete, setModalDelete] = useState();\n  const [shouldRefetchData, setShouldRefetchData] = useState(false);\n  const [showModalConfirmButtonLoading, setModalButtonLoading] = useState(false);\n\n  const updatePermissions = useMemo(() => {\n    return {\n      update: permissions.updateRole,\n      create: permissions.createRole,\n      delete: permissions.deleteRole,\n      read: permissions.readRoles,\n    };\n  }, []);\n  const {\n    isLoading: isLoadingForPermissions,\n    allowedActions: { canCreate, canUpdate, canDelete, canRead },\n  } = useUserPermissions(updatePermissions);\n  const shouldFetchData = !isLoadingForPermissions && canRead;\n\n  const { roles, getData, isLoading } = useRolesList(shouldFetchData);\n\n  const handleGoTo = id => {\n    if (canUpdate) {\n      push(`/settings/${pluginId}/roles/${id}`);\n    }\n  };\n\n  const handleDelete = () => {\n    strapi.lockAppWithOverlay();\n\n    setModalButtonLoading(true);\n\n    Promise.resolve(\n      request(`/${pluginId}/roles/${modalToDelete}`, {\n        method: 'DELETE',\n      })\n    )\n      .then(() => {\n        setShouldRefetchData(true);\n        strapi.notification.toggle({\n          type: 'success',\n          message: { id: getTrad('Settings.roles.deleted') },\n        });\n      })\n      .catch(err => {\n        console.error(err);\n        strapi.notification.toggle({\n          type: 'warning',\n          message: { id: 'notification.error' },\n        });\n      })\n      .finally(() => {\n        setModalDelete(null);\n        strapi.unlockApp();\n      });\n  };\n\n  const handleClosedModalDelete = () => {\n    if (shouldRefetchData) {\n      getData();\n    }\n    setModalButtonLoading(false);\n    setShouldRefetchData(false);\n  };\n\n  const handleNewRoleClick = () => {\n    emitEvent('willCreateRole');\n    push(`/settings/${pluginId}/roles/new`);\n  };\n\n  /* eslint-disable indent */\n  const headerActions = canCreate\n    ? [\n        {\n          label: formatMessage({\n            id: 'List.button.roles',\n            defaultMessage: 'Add new role',\n          }),\n          onClick: handleNewRoleClick,\n          color: 'primary',\n          type: 'button',\n          icon: true,\n        },\n      ]\n    : [];\n  /* eslint-enable indent */\n\n  const checkCanDeleteRole = useCallback(\n    role => {\n      return canDelete && !['public', 'authenticated'].includes(role.type);\n    },\n    [canDelete]\n  );\n\n  const getLinks = role => {\n    const links = [];\n\n    if (canUpdate) {\n      links.push({\n        icon: <FontAwesomeIcon icon=\"pencil-alt\" />,\n        onClick: () => handleGoTo(role.id),\n      });\n    }\n    if (checkCanDeleteRole(role)) {\n      links.push({\n        icon: <FontAwesomeIcon icon=\"trash-alt\" />,\n        onClick: e => {\n          e.preventDefault();\n          setModalDelete(role.id);\n          e.stopPropagation();\n        },\n      });\n    }\n\n    return links;\n  };\n\n  return (\n    <>\n      <Helmet title={formatMessage({ id: getTrad('page.title') })} />\n\n      <Header\n        icon\n        title={{\n          label: formatMessage({\n            id: 'Settings.roles.title',\n            defaultMessage: 'Roles & Permissions',\n          }),\n        }}\n        content={formatMessage({\n          id: 'Settings.roles.list.description',\n          defaultMessage: 'Define the roles and permissions for your users.',\n        })}\n        actions={headerActions}\n        // Show a loader in the header while requesting data\n        isLoading={isLoading || isLoadingForPermissions}\n      />\n\n      <BaselineAlignment />\n      {canRead && (\n        <RoleListWrapper>\n          <List\n            title={formatMessage(\n              {\n                id: `Settings.roles.list.title${roles.length > 1 ? '.plural' : '.singular'}`,\n              },\n              { number: roles.length }\n            )}\n            items={roles}\n            isLoading={isLoading || isLoadingForPermissions}\n            customRowComponent={role => (\n              <RoleRow onClick={() => handleGoTo(role.id)} links={getLinks(role)} role={role} />\n            )}\n          />\n          {!roles && !isLoading && !isLoadingForPermissions && <EmptyRole />}\n          <PopUpWarning\n            isOpen={Boolean(modalToDelete)}\n            onConfirm={handleDelete}\n            onClosed={handleClosedModalDelete}\n            toggleModal={() => setModalDelete(null)}\n            isConfirmButtonLoading={showModalConfirmButtonLoading}\n          />\n        </RoleListWrapper>\n      )}\n    </>\n  );\n};\n\nexport default RoleListPage;\n"]},"metadata":{},"sourceType":"script"}