{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _typeof = require(\"@babel/runtime/helpers/typeof\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _reactRouterDom = require(\"react-router-dom\");\n\nvar _lodash = require(\"lodash\");\n\nvar _reactIntl = require(\"react-intl\");\n\nvar _strapiHelperPlugin = require(\"strapi-helper-plugin\");\n\nvar _utils = require(\"../../utils\");\n\nvar _icon_remove = _interopRequireDefault(require(\"../../assets/images/icon_remove.svg\"));\n\nvar _components = require(\"./components\");\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { \"default\": obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj[\"default\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\n/* eslint-disable jsx-a11y/click-events-have-key-events */\n\n/* eslint-disable jsx-a11y/no-noninteractive-element-interactions */\nvar Relation = function Relation(_ref) {\n  var data = _ref.data,\n      displayNavigationLink = _ref.displayNavigationLink,\n      hasDraftAndPublish = _ref.hasDraftAndPublish,\n      isDisabled = _ref.isDisabled,\n      isDragging = _ref.isDragging,\n      mainField = _ref.mainField,\n      onRemove = _ref.onRemove,\n      searchToPersist = _ref.searchToPersist,\n      to = _ref.to;\n\n  var _useIntl = (0, _reactIntl.useIntl)(),\n      formatMessage = _useIntl.formatMessage;\n\n  var cursor = (0, _react.useMemo)(function () {\n    if (isDisabled) {\n      return 'not-allowed';\n    }\n\n    if (!displayNavigationLink) {\n      return 'default';\n    }\n\n    return 'pointer';\n  }, [displayNavigationLink, isDisabled]);\n\n  var _useLocation = (0, _reactRouterDom.useLocation)(),\n      pathname = _useLocation.pathname;\n\n  var isDraft = (0, _lodash.isEmpty)(data.published_at);\n  var titleLabelID = isDraft ? 'components.Select.draft-info-title' : 'components.Select.publish-info-title';\n  var title = hasDraftAndPublish ? formatMessage({\n    id: (0, _utils.getTrad)(titleLabelID)\n  }) : formatMessage({\n    id: (0, _utils.getTrad)('containers.Edit.clickToJump')\n  });\n  var value = data[mainField.name];\n  var formattedValue = (0, _utils.getDisplayedValue)(mainField.schema.type, value, mainField.name);\n\n  if (isDragging || !displayNavigationLink) {\n    title = '';\n  }\n\n  return /*#__PURE__*/_react[\"default\"].createElement(_react[\"default\"].Fragment, null, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    style: {\n      cursor: cursor\n    },\n    title: title\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: \"dragHandle\"\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"span\", null)), hasDraftAndPublish && /*#__PURE__*/_react[\"default\"].createElement(\"div\", null, /*#__PURE__*/_react[\"default\"].createElement(_strapiHelperPlugin.RelationDPState, {\n    isDraft: isDraft\n  })), displayNavigationLink ? /*#__PURE__*/_react[\"default\"].createElement(_reactRouterDom.Link, {\n    to: {\n      pathname: to,\n      state: {\n        from: pathname\n      },\n      search: searchToPersist\n    },\n    title: title\n  }, /*#__PURE__*/_react[\"default\"].createElement(_components.Span, null, formattedValue, \"\\xA0\")) : /*#__PURE__*/_react[\"default\"].createElement(_components.Span, null, formattedValue, \"\\xA0\")), /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    style: {\n      cursor: cursor\n    }\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"img\", {\n    src: _icon_remove[\"default\"],\n    alt: \"Remove Icon\",\n    onClick: onRemove\n  })));\n};\n\nRelation.defaultProps = {\n  isDragging: false,\n  onRemove: function onRemove() {},\n  searchToPersist: null,\n  to: ''\n};\nRelation.propTypes = {\n  data: _propTypes[\"default\"].object.isRequired,\n  displayNavigationLink: _propTypes[\"default\"].bool.isRequired,\n  hasDraftAndPublish: _propTypes[\"default\"].bool.isRequired,\n  isDisabled: _propTypes[\"default\"].bool.isRequired,\n  isDragging: _propTypes[\"default\"].bool,\n  mainField: _propTypes[\"default\"].shape({\n    name: _propTypes[\"default\"].string.isRequired,\n    schema: _propTypes[\"default\"].shape({\n      type: _propTypes[\"default\"].string.isRequired\n    }).isRequired\n  }).isRequired,\n  onRemove: _propTypes[\"default\"].func,\n  searchToPersist: _propTypes[\"default\"].string,\n  to: _propTypes[\"default\"].string\n};\n\nvar _default = /*#__PURE__*/(0, _react.memo)(Relation);\n\nexports[\"default\"] = _default;","map":{"version":3,"sources":["/Users/joaovictorlobao/prefeituramaragogistrapi/.cache/plugins/strapi-plugin-content-manager/admin/src/components/SelectMany/Relation.js"],"names":["Relation","data","displayNavigationLink","hasDraftAndPublish","isDisabled","isDragging","mainField","onRemove","searchToPersist","to","formatMessage","cursor","pathname","isDraft","published_at","titleLabelID","title","id","value","name","formattedValue","schema","type","state","from","search","IconRemove","defaultProps","propTypes","PropTypes","object","isRequired","bool","shape","string","func"],"mappings":"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","sourcesContent":["/* eslint-disable jsx-a11y/click-events-have-key-events */\nimport React, { memo, useMemo } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link, useLocation } from 'react-router-dom';\nimport { isEmpty } from 'lodash';\nimport { useIntl } from 'react-intl';\nimport { RelationDPState } from 'strapi-helper-plugin';\nimport { getDisplayedValue, getTrad } from '../../utils';\nimport IconRemove from '../../assets/images/icon_remove.svg';\nimport { Span } from './components';\n\n/* eslint-disable jsx-a11y/no-noninteractive-element-interactions */\n\nconst Relation = ({\n  data,\n  displayNavigationLink,\n  hasDraftAndPublish,\n  isDisabled,\n  isDragging,\n  mainField,\n  onRemove,\n  searchToPersist,\n  to,\n}) => {\n  const { formatMessage } = useIntl();\n  const cursor = useMemo(() => {\n    if (isDisabled) {\n      return 'not-allowed';\n    }\n\n    if (!displayNavigationLink) {\n      return 'default';\n    }\n\n    return 'pointer';\n  }, [displayNavigationLink, isDisabled]);\n  const { pathname } = useLocation();\n  const isDraft = isEmpty(data.published_at);\n  const titleLabelID = isDraft\n    ? 'components.Select.draft-info-title'\n    : 'components.Select.publish-info-title';\n  let title = hasDraftAndPublish\n    ? formatMessage({ id: getTrad(titleLabelID) })\n    : formatMessage({ id: getTrad('containers.Edit.clickToJump') });\n\n  const value = data[mainField.name];\n  const formattedValue = getDisplayedValue(mainField.schema.type, value, mainField.name);\n\n  if (isDragging || !displayNavigationLink) {\n    title = '';\n  }\n\n  return (\n    <>\n      <div style={{ cursor }} title={title}>\n        <div className=\"dragHandle\">\n          <span />\n        </div>\n        {hasDraftAndPublish && (\n          <div>\n            <RelationDPState isDraft={isDraft} />\n          </div>\n        )}\n        {displayNavigationLink ? (\n          <Link\n            to={{ pathname: to, state: { from: pathname }, search: searchToPersist }}\n            title={title}\n          >\n            <Span>{formattedValue}&nbsp;</Span>\n          </Link>\n        ) : (\n          <Span>{formattedValue}&nbsp;</Span>\n        )}\n      </div>\n      <div style={{ cursor }}>\n        <img src={IconRemove} alt=\"Remove Icon\" onClick={onRemove} />\n      </div>\n    </>\n  );\n};\n\nRelation.defaultProps = {\n  isDragging: false,\n  onRemove: () => {},\n  searchToPersist: null,\n  to: '',\n};\n\nRelation.propTypes = {\n  data: PropTypes.object.isRequired,\n  displayNavigationLink: PropTypes.bool.isRequired,\n  hasDraftAndPublish: PropTypes.bool.isRequired,\n  isDisabled: PropTypes.bool.isRequired,\n  isDragging: PropTypes.bool,\n  mainField: PropTypes.shape({\n    name: PropTypes.string.isRequired,\n    schema: PropTypes.shape({\n      type: PropTypes.string.isRequired,\n    }).isRequired,\n  }).isRequired,\n  onRemove: PropTypes.func,\n  searchToPersist: PropTypes.string,\n  to: PropTypes.string,\n};\n\nexport default memo(Relation);\n"]},"metadata":{},"sourceType":"script"}