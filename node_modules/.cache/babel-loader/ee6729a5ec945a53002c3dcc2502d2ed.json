{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\n\nvar _lodash = require(\"lodash\");\n\nvar _makeUnique = _interopRequireDefault(require(\"../../../utils/makeUnique\"));\n\nvar retrieveComponentsFromSchema = function retrieveComponentsFromSchema(attributes, allComponentsData) {\n  var allComponents = Object.keys(attributes).reduce(function (acc, current) {\n    var type = (0, _lodash.get)(attributes, [current, 'type'], '');\n\n    if (type === 'component') {\n      var currentComponentName = attributes[current].component; // Push the existing compo\n\n      acc.push(currentComponentName);\n      var currentComponentAttributes = (0, _lodash.get)(allComponentsData, [currentComponentName, 'schema', 'attributes'], {}); // Retrieve the nested ones\n\n      acc.push.apply(acc, (0, _toConsumableArray2[\"default\"])(retrieveComponentsFromSchema(currentComponentAttributes, allComponentsData)));\n    }\n\n    if (type === 'dynamiczone') {\n      var dynamicZoneComponents = attributes[current].components;\n      var componentsFromDZComponents = dynamicZoneComponents.reduce(function (acc2, currentUid) {\n        var compoAttrs = (0, _lodash.get)(allComponentsData, [currentUid, 'schema', 'attributes'], {});\n        return [].concat((0, _toConsumableArray2[\"default\"])(acc2), (0, _toConsumableArray2[\"default\"])(retrieveComponentsFromSchema(compoAttrs, allComponentsData)));\n      }, []);\n      return [].concat((0, _toConsumableArray2[\"default\"])(acc), (0, _toConsumableArray2[\"default\"])(dynamicZoneComponents), (0, _toConsumableArray2[\"default\"])(componentsFromDZComponents));\n    }\n\n    return acc;\n  }, []);\n  return (0, _makeUnique[\"default\"])(allComponents);\n};\n\nvar _default = retrieveComponentsFromSchema;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["/Users/joaovictorlobao/prefeituramaragogistrapi/.cache/plugins/strapi-plugin-content-type-builder/admin/src/containers/DataManagerProvider/utils/retrieveComponentsFromSchema.js"],"names":["retrieveComponentsFromSchema","attributes","allComponentsData","allComponents","Object","keys","reduce","acc","current","type","currentComponentName","component","push","currentComponentAttributes","dynamicZoneComponents","components","componentsFromDZComponents","acc2","currentUid","compoAttrs"],"mappings":";;;;;;;;;;;AAAA;;AACA;;AAEA,IAAMA,4BAA4B,GAAG,SAA/BA,4BAA+B,CAACC,UAAD,EAAaC,iBAAb,EAAmC;AACtE,MAAMC,aAAa,GAAGC,MAAM,CAACC,IAAP,CAAYJ,UAAZ,EAAwBK,MAAxB,CAA+B,UAACC,GAAD,EAAMC,OAAN,EAAkB;AACrE,QAAMC,IAAI,GAAG,iBAAIR,UAAJ,EAAgB,CAACO,OAAD,EAAU,MAAV,CAAhB,EAAmC,EAAnC,CAAb;;AAEA,QAAIC,IAAI,KAAK,WAAb,EAA0B;AACxB,UAAMC,oBAAoB,GAAGT,UAAU,CAACO,OAAD,CAAV,CAAoBG,SAAjD,CADwB,CAExB;;AACAJ,MAAAA,GAAG,CAACK,IAAJ,CAASF,oBAAT;AAEA,UAAMG,0BAA0B,GAAG,iBACjCX,iBADiC,EAEjC,CAACQ,oBAAD,EAAuB,QAAvB,EAAiC,YAAjC,CAFiC,EAGjC,EAHiC,CAAnC,CALwB,CAWxB;;AACAH,MAAAA,GAAG,CAACK,IAAJ,OAAAL,GAAG,sCACEP,4BAA4B,CAC7Ba,0BAD6B,EAE7BX,iBAF6B,CAD9B,EAAH;AAMD;;AAED,QAAIO,IAAI,KAAK,aAAb,EAA4B;AAC1B,UAAMK,qBAAqB,GAAGb,UAAU,CAACO,OAAD,CAAV,CAAoBO,UAAlD;AACA,UAAMC,0BAA0B,GAAGF,qBAAqB,CAACR,MAAtB,CACjC,UAACW,IAAD,EAAOC,UAAP,EAAsB;AACpB,YAAMC,UAAU,GAAG,iBACjBjB,iBADiB,EAEjB,CAACgB,UAAD,EAAa,QAAb,EAAuB,YAAvB,CAFiB,EAGjB,EAHiB,CAAnB;AAMA,6DACKD,IADL,uCAEKjB,4BAA4B,CAACmB,UAAD,EAAajB,iBAAb,CAFjC;AAID,OAZgC,EAajC,EAbiC,CAAnC;AAgBA,2DAAWK,GAAX,uCAAmBO,qBAAnB,uCAA6CE,0BAA7C;AACD;;AAED,WAAOT,GAAP;AACD,GA7CqB,EA6CnB,EA7CmB,CAAtB;AA+CA,SAAO,4BAAWJ,aAAX,CAAP;AACD,CAjDD;;eAmDeH,4B","sourcesContent":["import { get } from 'lodash';\nimport makeUnique from '../../../utils/makeUnique';\n\nconst retrieveComponentsFromSchema = (attributes, allComponentsData) => {\n  const allComponents = Object.keys(attributes).reduce((acc, current) => {\n    const type = get(attributes, [current, 'type'], '');\n\n    if (type === 'component') {\n      const currentComponentName = attributes[current].component;\n      // Push the existing compo\n      acc.push(currentComponentName);\n\n      const currentComponentAttributes = get(\n        allComponentsData,\n        [currentComponentName, 'schema', 'attributes'],\n        {}\n      );\n\n      // Retrieve the nested ones\n      acc.push(\n        ...retrieveComponentsFromSchema(\n          currentComponentAttributes,\n          allComponentsData\n        )\n      );\n    }\n\n    if (type === 'dynamiczone') {\n      const dynamicZoneComponents = attributes[current].components;\n      const componentsFromDZComponents = dynamicZoneComponents.reduce(\n        (acc2, currentUid) => {\n          const compoAttrs = get(\n            allComponentsData,\n            [currentUid, 'schema', 'attributes'],\n            {}\n          );\n\n          return [\n            ...acc2,\n            ...retrieveComponentsFromSchema(compoAttrs, allComponentsData),\n          ];\n        },\n        []\n      );\n\n      return [...acc, ...dynamicZoneComponents, ...componentsFromDZComponents];\n    }\n\n    return acc;\n  }, []);\n\n  return makeUnique(allComponents);\n};\n\nexport default retrieveComponentsFromSchema;\n"]},"metadata":{},"sourceType":"script"}