{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _typeof = require(\"@babel/runtime/helpers/typeof\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _reactIntl = require(\"react-intl\");\n\nvar _reactstrap = require(\"reactstrap\");\n\nvar _lodash = require(\"lodash\");\n\nvar _utils = require(\"../../utils\");\n\nvar _UsersPermissionsContext = require(\"../../contexts/UsersPermissionsContext\");\n\nvar _BoundRoute = _interopRequireDefault(require(\"../BoundRoute\"));\n\nvar _SizedInput = _interopRequireDefault(require(\"../SizedInput\"));\n\nvar _Components = require(\"./Components\");\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { \"default\": obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj[\"default\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nvar Policies = function Policies() {\n  var _useUsersPermissions = (0, _UsersPermissionsContext.useUsersPermissions)(),\n      modifiedData = _useUsersPermissions.modifiedData,\n      selectedAction = _useUsersPermissions.selectedAction,\n      routes = _useUsersPermissions.routes,\n      policies = _useUsersPermissions.policies,\n      onChange = _useUsersPermissions.onChange;\n\n  var baseTitle = 'users-permissions.Policies.header';\n  var title = !selectedAction ? 'hint' : 'title';\n  var path = (0, _lodash.without)(selectedAction.split('.'), 'controllers');\n  var controllerRoutes = (0, _lodash.get)(routes, path[0]);\n  var displayedRoutes = (0, _lodash.isEmpty)(controllerRoutes) ? [] : controllerRoutes.filter(function (o) {\n    return (0, _lodash.toLower)(o.handler) === (0, _lodash.toLower)((0, _lodash.takeRight)(path, 2).join('.'));\n  });\n  var inputName = \"\".concat(selectedAction, \".policy\");\n  var value = (0, _react.useMemo)(function () {\n    return (0, _lodash.get)(modifiedData, inputName, '');\n  }, [inputName, modifiedData]);\n  return /*#__PURE__*/_react[\"default\"].createElement(_Components.Wrapper, {\n    className: \"col-md-5\"\n  }, /*#__PURE__*/_react[\"default\"].createElement(_Components.Sticky, {\n    className: \"container-fluid\"\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: \"row\"\n  }, /*#__PURE__*/_react[\"default\"].createElement(_Components.Header, {\n    className: \"col-md-12\"\n  }, /*#__PURE__*/_react[\"default\"].createElement(_reactIntl.FormattedMessage, {\n    id: \"\".concat(baseTitle, \".\").concat(title)\n  })), selectedAction && /*#__PURE__*/_react[\"default\"].createElement(_react[\"default\"].Fragment, null, /*#__PURE__*/_react[\"default\"].createElement(_SizedInput[\"default\"], {\n    type: \"select\",\n    name: inputName,\n    onChange: onChange,\n    label: (0, _utils.getTrad)('Policies.InputSelect.label'),\n    options: policies,\n    value: value\n  }), /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: \"row\"\n  }, /*#__PURE__*/_react[\"default\"].createElement(_reactstrap.Col, {\n    size: {\n      xs: 12\n    }\n  }, displayedRoutes.map(function (route, key) {\n    return (\n      /*#__PURE__*/\n      // eslint-disable-next-line react/no-array-index-key\n      _react[\"default\"].createElement(_BoundRoute[\"default\"], {\n        key: key,\n        route: route\n      })\n    );\n  })))))));\n};\n\nvar _default = Policies;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["/Users/joaovictorlobao/prefeituramaragogistrapi/.cache/plugins/strapi-plugin-users-permissions/admin/src/components/Policies/index.js"],"names":["Policies","modifiedData","selectedAction","routes","policies","onChange","baseTitle","title","path","split","controllerRoutes","displayedRoutes","filter","o","handler","join","inputName","value","xs","map","route","key"],"mappings":";;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;;;AAEA,IAAMA,QAAQ,GAAG,SAAXA,QAAW,GAAM;AACrB,6BAAqE,mDAArE;AAAA,MAAQC,YAAR,wBAAQA,YAAR;AAAA,MAAsBC,cAAtB,wBAAsBA,cAAtB;AAAA,MAAsCC,MAAtC,wBAAsCA,MAAtC;AAAA,MAA8CC,QAA9C,wBAA8CA,QAA9C;AAAA,MAAwDC,QAAxD,wBAAwDA,QAAxD;;AACA,MAAMC,SAAS,GAAG,mCAAlB;AACA,MAAMC,KAAK,GAAG,CAACL,cAAD,GAAkB,MAAlB,GAA2B,OAAzC;AACA,MAAMM,IAAI,GAAG,qBAAQN,cAAc,CAACO,KAAf,CAAqB,GAArB,CAAR,EAAmC,aAAnC,CAAb;AACA,MAAMC,gBAAgB,GAAG,iBAAIP,MAAJ,EAAYK,IAAI,CAAC,CAAD,CAAhB,CAAzB;AACA,MAAMG,eAAe,GAAG,qBAAQD,gBAAR,IACpB,EADoB,GAEpBA,gBAAgB,CAACE,MAAjB,CAAwB,UAAAC,CAAC;AAAA,WAAI,qBAAQA,CAAC,CAACC,OAAV,MAAuB,qBAAQ,uBAAUN,IAAV,EAAgB,CAAhB,EAAmBO,IAAnB,CAAwB,GAAxB,CAAR,CAA3B;AAAA,GAAzB,CAFJ;AAIA,MAAMC,SAAS,aAAMd,cAAN,YAAf;AAEA,MAAMe,KAAK,GAAG,oBAAQ,YAAM;AAC1B,WAAO,iBAAIhB,YAAJ,EAAkBe,SAAlB,EAA6B,EAA7B,CAAP;AACD,GAFa,EAEX,CAACA,SAAD,EAAYf,YAAZ,CAFW,CAAd;AAIA,sBACE,gCAAC,mBAAD;AAAS,IAAA,SAAS,EAAC;AAAnB,kBACE,gCAAC,kBAAD;AAAQ,IAAA,SAAS,EAAC;AAAlB,kBACE;AAAK,IAAA,SAAS,EAAC;AAAf,kBACE,gCAAC,kBAAD;AAAQ,IAAA,SAAS,EAAC;AAAlB,kBACE,gCAAC,2BAAD;AAAkB,IAAA,EAAE,YAAKK,SAAL,cAAkBC,KAAlB;AAApB,IADF,CADF,EAIGL,cAAc,iBACb,+EACE,gCAAC,sBAAD;AACE,IAAA,IAAI,EAAC,QADP;AAEE,IAAA,IAAI,EAAEc,SAFR;AAGE,IAAA,QAAQ,EAAEX,QAHZ;AAIE,IAAA,KAAK,EAAE,oBAAQ,4BAAR,CAJT;AAKE,IAAA,OAAO,EAAED,QALX;AAME,IAAA,KAAK,EAAEa;AANT,IADF,eAUE;AAAK,IAAA,SAAS,EAAC;AAAf,kBACE,gCAAC,eAAD;AAAK,IAAA,IAAI,EAAE;AAAEC,MAAAA,EAAE,EAAE;AAAN;AAAX,KACGP,eAAe,CAACQ,GAAhB,CAAoB,UAACC,KAAD,EAAQC,GAAR;AAAA;AAAA;AACnB;AACA,sCAAC,sBAAD;AAAY,QAAA,GAAG,EAAEA,GAAjB;AAAsB,QAAA,KAAK,EAAED;AAA7B;AAFmB;AAAA,GAApB,CADH,CADF,CAVF,CALJ,CADF,CADF,CADF;AAgCD,CAhDD;;eAkDepB,Q","sourcesContent":["import React, { useMemo } from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { Col } from 'reactstrap';\nimport { get, isEmpty, takeRight, toLower, without } from 'lodash';\nimport { getTrad } from '../../utils';\nimport { useUsersPermissions } from '../../contexts/UsersPermissionsContext';\nimport BoundRoute from '../BoundRoute';\nimport SizedInput from '../SizedInput';\nimport { Header, Wrapper, Sticky } from './Components';\n\nconst Policies = () => {\n  const { modifiedData, selectedAction, routes, policies, onChange } = useUsersPermissions();\n  const baseTitle = 'users-permissions.Policies.header';\n  const title = !selectedAction ? 'hint' : 'title';\n  const path = without(selectedAction.split('.'), 'controllers');\n  const controllerRoutes = get(routes, path[0]);\n  const displayedRoutes = isEmpty(controllerRoutes)\n    ? []\n    : controllerRoutes.filter(o => toLower(o.handler) === toLower(takeRight(path, 2).join('.')));\n\n  const inputName = `${selectedAction}.policy`;\n\n  const value = useMemo(() => {\n    return get(modifiedData, inputName, '');\n  }, [inputName, modifiedData]);\n\n  return (\n    <Wrapper className=\"col-md-5\">\n      <Sticky className=\"container-fluid\">\n        <div className=\"row\">\n          <Header className=\"col-md-12\">\n            <FormattedMessage id={`${baseTitle}.${title}`} />\n          </Header>\n          {selectedAction && (\n            <>\n              <SizedInput\n                type=\"select\"\n                name={inputName}\n                onChange={onChange}\n                label={getTrad('Policies.InputSelect.label')}\n                options={policies}\n                value={value}\n              />\n\n              <div className=\"row\">\n                <Col size={{ xs: 12 }}>\n                  {displayedRoutes.map((route, key) => (\n                    // eslint-disable-next-line react/no-array-index-key\n                    <BoundRoute key={key} route={route} />\n                  ))}\n                </Col>\n              </div>\n            </>\n          )}\n        </div>\n      </Sticky>\n    </Wrapper>\n  );\n};\n\nexport default Policies;\n"]},"metadata":{},"sourceType":"script"}