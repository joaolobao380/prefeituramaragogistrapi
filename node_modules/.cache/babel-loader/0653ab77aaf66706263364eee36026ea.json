{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _immutable = require(\"immutable\");\n\nvar _package = _interopRequireDefault(require(\"../../../../package.json\"));\n\nvar _constants = require(\"./constants\");\n\n// Shared constants\nvar packageVersion = _package[\"default\"].version;\nvar initialState = (0, _immutable.fromJS)({\n  appInfos: {},\n  autoReload: false,\n  blockApp: false,\n  currentEnvironment: 'development',\n  hasAdminUser: false,\n  hasUserPlugin: true,\n  isLoading: true,\n  overlayBlockerData: null,\n  plugins: {},\n  showGlobalAppBlocker: true,\n  strapiVersion: packageVersion,\n  uuid: false\n});\n\nfunction appReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case _constants.DISABLE_GLOBAL_OVERLAY_BLOCKER:\n      return state.set('showGlobalAppBlocker', false);\n\n    case _constants.ENABLE_GLOBAL_OVERLAY_BLOCKER:\n      return state.set('showGlobalAppBlocker', true);\n\n    case _constants.FREEZE_APP:\n      return state.set('blockApp', true).update('overlayBlockerData', function () {\n        if (action.data) {\n          return action.data;\n        }\n\n        return null;\n      });\n\n    case _constants.GET_INFOS_DATA_SUCCEEDED:\n      {\n        if (action.data.strapiVersion !== state.get('strapiVersion')) {\n          console.error(\"It seems that the built version \".concat(packageVersion, \" is different than your project's one (\").concat(action.data.strapiVersion, \")\"));\n          console.error('Please delete your `.cache` and `build` folders and restart your app');\n        }\n\n        return state.update('appInfos', function () {\n          return action.data;\n        }) // Keep this for plugins legacy\n        .update('autoReload', function () {\n          return action.data.autoReload;\n        }).update('currentEnvironment', function () {\n          return action.data.currentEnvironment;\n        });\n      }\n\n    case _constants.GET_DATA_SUCCEEDED:\n      {\n        return state.update('isLoading', function () {\n          return false;\n        }).update('hasAdminUser', function () {\n          return action.data.hasAdmin;\n        }).update('uuid', function () {\n          return action.data.uuid;\n        });\n      }\n\n    case _constants.PLUGIN_LOADED:\n      return state.setIn(['plugins', action.plugin.id], (0, _immutable.fromJS)(action.plugin));\n\n    case _constants.UPDATE_PLUGIN:\n      return state.setIn(['plugins', action.pluginId, action.updatedKey], (0, _immutable.fromJS)(action.updatedValue));\n\n    case _constants.PLUGIN_DELETED:\n      return state.deleteIn(['plugins', action.plugin]);\n\n    case _constants.UNFREEZE_APP:\n      return state.set('blockApp', false).set('overlayBlockerData', null);\n\n    default:\n      return state;\n  }\n}\n\nvar _default = appReducer;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["/Users/joaovictorlobao/prefeituramaragogistrapi/.cache/admin/src/containers/App/reducer.js"],"names":["packageVersion","packageJSON","version","initialState","appInfos","autoReload","blockApp","currentEnvironment","hasAdminUser","hasUserPlugin","isLoading","overlayBlockerData","plugins","showGlobalAppBlocker","strapiVersion","uuid","appReducer","state","action","type","DISABLE_GLOBAL_OVERLAY_BLOCKER","set","ENABLE_GLOBAL_OVERLAY_BLOCKER","FREEZE_APP","update","data","GET_INFOS_DATA_SUCCEEDED","get","console","error","GET_DATA_SUCCEEDED","hasAdmin","PLUGIN_LOADED","setIn","plugin","id","UPDATE_PLUGIN","pluginId","updatedKey","updatedValue","PLUGIN_DELETED","deleteIn","UNFREEZE_APP"],"mappings":";;;;;;;;;AACA;;AACA;;AAEA;;AAJA;AAgBA,IAAMA,cAAc,GAAGC,oBAAYC,OAAnC;AACA,IAAMC,YAAY,GAAG,uBAAO;AAC1BC,EAAAA,QAAQ,EAAE,EADgB;AAE1BC,EAAAA,UAAU,EAAE,KAFc;AAG1BC,EAAAA,QAAQ,EAAE,KAHgB;AAI1BC,EAAAA,kBAAkB,EAAE,aAJM;AAK1BC,EAAAA,YAAY,EAAE,KALY;AAM1BC,EAAAA,aAAa,EAAE,IANW;AAO1BC,EAAAA,SAAS,EAAE,IAPe;AAQ1BC,EAAAA,kBAAkB,EAAE,IARM;AAS1BC,EAAAA,OAAO,EAAE,EATiB;AAU1BC,EAAAA,oBAAoB,EAAE,IAVI;AAW1BC,EAAAA,aAAa,EAAEd,cAXW;AAY1Be,EAAAA,IAAI,EAAE;AAZoB,CAAP,CAArB;;AAeA,SAASC,UAAT,GAAkD;AAAA,MAA9BC,KAA8B,uEAAtBd,YAAsB;AAAA,MAARe,MAAQ;;AAChD,UAAQA,MAAM,CAACC,IAAf;AACE,SAAKC,yCAAL;AACE,aAAOH,KAAK,CAACI,GAAN,CAAU,sBAAV,EAAkC,KAAlC,CAAP;;AACF,SAAKC,wCAAL;AACE,aAAOL,KAAK,CAACI,GAAN,CAAU,sBAAV,EAAkC,IAAlC,CAAP;;AACF,SAAKE,qBAAL;AACE,aAAON,KAAK,CAACI,GAAN,CAAU,UAAV,EAAsB,IAAtB,EAA4BG,MAA5B,CAAmC,oBAAnC,EAAyD,YAAM;AACpE,YAAIN,MAAM,CAACO,IAAX,EAAiB;AACf,iBAAOP,MAAM,CAACO,IAAd;AACD;;AAED,eAAO,IAAP;AACD,OANM,CAAP;;AAOF,SAAKC,mCAAL;AAA+B;AAC7B,YAAIR,MAAM,CAACO,IAAP,CAAYX,aAAZ,KAA8BG,KAAK,CAACU,GAAN,CAAU,eAAV,CAAlC,EAA8D;AAC5DC,UAAAA,OAAO,CAACC,KAAR,2CACqC7B,cADrC,oDAC6FkB,MAAM,CAACO,IAAP,CAAYX,aADzG;AAGAc,UAAAA,OAAO,CAACC,KAAR,CAAc,sEAAd;AACD;;AAED,eACEZ,KAAK,CACFO,MADH,CACU,UADV,EACsB;AAAA,iBAAMN,MAAM,CAACO,IAAb;AAAA,SADtB,EAEE;AAFF,SAGGD,MAHH,CAGU,YAHV,EAGwB;AAAA,iBAAMN,MAAM,CAACO,IAAP,CAAYpB,UAAlB;AAAA,SAHxB,EAIGmB,MAJH,CAIU,oBAJV,EAIgC;AAAA,iBAAMN,MAAM,CAACO,IAAP,CAAYlB,kBAAlB;AAAA,SAJhC,CADF;AAOD;;AACD,SAAKuB,6BAAL;AAAyB;AACvB,eAAOb,KAAK,CACTO,MADI,CACG,WADH,EACgB;AAAA,iBAAM,KAAN;AAAA,SADhB,EAEJA,MAFI,CAEG,cAFH,EAEmB;AAAA,iBAAMN,MAAM,CAACO,IAAP,CAAYM,QAAlB;AAAA,SAFnB,EAGJP,MAHI,CAGG,MAHH,EAGW;AAAA,iBAAMN,MAAM,CAACO,IAAP,CAAYV,IAAlB;AAAA,SAHX,CAAP;AAID;;AACD,SAAKiB,wBAAL;AACE,aAAOf,KAAK,CAACgB,KAAN,CAAY,CAAC,SAAD,EAAYf,MAAM,CAACgB,MAAP,CAAcC,EAA1B,CAAZ,EAA2C,uBAAOjB,MAAM,CAACgB,MAAd,CAA3C,CAAP;;AACF,SAAKE,wBAAL;AACE,aAAOnB,KAAK,CAACgB,KAAN,CACL,CAAC,SAAD,EAAYf,MAAM,CAACmB,QAAnB,EAA6BnB,MAAM,CAACoB,UAApC,CADK,EAEL,uBAAOpB,MAAM,CAACqB,YAAd,CAFK,CAAP;;AAIF,SAAKC,yBAAL;AACE,aAAOvB,KAAK,CAACwB,QAAN,CAAe,CAAC,SAAD,EAAYvB,MAAM,CAACgB,MAAnB,CAAf,CAAP;;AACF,SAAKQ,uBAAL;AACE,aAAOzB,KAAK,CAACI,GAAN,CAAU,UAAV,EAAsB,KAAtB,EAA6BA,GAA7B,CAAiC,oBAAjC,EAAuD,IAAvD,CAAP;;AAEF;AACE,aAAOJ,KAAP;AAhDJ;AAkDD;;eAEcD,U","sourcesContent":["// Shared constants\nimport { fromJS } from 'immutable';\nimport packageJSON from '../../../../package.json';\n\nimport {\n  DISABLE_GLOBAL_OVERLAY_BLOCKER,\n  ENABLE_GLOBAL_OVERLAY_BLOCKER,\n  FREEZE_APP,\n  GET_INFOS_DATA_SUCCEEDED,\n  GET_DATA_SUCCEEDED,\n  PLUGIN_DELETED,\n  PLUGIN_LOADED,\n  UNFREEZE_APP,\n  UPDATE_PLUGIN,\n} from './constants';\n\nconst packageVersion = packageJSON.version;\nconst initialState = fromJS({\n  appInfos: {},\n  autoReload: false,\n  blockApp: false,\n  currentEnvironment: 'development',\n  hasAdminUser: false,\n  hasUserPlugin: true,\n  isLoading: true,\n  overlayBlockerData: null,\n  plugins: {},\n  showGlobalAppBlocker: true,\n  strapiVersion: packageVersion,\n  uuid: false,\n});\n\nfunction appReducer(state = initialState, action) {\n  switch (action.type) {\n    case DISABLE_GLOBAL_OVERLAY_BLOCKER:\n      return state.set('showGlobalAppBlocker', false);\n    case ENABLE_GLOBAL_OVERLAY_BLOCKER:\n      return state.set('showGlobalAppBlocker', true);\n    case FREEZE_APP:\n      return state.set('blockApp', true).update('overlayBlockerData', () => {\n        if (action.data) {\n          return action.data;\n        }\n\n        return null;\n      });\n    case GET_INFOS_DATA_SUCCEEDED: {\n      if (action.data.strapiVersion !== state.get('strapiVersion')) {\n        console.error(\n          `It seems that the built version ${packageVersion} is different than your project's one (${action.data.strapiVersion})`\n        );\n        console.error('Please delete your `.cache` and `build` folders and restart your app');\n      }\n\n      return (\n        state\n          .update('appInfos', () => action.data)\n          // Keep this for plugins legacy\n          .update('autoReload', () => action.data.autoReload)\n          .update('currentEnvironment', () => action.data.currentEnvironment)\n      );\n    }\n    case GET_DATA_SUCCEEDED: {\n      return state\n        .update('isLoading', () => false)\n        .update('hasAdminUser', () => action.data.hasAdmin)\n        .update('uuid', () => action.data.uuid);\n    }\n    case PLUGIN_LOADED:\n      return state.setIn(['plugins', action.plugin.id], fromJS(action.plugin));\n    case UPDATE_PLUGIN:\n      return state.setIn(\n        ['plugins', action.pluginId, action.updatedKey],\n        fromJS(action.updatedValue)\n      );\n    case PLUGIN_DELETED:\n      return state.deleteIn(['plugins', action.plugin]);\n    case UNFREEZE_APP:\n      return state.set('blockApp', false).set('overlayBlockerData', null);\n\n    default:\n      return state;\n  }\n}\n\nexport default appReducer;\n"]},"metadata":{},"sourceType":"script"}