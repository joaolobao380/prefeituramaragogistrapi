{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _typeof = require(\"@babel/runtime/helpers/typeof\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _reactRouterDom = require(\"react-router-dom\");\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _strapiHelperPlugin = require(\"strapi-helper-plugin\");\n\nvar _pluginId = _interopRequireDefault(require(\"../../pluginId\"));\n\nvar _permissions = _interopRequireDefault(require(\"../../permissions\"));\n\nvar _DynamicComponentCard = _interopRequireDefault(require(\"../DynamicComponentCard\"));\n\nvar _Tooltip = _interopRequireDefault(require(\"./Tooltip\"));\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { \"default\": obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj[\"default\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nvar DynamicComponent = function DynamicComponent(_ref) {\n  var componentUid = _ref.componentUid,\n      friendlyName = _ref.friendlyName,\n      icon = _ref.icon,\n      setIsOverDynamicZone = _ref.setIsOverDynamicZone;\n\n  var _useState = (0, _react.useState)(false),\n      _useState2 = (0, _slicedToArray2[\"default\"])(_useState, 2),\n      isOver = _useState2[0],\n      setIsOver = _useState2[1];\n\n  var _useState3 = (0, _react.useState)({\n    isLoading: true,\n    canAccess: false\n  }),\n      _useState4 = (0, _slicedToArray2[\"default\"])(_useState3, 2),\n      _useState4$ = _useState4[0],\n      isLoading = _useState4$.isLoading,\n      canAccess = _useState4$.canAccess,\n      setState = _useState4[1];\n\n  var _useHistory = (0, _reactRouterDom.useHistory)(),\n      push = _useHistory.push;\n\n  var _useUser = (0, _strapiHelperPlugin.useUser)(),\n      userPermissions = _useUser.userPermissions;\n\n  (0, _react.useEffect)(function () {\n    var checkPermission = /*#__PURE__*/function () {\n      var _ref2 = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee() {\n        var _canAccess;\n\n        return _regenerator[\"default\"].wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                _context.next = 3;\n                return (0, _strapiHelperPlugin.hasPermissions)(userPermissions, _permissions[\"default\"].componentsConfigurations);\n\n              case 3:\n                _canAccess = _context.sent;\n                setState({\n                  isLoading: false,\n                  canAccess: _canAccess\n                });\n                _context.next = 10;\n                break;\n\n              case 7:\n                _context.prev = 7;\n                _context.t0 = _context[\"catch\"](0);\n                setState({\n                  isLoading: false\n                });\n\n              case 10:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[0, 7]]);\n      }));\n\n      return function checkPermission() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    checkPermission(); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  var handleMouseEvent = function handleMouseEvent() {\n    setIsOverDynamicZone(function (v) {\n      return !v;\n    });\n    setIsOver(function (v) {\n      return !v;\n    });\n  };\n\n  return /*#__PURE__*/_react[\"default\"].createElement(_DynamicComponentCard[\"default\"], {\n    componentUid: componentUid,\n    friendlyName: friendlyName,\n    icon: icon,\n    isOver: isOver,\n    onClick: function onClick() {\n      if (!isLoading && canAccess) {\n        push(\"/plugins/\".concat(_pluginId[\"default\"], \"/components/\").concat(componentUid, \"/configurations/edit\"));\n      }\n    },\n    onMouseEvent: handleMouseEvent,\n    tradId: \"components.DraggableAttr.edit\"\n  }, /*#__PURE__*/_react[\"default\"].createElement(_Tooltip[\"default\"], {\n    isOver: isOver\n  }, componentUid));\n};\n\nDynamicComponent.defaultProps = {\n  friendlyName: '',\n  icon: 'smile'\n};\nDynamicComponent.propTypes = {\n  componentUid: _propTypes[\"default\"].string.isRequired,\n  friendlyName: _propTypes[\"default\"].string,\n  icon: _propTypes[\"default\"].string,\n  setIsOverDynamicZone: _propTypes[\"default\"].func.isRequired\n};\nvar _default = DynamicComponent;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["/Users/joaovictorlobao/prefeituramaragogistrapi/.cache/plugins/strapi-plugin-content-manager/admin/src/components/DraggedFieldWithPreview/DynamicComponent.js"],"names":["DynamicComponent","componentUid","friendlyName","icon","setIsOverDynamicZone","isOver","setIsOver","isLoading","canAccess","setState","push","userPermissions","checkPermission","pluginPermissions","componentsConfigurations","handleMouseEvent","v","pluginId","defaultProps","propTypes","PropTypes","string","isRequired","func"],"mappings":";;;;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;;;AAEA,IAAMA,gBAAgB,GAAG,SAAnBA,gBAAmB,OAAgE;AAAA,MAA7DC,YAA6D,QAA7DA,YAA6D;AAAA,MAA/CC,YAA+C,QAA/CA,YAA+C;AAAA,MAAjCC,IAAiC,QAAjCA,IAAiC;AAAA,MAA3BC,oBAA2B,QAA3BA,oBAA2B;;AACvF,kBAA4B,qBAAS,KAAT,CAA5B;AAAA;AAAA,MAAOC,MAAP;AAAA,MAAeC,SAAf;;AACA,mBAA6C,qBAAS;AAAEC,IAAAA,SAAS,EAAE,IAAb;AAAmBC,IAAAA,SAAS,EAAE;AAA9B,GAAT,CAA7C;AAAA;AAAA;AAAA,MAASD,SAAT,eAASA,SAAT;AAAA,MAAoBC,SAApB,eAAoBA,SAApB;AAAA,MAAiCC,QAAjC;;AACA,oBAAiB,iCAAjB;AAAA,MAAQC,IAAR,eAAQA,IAAR;;AACA,iBAA4B,kCAA5B;AAAA,MAAQC,eAAR,YAAQA,eAAR;;AAEA,wBAAU,YAAM;AACd,QAAMC,eAAe;AAAA,gGAAG;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAEI,wCACtBD,eADsB,EAEtBE,wBAAkBC,wBAFI,CAFJ;;AAAA;AAEdN,gBAAAA,UAFc;AAOpBC,gBAAAA,QAAQ,CAAC;AAAEF,kBAAAA,SAAS,EAAE,KAAb;AAAoBC,kBAAAA,SAAS,EAATA;AAApB,iBAAD,CAAR;AAPoB;AAAA;;AAAA;AAAA;AAAA;AASpBC,gBAAAA,QAAQ,CAAC;AAAEF,kBAAAA,SAAS,EAAE;AAAb,iBAAD,CAAR;;AAToB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAH;;AAAA,sBAAfK,eAAe;AAAA;AAAA;AAAA,OAArB;;AAaAA,IAAAA,eAAe,GAdD,CAed;AACD,GAhBD,EAgBG,EAhBH;;AAkBA,MAAMG,gBAAgB,GAAG,SAAnBA,gBAAmB,GAAM;AAC7BX,IAAAA,oBAAoB,CAAC,UAAAY,CAAC;AAAA,aAAI,CAACA,CAAL;AAAA,KAAF,CAApB;AACAV,IAAAA,SAAS,CAAC,UAAAU,CAAC;AAAA,aAAI,CAACA,CAAL;AAAA,KAAF,CAAT;AACD,GAHD;;AAKA,sBACE,gCAAC,gCAAD;AACE,IAAA,YAAY,EAAEf,YADhB;AAEE,IAAA,YAAY,EAAEC,YAFhB;AAGE,IAAA,IAAI,EAAEC,IAHR;AAIE,IAAA,MAAM,EAAEE,MAJV;AAKE,IAAA,OAAO,EAAE,mBAAM;AACb,UAAI,CAACE,SAAD,IAAcC,SAAlB,EAA6B;AAC3BE,QAAAA,IAAI,oBAAaO,oBAAb,yBAAoChB,YAApC,0BAAJ;AACD;AACF,KATH;AAUE,IAAA,YAAY,EAAEc,gBAVhB;AAWE,IAAA,MAAM,EAAC;AAXT,kBAaE,gCAAC,mBAAD;AAAS,IAAA,MAAM,EAAEV;AAAjB,KAA0BJ,YAA1B,CAbF,CADF;AAiBD,CA9CD;;AAgDAD,gBAAgB,CAACkB,YAAjB,GAAgC;AAC9BhB,EAAAA,YAAY,EAAE,EADgB;AAE9BC,EAAAA,IAAI,EAAE;AAFwB,CAAhC;AAKAH,gBAAgB,CAACmB,SAAjB,GAA6B;AAC3BlB,EAAAA,YAAY,EAAEmB,sBAAUC,MAAV,CAAiBC,UADJ;AAE3BpB,EAAAA,YAAY,EAAEkB,sBAAUC,MAFG;AAG3BlB,EAAAA,IAAI,EAAEiB,sBAAUC,MAHW;AAI3BjB,EAAAA,oBAAoB,EAAEgB,sBAAUG,IAAV,CAAeD;AAJV,CAA7B;eAOetB,gB","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport { hasPermissions, useUser } from 'strapi-helper-plugin';\nimport pluginId from '../../pluginId';\nimport pluginPermissions from '../../permissions';\nimport DynamicComponentCard from '../DynamicComponentCard';\nimport Tooltip from './Tooltip';\n\nconst DynamicComponent = ({ componentUid, friendlyName, icon, setIsOverDynamicZone }) => {\n  const [isOver, setIsOver] = useState(false);\n  const [{ isLoading, canAccess }, setState] = useState({ isLoading: true, canAccess: false });\n  const { push } = useHistory();\n  const { userPermissions } = useUser();\n\n  useEffect(() => {\n    const checkPermission = async () => {\n      try {\n        const canAccess = await hasPermissions(\n          userPermissions,\n          pluginPermissions.componentsConfigurations\n        );\n\n        setState({ isLoading: false, canAccess });\n      } catch (err) {\n        setState({ isLoading: false });\n      }\n    };\n\n    checkPermission();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const handleMouseEvent = () => {\n    setIsOverDynamicZone(v => !v);\n    setIsOver(v => !v);\n  };\n\n  return (\n    <DynamicComponentCard\n      componentUid={componentUid}\n      friendlyName={friendlyName}\n      icon={icon}\n      isOver={isOver}\n      onClick={() => {\n        if (!isLoading && canAccess) {\n          push(`/plugins/${pluginId}/components/${componentUid}/configurations/edit`);\n        }\n      }}\n      onMouseEvent={handleMouseEvent}\n      tradId=\"components.DraggableAttr.edit\"\n    >\n      <Tooltip isOver={isOver}>{componentUid}</Tooltip>\n    </DynamicComponentCard>\n  );\n};\n\nDynamicComponent.defaultProps = {\n  friendlyName: '',\n  icon: 'smile',\n};\n\nDynamicComponent.propTypes = {\n  componentUid: PropTypes.string.isRequired,\n  friendlyName: PropTypes.string,\n  icon: PropTypes.string,\n  setIsOverDynamicZone: PropTypes.func.isRequired,\n};\n\nexport default DynamicComponent;\n"]},"metadata":{},"sourceType":"script"}