{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _react = require(\"react\");\n\nvar _strapiHelperPlugin = require(\"strapi-helper-plugin\");\n\nvar _reactRedux = require(\"react-redux\");\n\nvar _utils = require(\"../../utils\");\n\nvar _constants = require(\"../constants\");\n\nvar deleteLocale = /*#__PURE__*/function () {\n  var _ref = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee(id) {\n    var data;\n    return _regenerator[\"default\"].wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return (0, _strapiHelperPlugin.request)(\"/i18n/locales/\".concat(id), {\n              method: 'DELETE'\n            });\n\n          case 3:\n            data = _context.sent;\n            strapi.notification.toggle({\n              type: 'success',\n              message: {\n                id: (0, _utils.getTrad)('Settings.locales.modal.delete.success')\n              }\n            });\n            return _context.abrupt(\"return\", data);\n\n          case 8:\n            _context.prev = 8;\n            _context.t0 = _context[\"catch\"](0);\n            strapi.notification.toggle({\n              type: 'warning',\n              message: {\n                id: 'notification.error'\n              }\n            });\n            return _context.abrupt(\"return\", _context.t0);\n\n          case 12:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[0, 8]]);\n  }));\n\n  return function deleteLocale(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar useDeleteLocale = function useDeleteLocale() {\n  var _useState = (0, _react.useState)(false),\n      _useState2 = (0, _slicedToArray2[\"default\"])(_useState, 2),\n      isLoading = _useState2[0],\n      setLoading = _useState2[1];\n\n  var dispatch = (0, _reactRedux.useDispatch)();\n\n  var removeLocale = /*#__PURE__*/function () {\n    var _ref2 = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee2(id) {\n      return _regenerator[\"default\"].wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              setLoading(true);\n              _context2.next = 3;\n              return deleteLocale(id);\n\n            case 3:\n              dispatch({\n                type: _constants.DELETE_LOCALE,\n                id: id\n              });\n              setLoading(false);\n\n            case 5:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function removeLocale(_x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return {\n    isDeleting: isLoading,\n    deleteLocale: removeLocale\n  };\n};\n\nvar _default = useDeleteLocale;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["/Users/joaovictorlobao/prefeituramaragogistrapi/.cache/plugins/strapi-plugin-i18n/admin/src/hooks/useDeleteLocale/index.js"],"names":["deleteLocale","id","method","data","strapi","notification","toggle","type","message","useDeleteLocale","isLoading","setLoading","dispatch","removeLocale","DELETE_LOCALE","isDeleting"],"mappings":";;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AAEA,IAAMA,YAAY;AAAA,2FAAG,iBAAMC,EAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAEE,yDAAyBA,EAAzB,GAA+B;AAChDC,cAAAA,MAAM,EAAE;AADwC,aAA/B,CAFF;;AAAA;AAEXC,YAAAA,IAFW;AAMjBC,YAAAA,MAAM,CAACC,YAAP,CAAoBC,MAApB,CAA2B;AACzBC,cAAAA,IAAI,EAAE,SADmB;AAEzBC,cAAAA,OAAO,EAAE;AAAEP,gBAAAA,EAAE,EAAE,oBAAQ,uCAAR;AAAN;AAFgB,aAA3B;AANiB,6CAWVE,IAXU;;AAAA;AAAA;AAAA;AAajBC,YAAAA,MAAM,CAACC,YAAP,CAAoBC,MAApB,CAA2B;AACzBC,cAAAA,IAAI,EAAE,SADmB;AAEzBC,cAAAA,OAAO,EAAE;AAAEP,gBAAAA,EAAE,EAAE;AAAN;AAFgB,aAA3B;AAbiB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAZD,YAAY;AAAA;AAAA;AAAA,GAAlB;;AAsBA,IAAMS,eAAe,GAAG,SAAlBA,eAAkB,GAAM;AAC5B,kBAAgC,qBAAS,KAAT,CAAhC;AAAA;AAAA,MAAOC,SAAP;AAAA,MAAkBC,UAAlB;;AACA,MAAMC,QAAQ,GAAG,8BAAjB;;AAEA,MAAMC,YAAY;AAAA,8FAAG,kBAAMZ,EAAN;AAAA;AAAA;AAAA;AAAA;AACnBU,cAAAA,UAAU,CAAC,IAAD,CAAV;AADmB;AAAA,qBAGbX,YAAY,CAACC,EAAD,CAHC;;AAAA;AAKnBW,cAAAA,QAAQ,CAAC;AAAEL,gBAAAA,IAAI,EAAEO,wBAAR;AAAuBb,gBAAAA,EAAE,EAAFA;AAAvB,eAAD,CAAR;AACAU,cAAAA,UAAU,CAAC,KAAD,CAAV;;AANmB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAZE,YAAY;AAAA;AAAA;AAAA,KAAlB;;AASA,SAAO;AAAEE,IAAAA,UAAU,EAAEL,SAAd;AAAyBV,IAAAA,YAAY,EAAEa;AAAvC,GAAP;AACD,CAdD;;eAgBeJ,e","sourcesContent":["import { useState } from 'react';\nimport { request } from 'strapi-helper-plugin';\nimport { useDispatch } from 'react-redux';\nimport { getTrad } from '../../utils';\nimport { DELETE_LOCALE } from '../constants';\n\nconst deleteLocale = async id => {\n  try {\n    const data = await request(`/i18n/locales/${id}`, {\n      method: 'DELETE',\n    });\n\n    strapi.notification.toggle({\n      type: 'success',\n      message: { id: getTrad('Settings.locales.modal.delete.success') },\n    });\n\n    return data;\n  } catch (e) {\n    strapi.notification.toggle({\n      type: 'warning',\n      message: { id: 'notification.error' },\n    });\n\n    return e;\n  }\n};\n\nconst useDeleteLocale = () => {\n  const [isLoading, setLoading] = useState(false);\n  const dispatch = useDispatch();\n\n  const removeLocale = async id => {\n    setLoading(true);\n\n    await deleteLocale(id);\n\n    dispatch({ type: DELETE_LOCALE, id });\n    setLoading(false);\n  };\n\n  return { isDeleting: isLoading, deleteLocale: removeLocale };\n};\n\nexport default useDeleteLocale;\n"]},"metadata":{},"sourceType":"script"}