{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.initialState = exports[\"default\"] = void 0;\n\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _immutable = require(\"immutable\");\n\nvar initialState = (0, _immutable.fromJS)({\n  attributes: {},\n  initialData: [],\n  modifiedData: []\n});\nexports.initialState = initialState;\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case 'ADD_FILTER':\n      return state.update('modifiedData', function (list) {\n        return list.push((0, _immutable.fromJS)(action.filter));\n      });\n\n    case 'ON_CHANGE':\n      {\n        var _action$keys = (0, _slicedToArray2[\"default\"])(action.keys, 2),\n            index = _action$keys[0],\n            key = _action$keys[1];\n\n        return state.updateIn(['modifiedData'].concat((0, _toConsumableArray2[\"default\"])(action.keys)), function () {\n          if (action.value && action.value._isAMomentObject === true) {\n            return action.value.toISOString();\n          }\n\n          return action.value;\n        }).updateIn(['modifiedData', index, 'value'], function (value) {\n          if (key === 'name') {\n            var attribute = state.getIn(['attributes', action.value]);\n            var attributeType = attribute.get('type');\n\n            if (attributeType === 'boolean') {\n              return 'true';\n            }\n\n            if (attributeType === 'enumeration') {\n              return attribute.getIn(['enum', '0']) || '';\n            }\n\n            return '';\n          }\n\n          return value;\n        });\n      }\n\n    case 'REMOVE_FILTER':\n      return state.removeIn(['modifiedData', action.index]);\n\n    case 'RESET_FILTERS':\n      return initialState;\n\n    case 'SET_FILTERS':\n      return state.update('attributes', function () {\n        return (0, _immutable.fromJS)(action.attributes);\n      }).update('initialData', function () {\n        return (0, _immutable.fromJS)(action.initialFilters);\n      }).update('modifiedData', function () {\n        return (0, _immutable.fromJS)(action.initialFilters);\n      });\n\n    default:\n      return state;\n  }\n}\n\nvar _default = reducer;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["/Users/joaovictorlobao/prefeituramaragogistrapi/.cache/plugins/strapi-plugin-content-manager/admin/src/components/FilterPicker/reducer.js"],"names":["initialState","attributes","initialData","modifiedData","reducer","state","action","type","update","list","push","filter","keys","index","key","updateIn","value","_isAMomentObject","toISOString","attribute","getIn","attributeType","get","removeIn","initialFilters"],"mappings":";;;;;;;;;;;;;AAAA;;AAEA,IAAMA,YAAY,GAAG,uBAAO;AAC1BC,EAAAA,UAAU,EAAE,EADc;AAE1BC,EAAAA,WAAW,EAAE,EAFa;AAG1BC,EAAAA,YAAY,EAAE;AAHY,CAAP,CAArB;;;AAMA,SAASC,OAAT,CAAiBC,KAAjB,EAAwBC,MAAxB,EAAgC;AAC9B,UAAQA,MAAM,CAACC,IAAf;AACE,SAAK,YAAL;AACE,aAAOF,KAAK,CAACG,MAAN,CAAa,cAAb,EAA6B,UAAAC,IAAI;AAAA,eAAIA,IAAI,CAACC,IAAL,CAAU,uBAAOJ,MAAM,CAACK,MAAd,CAAV,CAAJ;AAAA,OAAjC,CAAP;;AACF,SAAK,WAAL;AAAkB;AAChB,2DAAqBL,MAAM,CAACM,IAA5B;AAAA,YAAOC,KAAP;AAAA,YAAcC,GAAd;;AAEA,eAAOT,KAAK,CACTU,QADI,EACM,cADN,6CACyBT,MAAM,CAACM,IADhC,IACuC,YAAM;AAChD,cAAIN,MAAM,CAACU,KAAP,IAAgBV,MAAM,CAACU,KAAP,CAAaC,gBAAb,KAAkC,IAAtD,EAA4D;AAC1D,mBAAOX,MAAM,CAACU,KAAP,CAAaE,WAAb,EAAP;AACD;;AAED,iBAAOZ,MAAM,CAACU,KAAd;AACD,SAPI,EAQJD,QARI,CAQK,CAAC,cAAD,EAAiBF,KAAjB,EAAwB,OAAxB,CARL,EAQuC,UAAAG,KAAK,EAAI;AACnD,cAAIF,GAAG,KAAK,MAAZ,EAAoB;AAClB,gBAAMK,SAAS,GAAGd,KAAK,CAACe,KAAN,CAAY,CAAC,YAAD,EAAed,MAAM,CAACU,KAAtB,CAAZ,CAAlB;AACA,gBAAMK,aAAa,GAAGF,SAAS,CAACG,GAAV,CAAc,MAAd,CAAtB;;AAEA,gBAAID,aAAa,KAAK,SAAtB,EAAiC;AAC/B,qBAAO,MAAP;AACD;;AAED,gBAAIA,aAAa,KAAK,aAAtB,EAAqC;AACnC,qBAAOF,SAAS,CAACC,KAAV,CAAgB,CAAC,MAAD,EAAS,GAAT,CAAhB,KAAkC,EAAzC;AACD;;AAED,mBAAO,EAAP;AACD;;AAED,iBAAOJ,KAAP;AACD,SAzBI,CAAP;AA0BD;;AACD,SAAK,eAAL;AACE,aAAOX,KAAK,CAACkB,QAAN,CAAe,CAAC,cAAD,EAAiBjB,MAAM,CAACO,KAAxB,CAAf,CAAP;;AACF,SAAK,eAAL;AACE,aAAOb,YAAP;;AACF,SAAK,aAAL;AACE,aAAOK,KAAK,CACTG,MADI,CACG,YADH,EACiB;AAAA,eAAM,uBAAOF,MAAM,CAACL,UAAd,CAAN;AAAA,OADjB,EAEJO,MAFI,CAEG,aAFH,EAEkB;AAAA,eAAM,uBAAOF,MAAM,CAACkB,cAAd,CAAN;AAAA,OAFlB,EAGJhB,MAHI,CAGG,cAHH,EAGmB;AAAA,eAAM,uBAAOF,MAAM,CAACkB,cAAd,CAAN;AAAA,OAHnB,CAAP;;AAIF;AACE,aAAOnB,KAAP;AA3CJ;AA6CD;;eAEcD,O","sourcesContent":["import { fromJS } from 'immutable';\n\nconst initialState = fromJS({\n  attributes: {},\n  initialData: [],\n  modifiedData: [],\n});\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case 'ADD_FILTER':\n      return state.update('modifiedData', list => list.push(fromJS(action.filter)));\n    case 'ON_CHANGE': {\n      const [index, key] = action.keys;\n\n      return state\n        .updateIn(['modifiedData', ...action.keys], () => {\n          if (action.value && action.value._isAMomentObject === true) {\n            return action.value.toISOString();\n          }\n\n          return action.value;\n        })\n        .updateIn(['modifiedData', index, 'value'], value => {\n          if (key === 'name') {\n            const attribute = state.getIn(['attributes', action.value]);\n            const attributeType = attribute.get('type');\n\n            if (attributeType === 'boolean') {\n              return 'true';\n            }\n\n            if (attributeType === 'enumeration') {\n              return attribute.getIn(['enum', '0']) || '';\n            }\n\n            return '';\n          }\n\n          return value;\n        });\n    }\n    case 'REMOVE_FILTER':\n      return state.removeIn(['modifiedData', action.index]);\n    case 'RESET_FILTERS':\n      return initialState;\n    case 'SET_FILTERS':\n      return state\n        .update('attributes', () => fromJS(action.attributes))\n        .update('initialData', () => fromJS(action.initialFilters))\n        .update('modifiedData', () => fromJS(action.initialFilters));\n    default:\n      return state;\n  }\n}\n\nexport default reducer;\nexport { initialState };\n"]},"metadata":{},"sourceType":"script"}