{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _lodash = require(\"lodash\");\n\nvar createDefaultForm = function createDefaultForm(attributes, allComponentsSchema) {\n  return Object.keys(attributes).reduce(function (acc, current) {\n    var attribute = (0, _lodash.get)(attributes, [current], {});\n    var defaultValue = attribute[\"default\"],\n        component = attribute.component,\n        type = attribute.type,\n        required = attribute.required,\n        min = attribute.min,\n        repeatable = attribute.repeatable;\n\n    if (type === 'json') {\n      acc[current] = null;\n    }\n\n    if (type === 'json' && required === true) {\n      acc[current] = {};\n    }\n\n    if (defaultValue !== undefined) {\n      acc[current] = defaultValue;\n    }\n\n    if (type === 'component') {\n      var currentComponentSchema = (0, _lodash.get)(allComponentsSchema, [component, 'attributes'], {});\n      var currentComponentDefaultForm = createDefaultForm(currentComponentSchema, allComponentsSchema);\n\n      if (required === true) {\n        acc[current] = repeatable === true ? [] : currentComponentDefaultForm;\n      }\n\n      if (min && repeatable === true && required) {\n        acc[current] = [];\n\n        for (var i = 0; i < min; i += 1) {\n          acc[current].push(currentComponentDefaultForm);\n        }\n      }\n    }\n\n    if (type === 'dynamiczone') {\n      if (required === true) {\n        acc[current] = [];\n      }\n    }\n\n    return acc;\n  }, {});\n};\n\nvar _default = createDefaultForm;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["/Users/joaovictorlobao/prefeituramaragogistrapi/.cache/plugins/strapi-plugin-content-manager/admin/src/utils/createDefaultForm.js"],"names":["createDefaultForm","attributes","allComponentsSchema","Object","keys","reduce","acc","current","attribute","defaultValue","component","type","required","min","repeatable","undefined","currentComponentSchema","currentComponentDefaultForm","i","push"],"mappings":";;;;;;;AAAA;;AAEA,IAAMA,iBAAiB,GAAG,SAApBA,iBAAoB,CAACC,UAAD,EAAaC,mBAAb,EAAqC;AAC7D,SAAOC,MAAM,CAACC,IAAP,CAAYH,UAAZ,EAAwBI,MAAxB,CAA+B,UAACC,GAAD,EAAMC,OAAN,EAAkB;AACtD,QAAMC,SAAS,GAAG,iBAAIP,UAAJ,EAAgB,CAACM,OAAD,CAAhB,EAA2B,EAA3B,CAAlB;AACA,QAAiBE,YAAjB,GAA8ED,SAA9E;AAAA,QAA+BE,SAA/B,GAA8EF,SAA9E,CAA+BE,SAA/B;AAAA,QAA0CC,IAA1C,GAA8EH,SAA9E,CAA0CG,IAA1C;AAAA,QAAgDC,QAAhD,GAA8EJ,SAA9E,CAAgDI,QAAhD;AAAA,QAA0DC,GAA1D,GAA8EL,SAA9E,CAA0DK,GAA1D;AAAA,QAA+DC,UAA/D,GAA8EN,SAA9E,CAA+DM,UAA/D;;AAEA,QAAIH,IAAI,KAAK,MAAb,EAAqB;AACnBL,MAAAA,GAAG,CAACC,OAAD,CAAH,GAAe,IAAf;AACD;;AAED,QAAII,IAAI,KAAK,MAAT,IAAmBC,QAAQ,KAAK,IAApC,EAA0C;AACxCN,MAAAA,GAAG,CAACC,OAAD,CAAH,GAAe,EAAf;AACD;;AAED,QAAIE,YAAY,KAAKM,SAArB,EAAgC;AAC9BT,MAAAA,GAAG,CAACC,OAAD,CAAH,GAAeE,YAAf;AACD;;AAED,QAAIE,IAAI,KAAK,WAAb,EAA0B;AACxB,UAAMK,sBAAsB,GAAG,iBAAId,mBAAJ,EAAyB,CAACQ,SAAD,EAAY,YAAZ,CAAzB,EAAoD,EAApD,CAA/B;AACA,UAAMO,2BAA2B,GAAGjB,iBAAiB,CACnDgB,sBADmD,EAEnDd,mBAFmD,CAArD;;AAKA,UAAIU,QAAQ,KAAK,IAAjB,EAAuB;AACrBN,QAAAA,GAAG,CAACC,OAAD,CAAH,GAAeO,UAAU,KAAK,IAAf,GAAsB,EAAtB,GAA2BG,2BAA1C;AACD;;AAED,UAAIJ,GAAG,IAAIC,UAAU,KAAK,IAAtB,IAA8BF,QAAlC,EAA4C;AAC1CN,QAAAA,GAAG,CAACC,OAAD,CAAH,GAAe,EAAf;;AAEA,aAAK,IAAIW,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGL,GAApB,EAAyBK,CAAC,IAAI,CAA9B,EAAiC;AAC/BZ,UAAAA,GAAG,CAACC,OAAD,CAAH,CAAaY,IAAb,CAAkBF,2BAAlB;AACD;AACF;AACF;;AAED,QAAIN,IAAI,KAAK,aAAb,EAA4B;AAC1B,UAAIC,QAAQ,KAAK,IAAjB,EAAuB;AACrBN,QAAAA,GAAG,CAACC,OAAD,CAAH,GAAe,EAAf;AACD;AACF;;AAED,WAAOD,GAAP;AACD,GA3CM,EA2CJ,EA3CI,CAAP;AA4CD,CA7CD;;eA+CeN,iB","sourcesContent":["import { get } from 'lodash';\n\nconst createDefaultForm = (attributes, allComponentsSchema) => {\n  return Object.keys(attributes).reduce((acc, current) => {\n    const attribute = get(attributes, [current], {});\n    const { default: defaultValue, component, type, required, min, repeatable } = attribute;\n\n    if (type === 'json') {\n      acc[current] = null;\n    }\n\n    if (type === 'json' && required === true) {\n      acc[current] = {};\n    }\n\n    if (defaultValue !== undefined) {\n      acc[current] = defaultValue;\n    }\n\n    if (type === 'component') {\n      const currentComponentSchema = get(allComponentsSchema, [component, 'attributes'], {});\n      const currentComponentDefaultForm = createDefaultForm(\n        currentComponentSchema,\n        allComponentsSchema\n      );\n\n      if (required === true) {\n        acc[current] = repeatable === true ? [] : currentComponentDefaultForm;\n      }\n\n      if (min && repeatable === true && required) {\n        acc[current] = [];\n\n        for (let i = 0; i < min; i += 1) {\n          acc[current].push(currentComponentDefaultForm);\n        }\n      }\n    }\n\n    if (type === 'dynamiczone') {\n      if (required === true) {\n        acc[current] = [];\n      }\n    }\n\n    return acc;\n  }, {});\n};\n\nexport default createDefaultForm;\n"]},"metadata":{},"sourceType":"script"}