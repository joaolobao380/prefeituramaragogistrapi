{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.mapDispatchToProps = mapDispatchToProps;\nexports[\"default\"] = exports.Admin = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _axios = _interopRequireDefault(require(\"axios\"));\n\nvar _reactRedux = require(\"react-redux\");\n\nvar _reselect = require(\"reselect\");\n\nvar _redux = require(\"redux\");\n\nvar _reactRouterDom = require(\"react-router-dom\");\n\nvar _reactIntl = require(\"react-intl\");\n\nvar _lodash = require(\"lodash\");\n\nvar _strapiHelperPlugin = require(\"strapi-helper-plugin\");\n\nvar _config = require(\"../../config\");\n\nvar _utils = require(\"../../utils\");\n\nvar _permissions = _interopRequireDefault(require(\"../../permissions\"));\n\nvar _index = _interopRequireDefault(require(\"../../components/Header/index\"));\n\nvar _NavTopRightWrapper = _interopRequireDefault(require(\"../../components/NavTopRightWrapper\"));\n\nvar _LeftMenu = _interopRequireDefault(require(\"../LeftMenu\"));\n\nvar _InstalledPluginsPage = _interopRequireDefault(require(\"../InstalledPluginsPage\"));\n\nvar _HomePage = _interopRequireDefault(require(\"../HomePage\"));\n\nvar _MarketplacePage = _interopRequireDefault(require(\"../MarketplacePage\"));\n\nvar _NotFoundPage = _interopRequireDefault(require(\"../NotFoundPage\"));\n\nvar _Onboarding = _interopRequireDefault(require(\"../Onboarding\"));\n\nvar _PermissionsManager = _interopRequireDefault(require(\"../PermissionsManager\"));\n\nvar _PluginDispatcher = _interopRequireDefault(require(\"../PluginDispatcher\"));\n\nvar _ProfilePage = _interopRequireDefault(require(\"../ProfilePage\"));\n\nvar _SettingsPage = _interopRequireDefault(require(\"../SettingsPage\"));\n\nvar _Logout = _interopRequireDefault(require(\"./Logout\"));\n\nvar _actions = require(\"../App/actions\");\n\nvar _selectors = _interopRequireDefault(require(\"../App/selectors\"));\n\nvar _actions2 = require(\"./actions\");\n\nvar _selectors2 = _interopRequireDefault(require(\"./selectors\"));\n\nvar _Wrapper = _interopRequireDefault(require(\"./Wrapper\"));\n\nvar _Content = _interopRequireDefault(require(\"./Content\"));\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2[\"default\"])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2[\"default\"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2[\"default\"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2[\"default\"])(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nvar Admin = /*#__PURE__*/function (_React$Component) {\n  (0, _inherits2[\"default\"])(Admin, _React$Component);\n\n  var _super = _createSuper(Admin);\n\n  function Admin() {\n    var _this;\n\n    (0, _classCallCheck2[\"default\"])(this, Admin);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"state\", {\n      updateMenu: null\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"helpers\", {\n      updatePlugin: _this.props.updatePlugin\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"emitEvent\", /*#__PURE__*/function () {\n      var _ref = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee(event, properties) {\n        var uuid;\n        return _regenerator[\"default\"].wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                uuid = _this.props.global.uuid;\n\n                if (!uuid) {\n                  _context.next = 9;\n                  break;\n                }\n\n                _context.prev = 2;\n                _context.next = 5;\n                return _axios[\"default\"].post('https://analytics.strapi.io/track', {\n                  event: event,\n                  // PROJECT_TYPE is an env variable defined in the webpack config\n                  // eslint-disable-next-line no-undef\n                  properties: _objectSpread(_objectSpread({}, properties), {}, {\n                    projectType: PROJECT_TYPE\n                  }),\n                  uuid: uuid\n                });\n\n              case 5:\n                _context.next = 9;\n                break;\n\n              case 7:\n                _context.prev = 7;\n                _context.t0 = _context[\"catch\"](2);\n\n              case 9:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[2, 7]]);\n      }));\n\n      return function (_x, _x2) {\n        return _ref.apply(this, arguments);\n      };\n    }());\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"fetchAppInfo\", /*#__PURE__*/(0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee2() {\n      var _yield$request, data;\n\n      return _regenerator[\"default\"].wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              _context2.next = 3;\n              return (0, _strapiHelperPlugin.request)('/admin/information', {\n                method: 'GET'\n              });\n\n            case 3:\n              _yield$request = _context2.sent;\n              data = _yield$request.data;\n\n              _this.props.getInfosDataSucceeded(data);\n\n              _context2.next = 12;\n              break;\n\n            case 8:\n              _context2.prev = 8;\n              _context2.t0 = _context2[\"catch\"](0);\n              console.error(_context2.t0);\n              strapi.notification.error('notification.error');\n\n            case 12:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[0, 8]]);\n    })));\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"fetchStrapiLatestRelease\", /*#__PURE__*/(0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee3() {\n      var _this$props, strapiVersion, getStrapiLatestReleaseSucceeded, _yield$axios$get, tag_name, shouldUpdateStrapi, showUpdateNotif;\n\n      return _regenerator[\"default\"].wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _this$props = _this.props, strapiVersion = _this$props.global.strapiVersion, getStrapiLatestReleaseSucceeded = _this$props.getStrapiLatestReleaseSucceeded;\n\n              if (_config.STRAPI_UPDATE_NOTIF) {\n                _context3.next = 3;\n                break;\n              }\n\n              return _context3.abrupt(\"return\");\n\n            case 3:\n              _context3.prev = 3;\n              _context3.next = 6;\n              return _axios[\"default\"].get('https://api.github.com/repos/strapi/strapi/releases/latest');\n\n            case 6:\n              _yield$axios$get = _context3.sent;\n              tag_name = _yield$axios$get.data.tag_name;\n              shouldUpdateStrapi = (0, _utils.checkLatestStrapiVersion)(strapiVersion, tag_name);\n              getStrapiLatestReleaseSucceeded(tag_name, shouldUpdateStrapi);\n              showUpdateNotif = !JSON.parse(localStorage.getItem('STRAPI_UPDATE_NOTIF'));\n\n              if (showUpdateNotif) {\n                _context3.next = 13;\n                break;\n              }\n\n              return _context3.abrupt(\"return\");\n\n            case 13:\n              if (shouldUpdateStrapi) {\n                strapi.notification.toggle({\n                  type: 'info',\n                  message: {\n                    id: 'notification.version.update.message'\n                  },\n                  link: {\n                    url: \"https://github.com/strapi/strapi/releases/tag/\".concat(tag_name),\n                    label: {\n                      id: 'notification.version.update.link'\n                    }\n                  },\n                  blockTransition: true,\n                  onClose: function onClose() {\n                    return localStorage.setItem('STRAPI_UPDATE_NOTIF', true);\n                  }\n                });\n              }\n\n              _context3.next = 18;\n              break;\n\n            case 16:\n              _context3.prev = 16;\n              _context3.t0 = _context3[\"catch\"](3);\n\n            case 18:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, null, [[3, 16]]);\n    })));\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"hasApluginNotReady\", function (props) {\n      var plugins = props.global.plugins;\n      return !Object.keys(plugins).every(function (plugin) {\n        return plugins[plugin].isReady === true;\n      });\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"initApp\", /*#__PURE__*/(0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee4() {\n      return _regenerator[\"default\"].wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.next = 2;\n              return _this.fetchAppInfo();\n\n            case 2:\n              _context4.next = 4;\n              return _this.fetchStrapiLatestRelease();\n\n            case 4:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    })));\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"showLoader\", function () {\n      return _this.hasApluginNotReady(_this.props);\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"renderInitializers\", function () {\n      var plugins = _this.props.global.plugins;\n      return Object.keys(plugins).reduce(function (acc, current) {\n        var InitializerComponent = plugins[current].initializer;\n\n        if (InitializerComponent) {\n          var key = plugins[current].id;\n          acc.push( /*#__PURE__*/_react[\"default\"].createElement(InitializerComponent, (0, _extends2[\"default\"])({\n            key: key\n          }, _this.props, _this.helpers)));\n        }\n\n        return acc;\n      }, []);\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"renderPluginDispatcher\", function (props) {\n      // NOTE: Send the needed props instead of everything...\n      return /*#__PURE__*/_react[\"default\"].createElement(_PluginDispatcher[\"default\"], (0, _extends2[\"default\"])({}, _this.props, props, _this.helpers));\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"renderRoute\", function (props, Component) {\n      return /*#__PURE__*/_react[\"default\"].createElement(Component, (0, _extends2[\"default\"])({}, _this.props, props));\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"setUpdateMenu\", function (updateMenuFn) {\n      _this.setState({\n        updateMenu: updateMenuFn\n      });\n    });\n    return _this;\n  }\n\n  (0, _createClass2[\"default\"])(Admin, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.emitEvent('didAccessAuthenticatedAdministration');\n      this.initApp();\n    }\n  }, {\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(prevProps, prevState) {\n      return !(0, _lodash.isEmpty)((0, _strapiHelperPlugin.difference)(prevProps, this.props)) || !(0, _lodash.isEmpty)(prevState, this.state);\n    }\n    /* istanbul ignore next */\n\n  }, {\n    key: \"componentDidCatch\",\n    value: function componentDidCatch(error, info) {\n      /* eslint-disable */\n      console.log('An error has occured');\n      console.log('--------------------');\n      console.log(error);\n      console.log('Here is some infos');\n      console.log(info);\n      /* eslint-enable */\n      // Display the error log component which is not designed yet\n\n      this.props.setAppError();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props2 = this.props,\n          shouldUpdateStrapi = _this$props2.admin.shouldUpdateStrapi,\n          _this$props2$global = _this$props2.global,\n          autoReload = _this$props2$global.autoReload,\n          blockApp = _this$props2$global.blockApp,\n          currentEnvironment = _this$props2$global.currentEnvironment,\n          overlayBlockerData = _this$props2$global.overlayBlockerData,\n          plugins = _this$props2$global.plugins,\n          showGlobalAppBlocker = _this$props2$global.showGlobalAppBlocker,\n          strapiVersion = _this$props2$global.strapiVersion,\n          disableGlobalOverlayBlocker = _this$props2.disableGlobalOverlayBlocker,\n          enableGlobalOverlayBlocker = _this$props2.enableGlobalOverlayBlocker,\n          _this$props2$intl = _this$props2.intl,\n          formatMessage = _this$props2$intl.formatMessage,\n          locale = _this$props2$intl.locale,\n          updatePlugin = _this$props2.updatePlugin; // We need the admin data in order to make the initializers work\n\n      if (this.showLoader()) {\n        return /*#__PURE__*/_react[\"default\"].createElement(_react[\"default\"].Fragment, null, this.renderInitializers(), /*#__PURE__*/_react[\"default\"].createElement(_strapiHelperPlugin.LoadingIndicatorPage, null));\n      }\n\n      return /*#__PURE__*/_react[\"default\"].createElement(_PermissionsManager[\"default\"], null, /*#__PURE__*/_react[\"default\"].createElement(_strapiHelperPlugin.GlobalContextProvider, {\n        autoReload: autoReload,\n        emitEvent: this.emitEvent,\n        currentEnvironment: currentEnvironment,\n        currentLocale: locale,\n        disableGlobalOverlayBlocker: disableGlobalOverlayBlocker,\n        enableGlobalOverlayBlocker: enableGlobalOverlayBlocker,\n        formatMessage: formatMessage,\n        shouldUpdateStrapi: shouldUpdateStrapi,\n        plugins: plugins,\n        settingsBaseURL: _config.SETTINGS_BASE_URL || '/settings',\n        strapiVersion: strapiVersion,\n        updatePlugin: updatePlugin,\n        updateMenu: this.state.updateMenu\n      }, /*#__PURE__*/_react[\"default\"].createElement(_Wrapper[\"default\"], null, /*#__PURE__*/_react[\"default\"].createElement(_LeftMenu[\"default\"], {\n        shouldUpdateStrapi: shouldUpdateStrapi,\n        version: strapiVersion,\n        plugins: plugins,\n        setUpdateMenu: this.setUpdateMenu\n      }), /*#__PURE__*/_react[\"default\"].createElement(_NavTopRightWrapper[\"default\"], null, /*#__PURE__*/_react[\"default\"].createElement(_Logout[\"default\"], null)), /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        className: \"adminPageRightWrapper\"\n      }, /*#__PURE__*/_react[\"default\"].createElement(_index[\"default\"], null), /*#__PURE__*/_react[\"default\"].createElement(_Content[\"default\"], null, /*#__PURE__*/_react[\"default\"].createElement(_reactRouterDom.Switch, null, /*#__PURE__*/_react[\"default\"].createElement(_reactRouterDom.Route, {\n        path: \"/\",\n        render: function render(props) {\n          return _this2.renderRoute(props, _HomePage[\"default\"]);\n        },\n        exact: true\n      }), /*#__PURE__*/_react[\"default\"].createElement(_reactRouterDom.Route, {\n        path: \"/me\",\n        component: _ProfilePage[\"default\"]\n      }), /*#__PURE__*/_react[\"default\"].createElement(_reactRouterDom.Route, {\n        path: \"/plugins/:pluginId\",\n        render: this.renderPluginDispatcher\n      }), /*#__PURE__*/_react[\"default\"].createElement(_reactRouterDom.Route, {\n        path: \"/list-plugins\",\n        exact: true\n      }, /*#__PURE__*/_react[\"default\"].createElement(_strapiHelperPlugin.CheckPagePermissions, {\n        permissions: _permissions[\"default\"].marketplace.main\n      }, /*#__PURE__*/_react[\"default\"].createElement(_InstalledPluginsPage[\"default\"], null))), /*#__PURE__*/_react[\"default\"].createElement(_reactRouterDom.Route, {\n        path: \"/marketplace\"\n      }, /*#__PURE__*/_react[\"default\"].createElement(_strapiHelperPlugin.CheckPagePermissions, {\n        permissions: _permissions[\"default\"].marketplace.main\n      }, /*#__PURE__*/_react[\"default\"].createElement(_MarketplacePage[\"default\"], null))), /*#__PURE__*/_react[\"default\"].createElement(_reactRouterDom.Route, {\n        path: \"\".concat(_config.SETTINGS_BASE_URL || '/settings', \"/:settingId\"),\n        component: _SettingsPage[\"default\"]\n      }), /*#__PURE__*/_react[\"default\"].createElement(_reactRouterDom.Route, {\n        path: _config.SETTINGS_BASE_URL || '/settings',\n        component: _SettingsPage[\"default\"],\n        exact: true\n      }), /*#__PURE__*/_react[\"default\"].createElement(_reactRouterDom.Route, {\n        key: \"7\",\n        path: \"\",\n        component: _NotFoundPage[\"default\"]\n      }), /*#__PURE__*/_react[\"default\"].createElement(_reactRouterDom.Route, {\n        key: \"8\",\n        path: \"/404\",\n        component: _NotFoundPage[\"default\"]\n      })))), /*#__PURE__*/_react[\"default\"].createElement(_strapiHelperPlugin.OverlayBlocker, (0, _extends2[\"default\"])({\n        key: \"overlayBlocker\",\n        isOpen: blockApp && showGlobalAppBlocker\n      }, overlayBlockerData)), _config.SHOW_TUTORIALS && /*#__PURE__*/_react[\"default\"].createElement(_Onboarding[\"default\"], null))));\n    }\n  }]);\n  return Admin;\n}(_react[\"default\"].Component);\n\nexports.Admin = Admin;\nAdmin.defaultProps = {\n  intl: {\n    formatMessage: function formatMessage() {},\n    locale: 'en'\n  }\n};\nAdmin.propTypes = {\n  admin: _propTypes[\"default\"].shape({\n    appError: _propTypes[\"default\"].bool,\n    shouldUpdateStrapi: _propTypes[\"default\"].bool.isRequired\n  }).isRequired,\n  disableGlobalOverlayBlocker: _propTypes[\"default\"].func.isRequired,\n  enableGlobalOverlayBlocker: _propTypes[\"default\"].func.isRequired,\n  getInfosDataSucceeded: _propTypes[\"default\"].func.isRequired,\n  getStrapiLatestReleaseSucceeded: _propTypes[\"default\"].func.isRequired,\n  global: _propTypes[\"default\"].shape({\n    autoReload: _propTypes[\"default\"].bool,\n    blockApp: _propTypes[\"default\"].bool,\n    currentEnvironment: _propTypes[\"default\"].string,\n    overlayBlockerData: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].bool, _propTypes[\"default\"].object]),\n    plugins: _propTypes[\"default\"].object,\n    showGlobalAppBlocker: _propTypes[\"default\"].bool,\n    strapiVersion: _propTypes[\"default\"].string,\n    uuid: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].string, _propTypes[\"default\"].bool])\n  }).isRequired,\n  intl: _propTypes[\"default\"].shape({\n    formatMessage: _propTypes[\"default\"].func,\n    locale: _propTypes[\"default\"].string\n  }),\n  location: _propTypes[\"default\"].object.isRequired,\n  setAppError: _propTypes[\"default\"].func.isRequired,\n  updatePlugin: _propTypes[\"default\"].func.isRequired\n};\nvar mapStateToProps = (0, _reselect.createStructuredSelector)({\n  admin: (0, _selectors2[\"default\"])(),\n  global: (0, _selectors[\"default\"])()\n});\n\nfunction mapDispatchToProps(dispatch) {\n  return (0, _redux.bindActionCreators)({\n    disableGlobalOverlayBlocker: _actions.disableGlobalOverlayBlocker,\n    enableGlobalOverlayBlocker: _actions.enableGlobalOverlayBlocker,\n    getInfosDataSucceeded: _actions.getInfosDataSucceeded,\n    getStrapiLatestReleaseSucceeded: _actions2.getStrapiLatestReleaseSucceeded,\n    setAppError: _actions2.setAppError,\n    updatePlugin: _actions.updatePlugin\n  }, dispatch);\n}\n\nvar withConnect = (0, _reactRedux.connect)(mapStateToProps, mapDispatchToProps);\n\nvar _default = (0, _redux.compose)(_reactIntl.injectIntl, withConnect)(Admin);\n\nexports[\"default\"] = _default;","map":{"version":3,"sources":["/Users/joaovictorlobao/prefeituramaragogistrapi/.cache/admin/src/containers/Admin/index.js"],"names":["Admin","updateMenu","updatePlugin","props","event","properties","uuid","global","axios","post","projectType","PROJECT_TYPE","method","data","getInfosDataSucceeded","console","error","strapi","notification","strapiVersion","getStrapiLatestReleaseSucceeded","STRAPI_UPDATE_NOTIF","get","tag_name","shouldUpdateStrapi","showUpdateNotif","JSON","parse","localStorage","getItem","toggle","type","message","id","link","url","label","blockTransition","onClose","setItem","plugins","Object","keys","every","plugin","isReady","fetchAppInfo","fetchStrapiLatestRelease","hasApluginNotReady","reduce","acc","current","InitializerComponent","initializer","key","push","helpers","Component","updateMenuFn","setState","emitEvent","initApp","prevProps","prevState","state","info","log","setAppError","admin","autoReload","blockApp","currentEnvironment","overlayBlockerData","showGlobalAppBlocker","disableGlobalOverlayBlocker","enableGlobalOverlayBlocker","intl","formatMessage","locale","showLoader","renderInitializers","SETTINGS_BASE_URL","setUpdateMenu","renderRoute","HomePage","ProfilePage","renderPluginDispatcher","adminPermissions","marketplace","main","SettingsPage","NotFoundPage","SHOW_TUTORIALS","React","defaultProps","propTypes","PropTypes","shape","appError","bool","isRequired","func","string","oneOfType","object","location","mapStateToProps","mapDispatchToProps","dispatch","withConnect","injectIntl"],"mappings":"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","sourcesContent":["/**\n *\n * Admin\n *\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport axios from 'axios';\nimport { connect } from 'react-redux';\nimport { createStructuredSelector } from 'reselect';\nimport { bindActionCreators, compose } from 'redux';\nimport { Switch, Route } from 'react-router-dom';\nimport { injectIntl } from 'react-intl';\nimport { isEmpty } from 'lodash';\n// Components from strapi-helper-plugin\nimport {\n  difference,\n  GlobalContextProvider,\n  LoadingIndicatorPage,\n  OverlayBlocker,\n  CheckPagePermissions,\n  request,\n} from 'strapi-helper-plugin';\nimport { SETTINGS_BASE_URL, SHOW_TUTORIALS, STRAPI_UPDATE_NOTIF } from '../../config';\nimport { checkLatestStrapiVersion } from '../../utils';\n\nimport adminPermissions from '../../permissions';\nimport Header from '../../components/Header/index';\nimport NavTopRightWrapper from '../../components/NavTopRightWrapper';\nimport LeftMenu from '../LeftMenu';\nimport InstalledPluginsPage from '../InstalledPluginsPage';\nimport HomePage from '../HomePage';\nimport MarketplacePage from '../MarketplacePage';\nimport NotFoundPage from '../NotFoundPage';\nimport OnboardingVideos from '../Onboarding';\nimport PermissionsManager from '../PermissionsManager';\nimport PluginDispatcher from '../PluginDispatcher';\nimport ProfilePage from '../ProfilePage';\nimport SettingsPage from '../SettingsPage';\nimport Logout from './Logout';\nimport {\n  disableGlobalOverlayBlocker,\n  enableGlobalOverlayBlocker,\n  getInfosDataSucceeded,\n  updatePlugin,\n} from '../App/actions';\nimport makeSelecApp from '../App/selectors';\nimport { getStrapiLatestReleaseSucceeded, setAppError } from './actions';\nimport makeSelectAdmin from './selectors';\nimport Wrapper from './Wrapper';\nimport Content from './Content';\n\nexport class Admin extends React.Component {\n  // eslint-disable-line react/prefer-stateless-function\n\n  // This state is really temporary until we create a menu API\n  state = { updateMenu: null };\n\n  helpers = {\n    updatePlugin: this.props.updatePlugin,\n  };\n\n  componentDidMount() {\n    this.emitEvent('didAccessAuthenticatedAdministration');\n    this.initApp();\n  }\n\n  shouldComponentUpdate(prevProps, prevState) {\n    return !isEmpty(difference(prevProps, this.props)) || !isEmpty(prevState, this.state);\n  }\n\n  /* istanbul ignore next */\n  componentDidCatch(error, info) {\n    /* eslint-disable */\n    console.log('An error has occured');\n    console.log('--------------------');\n    console.log(error);\n    console.log('Here is some infos');\n    console.log(info);\n    /* eslint-enable */\n\n    // Display the error log component which is not designed yet\n    this.props.setAppError();\n  }\n\n  emitEvent = async (event, properties) => {\n    const {\n      global: { uuid },\n    } = this.props;\n\n    if (uuid) {\n      try {\n        await axios.post('https://analytics.strapi.io/track', {\n          event,\n          // PROJECT_TYPE is an env variable defined in the webpack config\n          // eslint-disable-next-line no-undef\n          properties: { ...properties, projectType: PROJECT_TYPE },\n          uuid,\n        });\n      } catch (err) {\n        // Silent\n      }\n    }\n  };\n\n  fetchAppInfo = async () => {\n    try {\n      const { data } = await request('/admin/information', { method: 'GET' });\n\n      this.props.getInfosDataSucceeded(data);\n    } catch (err) {\n      console.error(err);\n      strapi.notification.error('notification.error');\n    }\n  };\n\n  fetchStrapiLatestRelease = async () => {\n    const {\n      global: { strapiVersion },\n      getStrapiLatestReleaseSucceeded,\n    } = this.props;\n\n    if (!STRAPI_UPDATE_NOTIF) {\n      return;\n    }\n\n    try {\n      const {\n        data: { tag_name },\n      } = await axios.get('https://api.github.com/repos/strapi/strapi/releases/latest');\n      const shouldUpdateStrapi = checkLatestStrapiVersion(strapiVersion, tag_name);\n\n      getStrapiLatestReleaseSucceeded(tag_name, shouldUpdateStrapi);\n\n      const showUpdateNotif = !JSON.parse(localStorage.getItem('STRAPI_UPDATE_NOTIF'));\n\n      if (!showUpdateNotif) {\n        return;\n      }\n\n      if (shouldUpdateStrapi) {\n        strapi.notification.toggle({\n          type: 'info',\n          message: { id: 'notification.version.update.message' },\n          link: {\n            url: `https://github.com/strapi/strapi/releases/tag/${tag_name}`,\n            label: {\n              id: 'notification.version.update.link',\n            },\n          },\n          blockTransition: true,\n          onClose: () => localStorage.setItem('STRAPI_UPDATE_NOTIF', true),\n        });\n      }\n    } catch (err) {\n      // Silent\n    }\n  };\n\n  hasApluginNotReady = props => {\n    const {\n      global: { plugins },\n    } = props;\n\n    return !Object.keys(plugins).every(plugin => plugins[plugin].isReady === true);\n  };\n\n  initApp = async () => {\n    await this.fetchAppInfo();\n    await this.fetchStrapiLatestRelease();\n  };\n\n  /**\n   * Display the app loader until the app is ready\n   * @returns {Boolean}\n   */\n  showLoader = () => {\n    return this.hasApluginNotReady(this.props);\n  };\n\n  renderInitializers = () => {\n    const {\n      global: { plugins },\n    } = this.props;\n\n    return Object.keys(plugins).reduce((acc, current) => {\n      const InitializerComponent = plugins[current].initializer;\n\n      if (InitializerComponent) {\n        const key = plugins[current].id;\n\n        acc.push(<InitializerComponent key={key} {...this.props} {...this.helpers} />);\n      }\n\n      return acc;\n    }, []);\n  };\n\n  renderPluginDispatcher = props => {\n    // NOTE: Send the needed props instead of everything...\n\n    return <PluginDispatcher {...this.props} {...props} {...this.helpers} />;\n  };\n\n  renderRoute = (props, Component) => <Component {...this.props} {...props} />;\n\n  setUpdateMenu = updateMenuFn => {\n    this.setState({ updateMenu: updateMenuFn });\n  };\n\n  render() {\n    const {\n      admin: { shouldUpdateStrapi },\n      global: {\n        autoReload,\n        blockApp,\n        currentEnvironment,\n        overlayBlockerData,\n        plugins,\n        showGlobalAppBlocker,\n        strapiVersion,\n      },\n      disableGlobalOverlayBlocker,\n      enableGlobalOverlayBlocker,\n      intl: { formatMessage, locale },\n      updatePlugin,\n    } = this.props;\n\n    // We need the admin data in order to make the initializers work\n    if (this.showLoader()) {\n      return (\n        <>\n          {this.renderInitializers()}\n          <LoadingIndicatorPage />\n        </>\n      );\n    }\n\n    return (\n      <PermissionsManager>\n        <GlobalContextProvider\n          autoReload={autoReload}\n          emitEvent={this.emitEvent}\n          currentEnvironment={currentEnvironment}\n          currentLocale={locale}\n          disableGlobalOverlayBlocker={disableGlobalOverlayBlocker}\n          enableGlobalOverlayBlocker={enableGlobalOverlayBlocker}\n          formatMessage={formatMessage}\n          shouldUpdateStrapi={shouldUpdateStrapi}\n          plugins={plugins}\n          settingsBaseURL={SETTINGS_BASE_URL || '/settings'}\n          strapiVersion={strapiVersion}\n          updatePlugin={updatePlugin}\n          updateMenu={this.state.updateMenu}\n        >\n          <Wrapper>\n            <LeftMenu\n              shouldUpdateStrapi={shouldUpdateStrapi}\n              version={strapiVersion}\n              plugins={plugins}\n              setUpdateMenu={this.setUpdateMenu}\n            />\n            <NavTopRightWrapper>\n              {/* Injection zone not ready yet */}\n              <Logout />\n            </NavTopRightWrapper>\n            <div className=\"adminPageRightWrapper\">\n              <Header />\n              <Content>\n                <Switch>\n                  <Route path=\"/\" render={props => this.renderRoute(props, HomePage)} exact />\n                  <Route path=\"/me\" component={ProfilePage} />\n                  <Route path=\"/plugins/:pluginId\" render={this.renderPluginDispatcher} />\n                  <Route path=\"/list-plugins\" exact>\n                    <CheckPagePermissions permissions={adminPermissions.marketplace.main}>\n                      <InstalledPluginsPage />\n                    </CheckPagePermissions>\n                  </Route>\n                  <Route path=\"/marketplace\">\n                    <CheckPagePermissions permissions={adminPermissions.marketplace.main}>\n                      <MarketplacePage />\n                    </CheckPagePermissions>\n                  </Route>\n                  <Route\n                    path={`${SETTINGS_BASE_URL || '/settings'}/:settingId`}\n                    component={SettingsPage}\n                  />\n                  <Route path={SETTINGS_BASE_URL || '/settings'} component={SettingsPage} exact />\n                  <Route key=\"7\" path=\"\" component={NotFoundPage} />\n                  <Route key=\"8\" path=\"/404\" component={NotFoundPage} />\n                </Switch>\n              </Content>\n            </div>\n            <OverlayBlocker\n              key=\"overlayBlocker\"\n              isOpen={blockApp && showGlobalAppBlocker}\n              {...overlayBlockerData}\n            />\n            {SHOW_TUTORIALS && <OnboardingVideos />}\n          </Wrapper>\n        </GlobalContextProvider>\n      </PermissionsManager>\n    );\n  }\n}\n\nAdmin.defaultProps = {\n  intl: {\n    formatMessage: () => {},\n    locale: 'en',\n  },\n};\n\nAdmin.propTypes = {\n  admin: PropTypes.shape({\n    appError: PropTypes.bool,\n    shouldUpdateStrapi: PropTypes.bool.isRequired,\n  }).isRequired,\n  disableGlobalOverlayBlocker: PropTypes.func.isRequired,\n  enableGlobalOverlayBlocker: PropTypes.func.isRequired,\n  getInfosDataSucceeded: PropTypes.func.isRequired,\n  getStrapiLatestReleaseSucceeded: PropTypes.func.isRequired,\n  global: PropTypes.shape({\n    autoReload: PropTypes.bool,\n    blockApp: PropTypes.bool,\n    currentEnvironment: PropTypes.string,\n    overlayBlockerData: PropTypes.oneOfType([PropTypes.bool, PropTypes.object]),\n    plugins: PropTypes.object,\n    showGlobalAppBlocker: PropTypes.bool,\n    strapiVersion: PropTypes.string,\n    uuid: PropTypes.oneOfType([PropTypes.string, PropTypes.bool]),\n  }).isRequired,\n  intl: PropTypes.shape({\n    formatMessage: PropTypes.func,\n    locale: PropTypes.string,\n  }),\n  location: PropTypes.object.isRequired,\n  setAppError: PropTypes.func.isRequired,\n  updatePlugin: PropTypes.func.isRequired,\n};\n\nconst mapStateToProps = createStructuredSelector({\n  admin: makeSelectAdmin(),\n  global: makeSelecApp(),\n});\n\nexport function mapDispatchToProps(dispatch) {\n  return bindActionCreators(\n    {\n      disableGlobalOverlayBlocker,\n      enableGlobalOverlayBlocker,\n      getInfosDataSucceeded,\n      getStrapiLatestReleaseSucceeded,\n      setAppError,\n      updatePlugin,\n    },\n    dispatch\n  );\n}\n\nconst withConnect = connect(mapStateToProps, mapDispatchToProps);\n\nexport default compose(injectIntl, withConnect)(Admin);\n"]},"metadata":{},"sourceType":"script"}