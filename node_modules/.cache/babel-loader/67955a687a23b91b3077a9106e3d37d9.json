{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _react = require(\"react\");\n\nvar _reactRedux = require(\"react-redux\");\n\nvar _actions = require(\"./actions\");\n\nvar _selectors = require(\"../../selectors\");\n\nvar useSyncRbac = function useSyncRbac(query, collectionTypeUID) {\n  var containerName = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'listView';\n  var collectionTypesRelatedPermissions = (0, _reactRedux.useSelector)(_selectors.selectCollectionTypePermissions);\n  var permissions = (0, _reactRedux.useSelector)(_selectors.selectPermissions);\n  var dispatch = (0, _reactRedux.useDispatch)();\n  var relatedPermissions = collectionTypesRelatedPermissions[collectionTypeUID];\n  (0, _react.useEffect)(function () {\n    if (relatedPermissions) {\n      dispatch((0, _actions.setPermissions)(relatedPermissions, query ? query.plugins : null, containerName));\n      return function () {\n        dispatch((0, _actions.resetPermissions)());\n      };\n    }\n\n    return function () {};\n  }, [relatedPermissions, dispatch, query, containerName]);\n  return permissions;\n};\n\nvar _default = useSyncRbac;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["/Users/joaovictorlobao/prefeituramaragogistrapi/.cache/plugins/strapi-plugin-content-manager/admin/src/containers/RBACManager/useSyncRbac.js"],"names":["useSyncRbac","query","collectionTypeUID","containerName","collectionTypesRelatedPermissions","selectCollectionTypePermissions","permissions","selectPermissions","dispatch","relatedPermissions","plugins"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;AAEA,IAAMA,WAAW,GAAG,SAAdA,WAAc,CAACC,KAAD,EAAQC,iBAAR,EAA0D;AAAA,MAA/BC,aAA+B,uEAAf,UAAe;AAC5E,MAAMC,iCAAiC,GAAG,6BAAYC,0CAAZ,CAA1C;AACA,MAAMC,WAAW,GAAG,6BAAYC,4BAAZ,CAApB;AACA,MAAMC,QAAQ,GAAG,8BAAjB;AAEA,MAAMC,kBAAkB,GAAGL,iCAAiC,CAACF,iBAAD,CAA5D;AAEA,wBAAU,YAAM;AACd,QAAIO,kBAAJ,EAAwB;AACtBD,MAAAA,QAAQ,CAAC,6BAAeC,kBAAf,EAAmCR,KAAK,GAAGA,KAAK,CAACS,OAAT,GAAmB,IAA3D,EAAiEP,aAAjE,CAAD,CAAR;AAEA,aAAO,YAAM;AACXK,QAAAA,QAAQ,CAAC,gCAAD,CAAR;AACD,OAFD;AAGD;;AAED,WAAO,YAAM,CAAE,CAAf;AACD,GAVD,EAUG,CAACC,kBAAD,EAAqBD,QAArB,EAA+BP,KAA/B,EAAsCE,aAAtC,CAVH;AAYA,SAAOG,WAAP;AACD,CApBD;;eAsBeN,W","sourcesContent":["import { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { resetPermissions, setPermissions } from './actions';\nimport { selectPermissions, selectCollectionTypePermissions } from '../../selectors';\n\nconst useSyncRbac = (query, collectionTypeUID, containerName = 'listView') => {\n  const collectionTypesRelatedPermissions = useSelector(selectCollectionTypePermissions);\n  const permissions = useSelector(selectPermissions);\n  const dispatch = useDispatch();\n\n  const relatedPermissions = collectionTypesRelatedPermissions[collectionTypeUID];\n\n  useEffect(() => {\n    if (relatedPermissions) {\n      dispatch(setPermissions(relatedPermissions, query ? query.plugins : null, containerName));\n\n      return () => {\n        dispatch(resetPermissions());\n      };\n    }\n\n    return () => {};\n  }, [relatedPermissions, dispatch, query, containerName]);\n\n  return permissions;\n};\n\nexport default useSyncRbac;\n"]},"metadata":{},"sourceType":"script"}