{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _typeof = require(\"@babel/runtime/helpers/typeof\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _utils = require(\"../../utils\");\n\nvar _BrokenFile = _interopRequireDefault(require(\"../../icons/BrokenFile\"));\n\nvar _FileIcon = _interopRequireDefault(require(\"../FileIcon\"));\n\nvar _VideoPreview = _interopRequireDefault(require(\"../VideoPreview\"));\n\nvar _Wrapper = _interopRequireDefault(require(\"./Wrapper\"));\n\nvar _Image = _interopRequireDefault(require(\"./Image\"));\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { \"default\": obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj[\"default\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nvar CardPreview = function CardPreview(_ref) {\n  var extension = _ref.extension,\n      hasError = _ref.hasError,\n      hasIcon = _ref.hasIcon,\n      url = _ref.url,\n      previewUrl = _ref.previewUrl,\n      type = _ref.type,\n      withFileCaching = _ref.withFileCaching;\n  var isFile = (0, _utils.getType)(type) === 'file';\n  var isVideo = (0, _utils.getType)(type) === 'video';\n  var cacheRef = (0, _react.useRef)(performance.now());\n\n  if (hasError) {\n    return /*#__PURE__*/_react[\"default\"].createElement(_Wrapper[\"default\"], {\n      isFile: true\n    }, /*#__PURE__*/_react[\"default\"].createElement(_BrokenFile[\"default\"], null));\n  }\n\n  if (isFile) {\n    return /*#__PURE__*/_react[\"default\"].createElement(_Wrapper[\"default\"], {\n      isFile: true\n    }, /*#__PURE__*/_react[\"default\"].createElement(_FileIcon[\"default\"], {\n      ext: extension\n    }));\n  }\n\n  return /*#__PURE__*/_react[\"default\"].createElement(_Wrapper[\"default\"], null, isVideo ? /*#__PURE__*/_react[\"default\"].createElement(_VideoPreview[\"default\"], {\n    src: url,\n    previewUrl: previewUrl,\n    hasIcon: hasIcon\n  }) :\n  /*#__PURE__*/\n  // Adding performance.now forces the browser no to cache the img\n  // https://stackoverflow.com/questions/126772/how-to-force-a-web-browser-not-to-cache-images\n  _react[\"default\"].createElement(_Image[\"default\"], {\n    src: \"\".concat(url).concat(withFileCaching ? \"?\".concat(cacheRef.current) : '')\n  }));\n};\n\nCardPreview.defaultProps = {\n  extension: null,\n  hasError: false,\n  hasIcon: false,\n  previewUrl: null,\n  url: null,\n  type: '',\n  withFileCaching: true\n};\nCardPreview.propTypes = {\n  extension: _propTypes[\"default\"].string,\n  hasError: _propTypes[\"default\"].bool,\n  hasIcon: _propTypes[\"default\"].bool,\n  previewUrl: _propTypes[\"default\"].string,\n  url: _propTypes[\"default\"].string,\n  type: _propTypes[\"default\"].string,\n  withFileCaching: _propTypes[\"default\"].bool\n};\n\nvar _default = /*#__PURE__*/(0, _react.memo)(CardPreview);\n\nexports[\"default\"] = _default;","map":{"version":3,"sources":["/Users/joaovictorlobao/prefeituramaragogistrapi/.cache/plugins/strapi-plugin-upload/admin/src/components/CardPreview/index.js"],"names":["CardPreview","extension","hasError","hasIcon","url","previewUrl","type","withFileCaching","isFile","isVideo","cacheRef","performance","now","current","defaultProps","propTypes","PropTypes","string","bool"],"mappings":";;;;;;;;;;;AAAA;;AACA;;AAEA;;AAEA;;AACA;;AACA;;AACA;;AACA;;;;;;AAEA,IAAMA,WAAW,GAAG,SAAdA,WAAc,OAA8E;AAAA,MAA3EC,SAA2E,QAA3EA,SAA2E;AAAA,MAAhEC,QAAgE,QAAhEA,QAAgE;AAAA,MAAtDC,OAAsD,QAAtDA,OAAsD;AAAA,MAA7CC,GAA6C,QAA7CA,GAA6C;AAAA,MAAxCC,UAAwC,QAAxCA,UAAwC;AAAA,MAA5BC,IAA4B,QAA5BA,IAA4B;AAAA,MAAtBC,eAAsB,QAAtBA,eAAsB;AAChG,MAAMC,MAAM,GAAG,oBAAQF,IAAR,MAAkB,MAAjC;AACA,MAAMG,OAAO,GAAG,oBAAQH,IAAR,MAAkB,OAAlC;AACA,MAAMI,QAAQ,GAAG,mBAAOC,WAAW,CAACC,GAAZ,EAAP,CAAjB;;AAEA,MAAIV,QAAJ,EAAc;AACZ,wBACE,gCAAC,mBAAD;AAAS,MAAA,MAAM;AAAf,oBACE,gCAAC,sBAAD,OADF,CADF;AAKD;;AAED,MAAIM,MAAJ,EAAY;AACV,wBACE,gCAAC,mBAAD;AAAS,MAAA,MAAM;AAAf,oBACE,gCAAC,oBAAD;AAAU,MAAA,GAAG,EAAEP;AAAf,MADF,CADF;AAKD;;AAED,sBACE,gCAAC,mBAAD,QACGQ,OAAO,gBACN,gCAAC,wBAAD;AAAc,IAAA,GAAG,EAAEL,GAAnB;AAAwB,IAAA,UAAU,EAAEC,UAApC;AAAgD,IAAA,OAAO,EAAEF;AAAzD,IADM;AAAA;AAGN;AACA;AACA,kCAAC,iBAAD;AAAO,IAAA,GAAG,YAAKC,GAAL,SAAWG,eAAe,cAAOG,QAAQ,CAACG,OAAhB,IAA4B,EAAtD;AAAV,IANJ,CADF;AAWD,CAhCD;;AAkCAb,WAAW,CAACc,YAAZ,GAA2B;AACzBb,EAAAA,SAAS,EAAE,IADc;AAEzBC,EAAAA,QAAQ,EAAE,KAFe;AAGzBC,EAAAA,OAAO,EAAE,KAHgB;AAIzBE,EAAAA,UAAU,EAAE,IAJa;AAKzBD,EAAAA,GAAG,EAAE,IALoB;AAMzBE,EAAAA,IAAI,EAAE,EANmB;AAOzBC,EAAAA,eAAe,EAAE;AAPQ,CAA3B;AAUAP,WAAW,CAACe,SAAZ,GAAwB;AACtBd,EAAAA,SAAS,EAAEe,sBAAUC,MADC;AAEtBf,EAAAA,QAAQ,EAAEc,sBAAUE,IAFE;AAGtBf,EAAAA,OAAO,EAAEa,sBAAUE,IAHG;AAItBb,EAAAA,UAAU,EAAEW,sBAAUC,MAJA;AAKtBb,EAAAA,GAAG,EAAEY,sBAAUC,MALO;AAMtBX,EAAAA,IAAI,EAAEU,sBAAUC,MANM;AAOtBV,EAAAA,eAAe,EAAES,sBAAUE;AAPL,CAAxB;;4BAUe,iBAAKlB,WAAL,C","sourcesContent":["import React, { memo, useRef } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { getType } from '../../utils';\n\nimport BrokenFile from '../../icons/BrokenFile';\nimport FileIcon from '../FileIcon';\nimport VideoPreview from '../VideoPreview';\nimport Wrapper from './Wrapper';\nimport Image from './Image';\n\nconst CardPreview = ({ extension, hasError, hasIcon, url, previewUrl, type, withFileCaching }) => {\n  const isFile = getType(type) === 'file';\n  const isVideo = getType(type) === 'video';\n  const cacheRef = useRef(performance.now());\n\n  if (hasError) {\n    return (\n      <Wrapper isFile>\n        <BrokenFile />\n      </Wrapper>\n    );\n  }\n\n  if (isFile) {\n    return (\n      <Wrapper isFile>\n        <FileIcon ext={extension} />\n      </Wrapper>\n    );\n  }\n\n  return (\n    <Wrapper>\n      {isVideo ? (\n        <VideoPreview src={url} previewUrl={previewUrl} hasIcon={hasIcon} />\n      ) : (\n        // Adding performance.now forces the browser no to cache the img\n        // https://stackoverflow.com/questions/126772/how-to-force-a-web-browser-not-to-cache-images\n        <Image src={`${url}${withFileCaching ? `?${cacheRef.current}` : ''}`} />\n      )}\n    </Wrapper>\n  );\n};\n\nCardPreview.defaultProps = {\n  extension: null,\n  hasError: false,\n  hasIcon: false,\n  previewUrl: null,\n  url: null,\n  type: '',\n  withFileCaching: true,\n};\n\nCardPreview.propTypes = {\n  extension: PropTypes.string,\n  hasError: PropTypes.bool,\n  hasIcon: PropTypes.bool,\n  previewUrl: PropTypes.string,\n  url: PropTypes.string,\n  type: PropTypes.string,\n  withFileCaching: PropTypes.bool,\n};\n\nexport default memo(CardPreview);\n"]},"metadata":{},"sourceType":"script"}