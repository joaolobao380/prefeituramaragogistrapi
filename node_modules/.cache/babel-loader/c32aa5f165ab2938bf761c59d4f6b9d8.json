{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _creatable = _interopRequireDefault(require(\"react-select/creatable\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _lodash = require(\"lodash\");\n\nvar _useDataManager2 = _interopRequireDefault(require(\"../../hooks/useDataManager\"));\n\nvar CreatableSelect = function CreatableSelect(_ref) {\n  var onChange = _ref.onChange,\n      name = _ref.name,\n      styles = _ref.styles,\n      value = _ref.value;\n\n  var _useDataManager = (0, _useDataManager2[\"default\"])(),\n      allComponentsCategories = _useDataManager.allComponentsCategories;\n\n  var handleChange = function handleChange(inputValue, actionMeta) {\n    var action = actionMeta.action;\n\n    if (action === 'clear') {\n      onChange({\n        target: {\n          name: name,\n          value: ''\n        }\n      });\n    }\n\n    if (action === 'create-option' || action === 'select-option') {\n      onChange({\n        target: {\n          name: name,\n          value: inputValue.value\n        }\n      });\n    }\n  };\n\n  var formatOptions = function formatOptions() {\n    var options = allComponentsCategories.map(function (cat) {\n      return {\n        value: cat,\n        label: cat\n      };\n    });\n\n    if (value) {\n      return (0, _lodash.uniqBy)(options.concat({\n        value: value,\n        label: value\n      }), 'value');\n    }\n\n    return options;\n  };\n\n  var getValue = function getValue() {\n    return formatOptions().find(function (el) {\n      return el.value === value;\n    });\n  };\n\n  return /*#__PURE__*/_react[\"default\"].createElement(_creatable[\"default\"], {\n    defaultValue: getValue(),\n    isClearable: true,\n    onChange: handleChange,\n    styles: styles,\n    options: formatOptions()\n  });\n};\n\nCreatableSelect.defaultProps = {\n  value: null\n};\nCreatableSelect.propTypes = {\n  name: _propTypes[\"default\"].string.isRequired,\n  onChange: _propTypes[\"default\"].func.isRequired,\n  styles: _propTypes[\"default\"].object.isRequired,\n  value: _propTypes[\"default\"].string\n};\nvar _default = CreatableSelect;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["/Users/joaovictorlobao/prefeituramaragogistrapi/.cache/plugins/strapi-plugin-content-type-builder/admin/src/components/CreatableSelect/index.js"],"names":["CreatableSelect","onChange","name","styles","value","allComponentsCategories","handleChange","inputValue","actionMeta","action","target","formatOptions","options","map","cat","label","concat","getValue","find","el","defaultProps","propTypes","PropTypes","string","isRequired","func","object"],"mappings":";;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AAEA,IAAMA,eAAe,GAAG,SAAlBA,eAAkB,OAAuC;AAAA,MAApCC,QAAoC,QAApCA,QAAoC;AAAA,MAA1BC,IAA0B,QAA1BA,IAA0B;AAAA,MAApBC,MAAoB,QAApBA,MAAoB;AAAA,MAAZC,KAAY,QAAZA,KAAY;;AAC7D,wBAAoC,kCAApC;AAAA,MAAQC,uBAAR,mBAAQA,uBAAR;;AAEA,MAAMC,YAAY,GAAG,SAAfA,YAAe,CAACC,UAAD,EAAaC,UAAb,EAA4B;AAC/C,QAAQC,MAAR,GAAmBD,UAAnB,CAAQC,MAAR;;AAEA,QAAIA,MAAM,KAAK,OAAf,EAAwB;AACtBR,MAAAA,QAAQ,CAAC;AAAES,QAAAA,MAAM,EAAE;AAAER,UAAAA,IAAI,EAAJA,IAAF;AAAQE,UAAAA,KAAK,EAAE;AAAf;AAAV,OAAD,CAAR;AACD;;AAED,QAAIK,MAAM,KAAK,eAAX,IAA8BA,MAAM,KAAK,eAA7C,EAA8D;AAC5DR,MAAAA,QAAQ,CAAC;AAAES,QAAAA,MAAM,EAAE;AAAER,UAAAA,IAAI,EAAJA,IAAF;AAAQE,UAAAA,KAAK,EAAEG,UAAU,CAACH;AAA1B;AAAV,OAAD,CAAR;AACD;AACF,GAVD;;AAYA,MAAMO,aAAa,GAAG,SAAhBA,aAAgB,GAAM;AAC1B,QAAMC,OAAO,GAAGP,uBAAuB,CAACQ,GAAxB,CAA4B,UAAAC,GAAG;AAAA,aAAK;AAAEV,QAAAA,KAAK,EAAEU,GAAT;AAAcC,QAAAA,KAAK,EAAED;AAArB,OAAL;AAAA,KAA/B,CAAhB;;AAEA,QAAIV,KAAJ,EAAW;AACT,aAAO,oBAAOQ,OAAO,CAACI,MAAR,CAAe;AAAEZ,QAAAA,KAAK,EAALA,KAAF;AAASW,QAAAA,KAAK,EAAEX;AAAhB,OAAf,CAAP,EAAgD,OAAhD,CAAP;AACD;;AAED,WAAOQ,OAAP;AACD,GARD;;AAUA,MAAMK,QAAQ,GAAG,SAAXA,QAAW,GAAM;AACrB,WAAON,aAAa,GAAGO,IAAhB,CAAqB,UAAAC,EAAE;AAAA,aAAIA,EAAE,CAACf,KAAH,KAAaA,KAAjB;AAAA,KAAvB,CAAP;AACD,GAFD;;AAIA,sBACE,gCAAC,qBAAD;AACE,IAAA,YAAY,EAAEa,QAAQ,EADxB;AAEE,IAAA,WAAW,MAFb;AAGE,IAAA,QAAQ,EAAEX,YAHZ;AAIE,IAAA,MAAM,EAAEH,MAJV;AAKE,IAAA,OAAO,EAAEQ,aAAa;AALxB,IADF;AASD,CAtCD;;AAwCAX,eAAe,CAACoB,YAAhB,GAA+B;AAC7BhB,EAAAA,KAAK,EAAE;AADsB,CAA/B;AAIAJ,eAAe,CAACqB,SAAhB,GAA4B;AAC1BnB,EAAAA,IAAI,EAAEoB,sBAAUC,MAAV,CAAiBC,UADG;AAE1BvB,EAAAA,QAAQ,EAAEqB,sBAAUG,IAAV,CAAeD,UAFC;AAG1BrB,EAAAA,MAAM,EAAEmB,sBAAUI,MAAV,CAAiBF,UAHC;AAI1BpB,EAAAA,KAAK,EAAEkB,sBAAUC;AAJS,CAA5B;eAOevB,e","sourcesContent":["import React from 'react';\nimport Creatable from 'react-select/creatable';\nimport PropTypes from 'prop-types';\nimport { uniqBy } from 'lodash';\nimport useDataManager from '../../hooks/useDataManager';\n\nconst CreatableSelect = ({ onChange, name, styles, value }) => {\n  const { allComponentsCategories } = useDataManager();\n\n  const handleChange = (inputValue, actionMeta) => {\n    const { action } = actionMeta;\n\n    if (action === 'clear') {\n      onChange({ target: { name, value: '' } });\n    }\n\n    if (action === 'create-option' || action === 'select-option') {\n      onChange({ target: { name, value: inputValue.value } });\n    }\n  };\n\n  const formatOptions = () => {\n    const options = allComponentsCategories.map(cat => ({ value: cat, label: cat }));\n\n    if (value) {\n      return uniqBy(options.concat({ value, label: value }), 'value');\n    }\n\n    return options;\n  };\n\n  const getValue = () => {\n    return formatOptions().find(el => el.value === value);\n  };\n\n  return (\n    <Creatable\n      defaultValue={getValue()}\n      isClearable\n      onChange={handleChange}\n      styles={styles}\n      options={formatOptions()}\n    />\n  );\n};\n\nCreatableSelect.defaultProps = {\n  value: null,\n};\n\nCreatableSelect.propTypes = {\n  name: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired,\n  styles: PropTypes.object.isRequired,\n  value: PropTypes.string,\n};\n\nexport default CreatableSelect;\n"]},"metadata":{},"sourceType":"script"}