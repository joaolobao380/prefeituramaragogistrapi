{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _typeof = require(\"@babel/runtime/helpers/typeof\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _taggedTemplateLiteral2 = _interopRequireDefault(require(\"@babel/runtime/helpers/taggedTemplateLiteral\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _lodash = require(\"lodash\");\n\nvar _styledComponents = _interopRequireDefault(require(\"styled-components\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _core = require(\"@buffetjs/core\");\n\nvar _reactFontawesome = require(\"@fortawesome/react-fontawesome\");\n\nvar _reactIntl = require(\"react-intl\");\n\nvar _CheckboxWrapper = _interopRequireDefault(require(\"../CheckboxWrapper\"));\n\nvar _BaselineAlignment = _interopRequireDefault(require(\"../BaselineAlignment\"));\n\nvar _SubCategoryWrapper = _interopRequireDefault(require(\"./SubCategoryWrapper\"));\n\nvar _UsersPermissionsContext = require(\"../../../../contexts/UsersPermissionsContext\");\n\nvar _PolicyWrapper = _interopRequireDefault(require(\"./PolicyWrapper\"));\n\nvar _templateObject;\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { \"default\": obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj[\"default\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nvar Border = _styledComponents[\"default\"].div(_templateObject || (_templateObject = (0, _taggedTemplateLiteral2[\"default\"])([\"\\n  flex: 1;\\n  align-self: center;\\n  border-top: 1px solid #f6f6f6;\\n  padding: 0px 10px;\\n\"])));\n\nvar SubCategory = function SubCategory(_ref) {\n  var subCategory = _ref.subCategory;\n\n  var _useIntl = (0, _reactIntl.useIntl)(),\n      formatMessage = _useIntl.formatMessage;\n\n  var _useUsersPermissions = (0, _UsersPermissionsContext.useUsersPermissions)(),\n      onChange = _useUsersPermissions.onChange,\n      onChangeSelectAll = _useUsersPermissions.onChangeSelectAll,\n      onSelectedAction = _useUsersPermissions.onSelectedAction,\n      selectedAction = _useUsersPermissions.selectedAction,\n      modifiedData = _useUsersPermissions.modifiedData;\n\n  var currentScopedModifiedData = (0, _react.useMemo)(function () {\n    return (0, _lodash.get)(modifiedData, subCategory.name, {});\n  }, [modifiedData, subCategory]);\n  var hasAllActionsSelected = (0, _react.useMemo)(function () {\n    return Object.values(currentScopedModifiedData).every(function (action) {\n      return action.enabled === true;\n    });\n  }, [currentScopedModifiedData]);\n  var hasSomeActionsSelected = (0, _react.useMemo)(function () {\n    return Object.values(currentScopedModifiedData).some(function (action) {\n      return action.enabled === true;\n    }) && !hasAllActionsSelected;\n  }, [currentScopedModifiedData, hasAllActionsSelected]);\n  var handleChangeSelectAll = (0, _react.useCallback)(function (_ref2) {\n    var name = _ref2.target.name;\n    onChangeSelectAll({\n      target: {\n        name: name,\n        value: !hasAllActionsSelected\n      }\n    });\n  }, [hasAllActionsSelected, onChangeSelectAll]);\n  var isActionSelected = (0, _react.useCallback)(function (actionName) {\n    return selectedAction === actionName;\n  }, [selectedAction]);\n  return /*#__PURE__*/_react[\"default\"].createElement(_SubCategoryWrapper[\"default\"], null, /*#__PURE__*/_react[\"default\"].createElement(_core.Flex, {\n    justifyContent: \"space-between\",\n    alignItems: \"center\"\n  }, /*#__PURE__*/_react[\"default\"].createElement(_core.Padded, {\n    right: true,\n    size: \"sm\"\n  }, /*#__PURE__*/_react[\"default\"].createElement(_core.Text, {\n    lineHeight: \"18px\",\n    color: \"#919bae\",\n    fontWeight: \"bold\",\n    fontSize: \"xs\",\n    textTransform: \"uppercase\"\n  }, subCategory.label)), /*#__PURE__*/_react[\"default\"].createElement(Border, null), /*#__PURE__*/_react[\"default\"].createElement(_core.Padded, {\n    left: true,\n    size: \"sm\"\n  }, /*#__PURE__*/_react[\"default\"].createElement(_BaselineAlignment[\"default\"], null), /*#__PURE__*/_react[\"default\"].createElement(_core.Checkbox, {\n    name: subCategory.name,\n    message: formatMessage({\n      id: 'app.utils.select-all'\n    }),\n    onChange: handleChangeSelectAll,\n    someChecked: hasSomeActionsSelected,\n    value: hasAllActionsSelected\n  }))), /*#__PURE__*/_react[\"default\"].createElement(_BaselineAlignment[\"default\"], null), /*#__PURE__*/_react[\"default\"].createElement(_core.Padded, {\n    top: true,\n    size: \"xs\"\n  }, /*#__PURE__*/_react[\"default\"].createElement(_core.Flex, {\n    flexWrap: \"wrap\"\n  }, subCategory.actions.map(function (action) {\n    var name = \"\".concat(action.name, \".enabled\");\n    return /*#__PURE__*/_react[\"default\"].createElement(_CheckboxWrapper[\"default\"], {\n      isActive: isActionSelected(action.name),\n      key: action.name\n    }, /*#__PURE__*/_react[\"default\"].createElement(_core.Checkbox, {\n      value: (0, _lodash.get)(modifiedData, name, false),\n      name: name,\n      message: action.label,\n      onChange: onChange\n    }), /*#__PURE__*/_react[\"default\"].createElement(_PolicyWrapper[\"default\"], {\n      onClick: function onClick() {\n        return onSelectedAction(action.name);\n      }\n    }, /*#__PURE__*/_react[\"default\"].createElement(_reactFontawesome.FontAwesomeIcon, {\n      icon: \"cog\"\n    })));\n  }))));\n};\n\nSubCategory.propTypes = {\n  subCategory: _propTypes[\"default\"].object.isRequired\n};\nvar _default = SubCategory;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["/Users/joaovictorlobao/prefeituramaragogistrapi/.cache/plugins/strapi-plugin-users-permissions/admin/src/components/Permissions/PermissionRow/SubCategory/index.js"],"names":["Border","styled","div","SubCategory","subCategory","formatMessage","onChange","onChangeSelectAll","onSelectedAction","selectedAction","modifiedData","currentScopedModifiedData","name","hasAllActionsSelected","Object","values","every","action","enabled","hasSomeActionsSelected","some","handleChangeSelectAll","target","value","isActionSelected","actionName","label","id","actions","map","propTypes","PropTypes","object","isRequired"],"mappings":";;;;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;;;;;AAEA,IAAMA,MAAM,GAAGC,6BAAOC,GAAV,mLAAZ;;AAOA,IAAMC,WAAW,GAAG,SAAdA,WAAc,OAAqB;AAAA,MAAlBC,WAAkB,QAAlBA,WAAkB;;AACvC,iBAA0B,yBAA1B;AAAA,MAAQC,aAAR,YAAQA,aAAR;;AACA,6BAMI,mDANJ;AAAA,MACEC,QADF,wBACEA,QADF;AAAA,MAEEC,iBAFF,wBAEEA,iBAFF;AAAA,MAGEC,gBAHF,wBAGEA,gBAHF;AAAA,MAIEC,cAJF,wBAIEA,cAJF;AAAA,MAKEC,YALF,wBAKEA,YALF;;AAQA,MAAMC,yBAAyB,GAAG,oBAAQ,YAAM;AAC9C,WAAO,iBAAID,YAAJ,EAAkBN,WAAW,CAACQ,IAA9B,EAAoC,EAApC,CAAP;AACD,GAFiC,EAE/B,CAACF,YAAD,EAAeN,WAAf,CAF+B,CAAlC;AAIA,MAAMS,qBAAqB,GAAG,oBAAQ,YAAM;AAC1C,WAAOC,MAAM,CAACC,MAAP,CAAcJ,yBAAd,EAAyCK,KAAzC,CAA+C,UAAAC,MAAM;AAAA,aAAIA,MAAM,CAACC,OAAP,KAAmB,IAAvB;AAAA,KAArD,CAAP;AACD,GAF6B,EAE3B,CAACP,yBAAD,CAF2B,CAA9B;AAIA,MAAMQ,sBAAsB,GAAG,oBAAQ,YAAM;AAC3C,WACEL,MAAM,CAACC,MAAP,CAAcJ,yBAAd,EAAyCS,IAAzC,CAA8C,UAAAH,MAAM;AAAA,aAAIA,MAAM,CAACC,OAAP,KAAmB,IAAvB;AAAA,KAApD,KACA,CAACL,qBAFH;AAID,GAL8B,EAK5B,CAACF,yBAAD,EAA4BE,qBAA5B,CAL4B,CAA/B;AAOA,MAAMQ,qBAAqB,GAAG,wBAC5B,iBAA0B;AAAA,QAAbT,IAAa,SAAvBU,MAAuB,CAAbV,IAAa;AACxBL,IAAAA,iBAAiB,CAAC;AAAEe,MAAAA,MAAM,EAAE;AAAEV,QAAAA,IAAI,EAAJA,IAAF;AAAQW,QAAAA,KAAK,EAAE,CAACV;AAAhB;AAAV,KAAD,CAAjB;AACD,GAH2B,EAI5B,CAACA,qBAAD,EAAwBN,iBAAxB,CAJ4B,CAA9B;AAOA,MAAMiB,gBAAgB,GAAG,wBACvB,UAAAC,UAAU,EAAI;AACZ,WAAOhB,cAAc,KAAKgB,UAA1B;AACD,GAHsB,EAIvB,CAAChB,cAAD,CAJuB,CAAzB;AAOA,sBACE,gCAAC,8BAAD,qBACE,gCAAC,UAAD;AAAM,IAAA,cAAc,EAAC,eAArB;AAAqC,IAAA,UAAU,EAAC;AAAhD,kBACE,gCAAC,YAAD;AAAQ,IAAA,KAAK,MAAb;AAAc,IAAA,IAAI,EAAC;AAAnB,kBACE,gCAAC,UAAD;AACE,IAAA,UAAU,EAAC,MADb;AAEE,IAAA,KAAK,EAAC,SAFR;AAGE,IAAA,UAAU,EAAC,MAHb;AAIE,IAAA,QAAQ,EAAC,IAJX;AAKE,IAAA,aAAa,EAAC;AALhB,KAOGL,WAAW,CAACsB,KAPf,CADF,CADF,eAYE,gCAAC,MAAD,OAZF,eAaE,gCAAC,YAAD;AAAQ,IAAA,IAAI,MAAZ;AAAa,IAAA,IAAI,EAAC;AAAlB,kBACE,gCAAC,6BAAD,OADF,eAEE,gCAAC,cAAD;AACE,IAAA,IAAI,EAAEtB,WAAW,CAACQ,IADpB;AAEE,IAAA,OAAO,EAAEP,aAAa,CAAC;AAAEsB,MAAAA,EAAE,EAAE;AAAN,KAAD,CAFxB;AAGE,IAAA,QAAQ,EAAEN,qBAHZ;AAIE,IAAA,WAAW,EAAEF,sBAJf;AAKE,IAAA,KAAK,EAAEN;AALT,IAFF,CAbF,CADF,eAyBE,gCAAC,6BAAD,OAzBF,eA0BE,gCAAC,YAAD;AAAQ,IAAA,GAAG,MAAX;AAAY,IAAA,IAAI,EAAC;AAAjB,kBACE,gCAAC,UAAD;AAAM,IAAA,QAAQ,EAAC;AAAf,KACGT,WAAW,CAACwB,OAAZ,CAAoBC,GAApB,CAAwB,UAAAZ,MAAM,EAAI;AACjC,QAAML,IAAI,aAAMK,MAAM,CAACL,IAAb,aAAV;AAEA,wBACE,gCAAC,2BAAD;AAAiB,MAAA,QAAQ,EAAEY,gBAAgB,CAACP,MAAM,CAACL,IAAR,CAA3C;AAA0D,MAAA,GAAG,EAAEK,MAAM,CAACL;AAAtE,oBACE,gCAAC,cAAD;AACE,MAAA,KAAK,EAAE,iBAAIF,YAAJ,EAAkBE,IAAlB,EAAwB,KAAxB,CADT;AAEE,MAAA,IAAI,EAAEA,IAFR;AAGE,MAAA,OAAO,EAAEK,MAAM,CAACS,KAHlB;AAIE,MAAA,QAAQ,EAAEpB;AAJZ,MADF,eAOE,gCAAC,yBAAD;AAAe,MAAA,OAAO,EAAE;AAAA,eAAME,gBAAgB,CAACS,MAAM,CAACL,IAAR,CAAtB;AAAA;AAAxB,oBACE,gCAAC,iCAAD;AAAiB,MAAA,IAAI,EAAC;AAAtB,MADF,CAPF,CADF;AAaD,GAhBA,CADH,CADF,CA1BF,CADF;AAkDD,CAzFD;;AA2FAT,WAAW,CAAC2B,SAAZ,GAAwB;AACtB1B,EAAAA,WAAW,EAAE2B,sBAAUC,MAAV,CAAiBC;AADR,CAAxB;eAIe9B,W","sourcesContent":["import React, { useCallback, useMemo } from 'react';\nimport { get } from 'lodash';\nimport styled from 'styled-components';\nimport PropTypes from 'prop-types';\nimport { Flex, Padded, Text, Checkbox } from '@buffetjs/core';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { useIntl } from 'react-intl';\nimport CheckboxWrapper from '../CheckboxWrapper';\nimport BaselineAlignment from '../BaselineAlignment';\nimport SubCategoryWrapper from './SubCategoryWrapper';\nimport { useUsersPermissions } from '../../../../contexts/UsersPermissionsContext';\nimport PolicyWrapper from './PolicyWrapper';\n\nconst Border = styled.div`\n  flex: 1;\n  align-self: center;\n  border-top: 1px solid #f6f6f6;\n  padding: 0px 10px;\n`;\n\nconst SubCategory = ({ subCategory }) => {\n  const { formatMessage } = useIntl();\n  const {\n    onChange,\n    onChangeSelectAll,\n    onSelectedAction,\n    selectedAction,\n    modifiedData,\n  } = useUsersPermissions();\n\n  const currentScopedModifiedData = useMemo(() => {\n    return get(modifiedData, subCategory.name, {});\n  }, [modifiedData, subCategory]);\n\n  const hasAllActionsSelected = useMemo(() => {\n    return Object.values(currentScopedModifiedData).every(action => action.enabled === true);\n  }, [currentScopedModifiedData]);\n\n  const hasSomeActionsSelected = useMemo(() => {\n    return (\n      Object.values(currentScopedModifiedData).some(action => action.enabled === true) &&\n      !hasAllActionsSelected\n    );\n  }, [currentScopedModifiedData, hasAllActionsSelected]);\n\n  const handleChangeSelectAll = useCallback(\n    ({ target: { name } }) => {\n      onChangeSelectAll({ target: { name, value: !hasAllActionsSelected } });\n    },\n    [hasAllActionsSelected, onChangeSelectAll]\n  );\n\n  const isActionSelected = useCallback(\n    actionName => {\n      return selectedAction === actionName;\n    },\n    [selectedAction]\n  );\n\n  return (\n    <SubCategoryWrapper>\n      <Flex justifyContent=\"space-between\" alignItems=\"center\">\n        <Padded right size=\"sm\">\n          <Text\n            lineHeight=\"18px\"\n            color=\"#919bae\"\n            fontWeight=\"bold\"\n            fontSize=\"xs\"\n            textTransform=\"uppercase\"\n          >\n            {subCategory.label}\n          </Text>\n        </Padded>\n        <Border />\n        <Padded left size=\"sm\">\n          <BaselineAlignment />\n          <Checkbox\n            name={subCategory.name}\n            message={formatMessage({ id: 'app.utils.select-all' })}\n            onChange={handleChangeSelectAll}\n            someChecked={hasSomeActionsSelected}\n            value={hasAllActionsSelected}\n          />\n        </Padded>\n      </Flex>\n      <BaselineAlignment />\n      <Padded top size=\"xs\">\n        <Flex flexWrap=\"wrap\">\n          {subCategory.actions.map(action => {\n            const name = `${action.name}.enabled`;\n\n            return (\n              <CheckboxWrapper isActive={isActionSelected(action.name)} key={action.name}>\n                <Checkbox\n                  value={get(modifiedData, name, false)}\n                  name={name}\n                  message={action.label}\n                  onChange={onChange}\n                />\n                <PolicyWrapper onClick={() => onSelectedAction(action.name)}>\n                  <FontAwesomeIcon icon=\"cog\" />\n                </PolicyWrapper>\n              </CheckboxWrapper>\n            );\n          })}\n        </Flex>\n      </Padded>\n    </SubCategoryWrapper>\n  );\n};\n\nSubCategory.propTypes = {\n  subCategory: PropTypes.object.isRequired,\n};\n\nexport default SubCategory;\n"]},"metadata":{},"sourceType":"script"}