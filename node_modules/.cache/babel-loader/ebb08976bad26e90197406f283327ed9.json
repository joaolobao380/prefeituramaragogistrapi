{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createPermissionsArrayFromCategory = exports.createPermission = exports.createConditionsArray = exports[\"default\"] = void 0;\n\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\n/**\n * Returns an array of condition names when a condition is enabled\n * @param {object} conditions\n * @config {boolean}\n */\nvar createConditionsArray = function createConditionsArray(conditions) {\n  return Object.entries(conditions).filter(function (_ref) {\n    var _ref2 = (0, _slicedToArray2[\"default\"])(_ref, 2),\n        conditionValue = _ref2[1];\n\n    return conditionValue;\n  }).map(function (_ref3) {\n    var _ref4 = (0, _slicedToArray2[\"default\"])(_ref3, 1),\n        conditionName = _ref4[0];\n\n    return conditionName;\n  });\n};\n\nexports.createConditionsArray = createConditionsArray;\n\nvar createPermission = function createPermission(array) {\n  var _array = (0, _slicedToArray2[\"default\"])(array, 2),\n      actionName = _array[0],\n      conditions = _array[1].conditions;\n\n  return {\n    action: actionName,\n    subject: null,\n    conditions: createConditionsArray(conditions),\n    properties: {}\n  };\n};\n\nexports.createPermission = createPermission;\n\nvar createPermissionsArrayFromCategory = function createPermissionsArrayFromCategory(categoryPermissions) {\n  return Object.values(categoryPermissions).reduce(function (acc, current) {\n    var permissions = Object.entries(current).reduce(function (acc1, current1) {\n      var _current = (0, _slicedToArray2[\"default\"])(current1, 2),\n          enabled = _current[1].properties.enabled;\n\n      if (!enabled) {\n        return acc1;\n      }\n\n      var permission = createPermission(current1);\n      acc1.push(permission);\n      return acc1;\n    }, []);\n    return [].concat((0, _toConsumableArray2[\"default\"])(acc), (0, _toConsumableArray2[\"default\"])(permissions));\n  }, []);\n};\n\nexports.createPermissionsArrayFromCategory = createPermissionsArrayFromCategory;\n\nvar formatSettingsPermissionsToAPI = function formatSettingsPermissionsToAPI(settingsPermissionsObject) {\n  return Object.values(settingsPermissionsObject).reduce(function (acc, current) {\n    var currentCategoryPermissions = createPermissionsArrayFromCategory(current);\n    return [].concat((0, _toConsumableArray2[\"default\"])(acc), (0, _toConsumableArray2[\"default\"])(currentCategoryPermissions));\n  }, []);\n};\n\nvar _default = formatSettingsPermissionsToAPI;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["/Users/joaovictorlobao/prefeituramaragogistrapi/.cache/admin/src/components/Roles/Permissions/utils/formatSettingsPermissionsToAPI.js"],"names":["createConditionsArray","conditions","Object","entries","filter","conditionValue","map","conditionName","createPermission","array","actionName","action","subject","properties","createPermissionsArrayFromCategory","categoryPermissions","values","reduce","acc","current","permissions","acc1","current1","enabled","permission","push","formatSettingsPermissionsToAPI","settingsPermissionsObject","currentCategoryPermissions"],"mappings":";;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA,IAAMA,qBAAqB,GAAG,SAAxBA,qBAAwB,CAAAC,UAAU,EAAI;AAC1C,SAAOC,MAAM,CAACC,OAAP,CAAeF,UAAf,EACJG,MADI,CACG,gBAAwB;AAAA;AAAA,QAApBC,cAAoB;;AAC9B,WAAOA,cAAP;AACD,GAHI,EAIJC,GAJI,CAIA;AAAA;AAAA,QAAEC,aAAF;;AAAA,WAAqBA,aAArB;AAAA,GAJA,CAAP;AAKD,CAND;;;;AAQA,IAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,CAAAC,KAAK,EAAI;AAChC,+CAAqCA,KAArC;AAAA,MAAOC,UAAP;AAAA,MAAqBT,UAArB,aAAqBA,UAArB;;AAEA,SAAO;AACLU,IAAAA,MAAM,EAAED,UADH;AAELE,IAAAA,OAAO,EAAE,IAFJ;AAGLX,IAAAA,UAAU,EAAED,qBAAqB,CAACC,UAAD,CAH5B;AAILY,IAAAA,UAAU,EAAE;AAJP,GAAP;AAMD,CATD;;;;AAWA,IAAMC,kCAAkC,GAAG,SAArCA,kCAAqC,CAAAC,mBAAmB,EAAI;AAChE,SAAOb,MAAM,CAACc,MAAP,CAAcD,mBAAd,EAAmCE,MAAnC,CAA0C,UAACC,GAAD,EAAMC,OAAN,EAAkB;AACjE,QAAMC,WAAW,GAAGlB,MAAM,CAACC,OAAP,CAAegB,OAAf,EAAwBF,MAAxB,CAA+B,UAACI,IAAD,EAAOC,QAAP,EAAoB;AACrE,qDAKIA,QALJ;AAAA,UAGkBC,OAHlB,eAGIV,UAHJ,CAGkBU,OAHlB;;AAOA,UAAI,CAACA,OAAL,EAAc;AACZ,eAAOF,IAAP;AACD;;AAED,UAAMG,UAAU,GAAGhB,gBAAgB,CAACc,QAAD,CAAnC;AAEAD,MAAAA,IAAI,CAACI,IAAL,CAAUD,UAAV;AAEA,aAAOH,IAAP;AACD,KAjBmB,EAiBjB,EAjBiB,CAApB;AAmBA,yDAAWH,GAAX,uCAAmBE,WAAnB;AACD,GArBM,EAqBJ,EArBI,CAAP;AAsBD,CAvBD;;;;AAyBA,IAAMM,8BAA8B,GAAG,SAAjCA,8BAAiC,CAAAC,yBAAyB,EAAI;AAClE,SAAOzB,MAAM,CAACc,MAAP,CAAcW,yBAAd,EAAyCV,MAAzC,CAAgD,UAACC,GAAD,EAAMC,OAAN,EAAkB;AACvE,QAAMS,0BAA0B,GAAGd,kCAAkC,CAACK,OAAD,CAArE;AAEA,yDAAWD,GAAX,uCAAmBU,0BAAnB;AACD,GAJM,EAIJ,EAJI,CAAP;AAKD,CAND;;eAQeF,8B","sourcesContent":["/**\n * Returns an array of condition names when a condition is enabled\n * @param {object} conditions\n * @config {boolean}\n */\nconst createConditionsArray = conditions => {\n  return Object.entries(conditions)\n    .filter(([, conditionValue]) => {\n      return conditionValue;\n    })\n    .map(([conditionName]) => conditionName);\n};\n\nconst createPermission = array => {\n  const [actionName, { conditions }] = array;\n\n  return {\n    action: actionName,\n    subject: null,\n    conditions: createConditionsArray(conditions),\n    properties: {},\n  };\n};\n\nconst createPermissionsArrayFromCategory = categoryPermissions => {\n  return Object.values(categoryPermissions).reduce((acc, current) => {\n    const permissions = Object.entries(current).reduce((acc1, current1) => {\n      const [\n        ,\n        {\n          properties: { enabled },\n        },\n      ] = current1;\n\n      if (!enabled) {\n        return acc1;\n      }\n\n      const permission = createPermission(current1);\n\n      acc1.push(permission);\n\n      return acc1;\n    }, []);\n\n    return [...acc, ...permissions];\n  }, []);\n};\n\nconst formatSettingsPermissionsToAPI = settingsPermissionsObject => {\n  return Object.values(settingsPermissionsObject).reduce((acc, current) => {\n    const currentCategoryPermissions = createPermissionsArrayFromCategory(current);\n\n    return [...acc, ...currentCategoryPermissions];\n  }, []);\n};\n\nexport default formatSettingsPermissionsToAPI;\nexport { createConditionsArray, createPermission, createPermissionsArrayFromCategory };\n"]},"metadata":{},"sourceType":"script"}