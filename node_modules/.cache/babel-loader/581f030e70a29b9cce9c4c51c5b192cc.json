{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _typeof = require(\"@babel/runtime/helpers/typeof\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _reactRouterDom = require(\"react-router-dom\");\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _lodash = require(\"lodash\");\n\nvar _strapiHelperPlugin = require(\"strapi-helper-plugin\");\n\nvar _custom = require(\"@buffetjs/custom\");\n\nvar _ListViewContext = _interopRequireDefault(require(\"../../contexts/ListViewContext\"));\n\nvar _convertAttrObjToArray = _interopRequireDefault(require(\"../../utils/convertAttrObjToArray\"));\n\nvar _getAttributeDisplayedType = _interopRequireDefault(require(\"../../utils/getAttributeDisplayedType\"));\n\nvar _pluginId = _interopRequireDefault(require(\"../../pluginId\"));\n\nvar _getComponents = _interopRequireDefault(require(\"../../utils/getComponents\"));\n\nvar _getTrad = _interopRequireDefault(require(\"../../utils/getTrad\"));\n\nvar _makeSearch = _interopRequireDefault(require(\"../../utils/makeSearch\"));\n\nvar _ListRow = _interopRequireDefault(require(\"../../components/ListRow\"));\n\nvar _List = _interopRequireDefault(require(\"../../components/List\"));\n\nvar _ListButton = _interopRequireDefault(require(\"../../components/ListButton\"));\n\nvar _useDataManager2 = _interopRequireDefault(require(\"../../hooks/useDataManager\"));\n\nvar _ListHeader = _interopRequireDefault(require(\"../../components/ListHeader\"));\n\nvar _LeftMenu = _interopRequireDefault(require(\"../LeftMenu\"));\n\nvar _Wrapper = _interopRequireDefault(require(\"./Wrapper\"));\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { \"default\": obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj[\"default\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2[\"default\"])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n/* eslint-disable indent */\nvar ListView = function ListView() {\n  var _useDataManager = (0, _useDataManager2[\"default\"])(),\n      initialData = _useDataManager.initialData,\n      modifiedData = _useDataManager.modifiedData,\n      isInDevelopmentMode = _useDataManager.isInDevelopmentMode,\n      isInContentTypeView = _useDataManager.isInContentTypeView,\n      submitData = _useDataManager.submitData,\n      toggleModalCancel = _useDataManager.toggleModalCancel;\n\n  var _useGlobalContext = (0, _strapiHelperPlugin.useGlobalContext)(),\n      emitEvent = _useGlobalContext.emitEvent,\n      formatMessage = _useGlobalContext.formatMessage,\n      plugins = _useGlobalContext.plugins;\n\n  var _useHistory = (0, _reactRouterDom.useHistory)(),\n      push = _useHistory.push,\n      goBack = _useHistory.goBack;\n\n  var _useLocation = (0, _reactRouterDom.useLocation)(),\n      search = _useLocation.search;\n\n  var _useState = (0, _react.useState)(true),\n      _useState2 = (0, _slicedToArray2[\"default\"])(_useState, 2),\n      enablePrompt = _useState2[0],\n      togglePrompt = _useState2[1];\n\n  (0, _react.useEffect)(function () {\n    if (search === '') {\n      togglePrompt(true);\n    }\n  }, [search]); // Disabling the prompt on the first render if one of the modal is open\n\n  (0, _react.useEffect)(function () {\n    if (search !== '') {\n      togglePrompt(false);\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, []);\n  var firstMainDataPath = isInContentTypeView ? 'contentType' : 'component';\n  var mainDataTypeAttributesPath = [firstMainDataPath, 'schema', 'attributes'];\n  var targetUid = (0, _lodash.get)(modifiedData, [firstMainDataPath, 'uid']);\n  var isTemporary = (0, _lodash.get)(modifiedData, [firstMainDataPath, 'isTemporary'], false);\n  var contentTypeKind = (0, _lodash.get)(modifiedData, [firstMainDataPath, 'schema', 'kind'], null);\n  var attributes = (0, _lodash.get)(modifiedData, mainDataTypeAttributesPath, {});\n  var attributesLength = Object.keys(attributes).length;\n  var currentDataName = (0, _lodash.get)(initialData, [firstMainDataPath, 'schema', 'name'], '');\n  var isFromPlugin = (0, _lodash.has)(initialData, [firstMainDataPath, 'plugin']);\n  var hasModelBeenModified = !(0, _lodash.isEqual)(modifiedData, initialData);\n  var forTarget = isInContentTypeView ? 'contentType' : 'component';\n\n  var handleClickAddField = /*#__PURE__*/function () {\n    var _ref = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee(forTarget, targetUid, firstHeaderObj, secondHeaderObj, thirdHeaderObj, fourthHeaderObj) {\n      var searchObj;\n      return _regenerator[\"default\"].wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return wait();\n\n            case 2:\n              searchObj = _objectSpread(_objectSpread(_objectSpread(_objectSpread({\n                modalType: 'chooseAttribute',\n                forTarget: forTarget,\n                targetUid: targetUid\n              }, firstHeaderObj), secondHeaderObj), thirdHeaderObj), fourthHeaderObj);\n              push({\n                search: (0, _makeSearch[\"default\"])(searchObj)\n              });\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handleClickAddField(_x, _x2, _x3, _x4, _x5, _x6) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var handleClickAddComponentToDZ = /*#__PURE__*/function () {\n    var _ref2 = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee2(dzName) {\n      var firstHeaderObject, secondHeaderObj, search;\n      return _regenerator[\"default\"].wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              firstHeaderObject = {\n                header_label_1: currentDataName,\n                header_icon_name_1: 'dynamiczone',\n                header_icon_isCustom_1: false\n              };\n              secondHeaderObj = {\n                header_label_2: dzName\n              };\n              search = _objectSpread(_objectSpread({\n                modalType: 'addComponentToDynamicZone',\n                forTarget: 'contentType',\n                targetUid: targetUid,\n                dynamicZoneTarget: dzName,\n                settingType: 'base',\n                step: '1',\n                actionType: 'edit'\n              }, firstHeaderObject), secondHeaderObj);\n              _context2.next = 5;\n              return wait();\n\n            case 5:\n              push({\n                search: (0, _makeSearch[\"default\"])(search, true)\n              });\n\n            case 6:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function handleClickAddComponentToDZ(_x7) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var handleClickEditField = /*#__PURE__*/function () {\n    var _ref3 = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee3(forTarget, targetUid, attributeName, type, firstHeaderObj, secondHeaderObj, thirdHeaderObj, fourthHeaderObj, fifthHeaderObj) {\n      var attributeType, search;\n      return _regenerator[\"default\"].wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              attributeType = (0, _getAttributeDisplayedType[\"default\"])(type);\n              _context3.next = 3;\n              return wait();\n\n            case 3:\n              search = _objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread({\n                modalType: 'attribute',\n                actionType: 'edit',\n                settingType: 'base',\n                forTarget: forTarget,\n                targetUid: targetUid,\n                attributeName: attributeName,\n                attributeType: attributeType,\n                step: type === 'component' ? '2' : null\n              }, firstHeaderObj), secondHeaderObj), thirdHeaderObj), fourthHeaderObj), fifthHeaderObj);\n              _context3.next = 6;\n              return wait();\n\n            case 6:\n              push({\n                search: (0, _makeSearch[\"default\"])(search, true)\n              });\n\n            case 7:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function handleClickEditField(_x8, _x9, _x10, _x11, _x12, _x13, _x14, _x15, _x16) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var getDescription = function getDescription() {\n    var description = (0, _lodash.get)(modifiedData, [firstMainDataPath, 'schema', 'description'], null);\n    return description || formatMessage({\n      id: \"\".concat(_pluginId[\"default\"], \".modelPage.contentHeader.emptyDescription.description\")\n    });\n  };\n\n  var wait = /*#__PURE__*/function () {\n    var _ref4 = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee4() {\n      return _regenerator[\"default\"].wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              togglePrompt(false);\n              return _context4.abrupt(\"return\", new Promise(function (resolve) {\n                return setTimeout(resolve, 100);\n              }));\n\n            case 2:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n\n    return function wait() {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  var label = (0, _lodash.get)(modifiedData, [firstMainDataPath, 'schema', 'name'], '');\n  var kind = (0, _lodash.get)(modifiedData, [firstMainDataPath, 'schema', 'kind'], '');\n  var headerProps = {\n    actions: isInDevelopmentMode ? [{\n      color: 'cancel',\n      onClick: function onClick() {\n        toggleModalCancel();\n      },\n      label: formatMessage({\n        id: \"\".concat(_pluginId[\"default\"], \".form.button.cancel\")\n      }),\n      type: 'button',\n      disabled: (0, _lodash.isEqual)(modifiedData, initialData)\n    }, {\n      className: 'button-submit',\n      color: 'success',\n      onClick: function onClick() {\n        return submitData();\n      },\n      label: formatMessage({\n        id: \"\".concat(_pluginId[\"default\"], \".form.button.save\")\n      }),\n      type: 'submit',\n      disabled: (0, _lodash.isEqual)(modifiedData, initialData)\n    }] : [],\n    title: {\n      label: label,\n      cta: isInDevelopmentMode && !isFromPlugin ? {\n        icon: 'pencil-alt',\n        onClick: function () {\n          var _onClick = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee5() {\n            var contentType;\n            return _regenerator[\"default\"].wrap(function _callee5$(_context5) {\n              while (1) {\n                switch (_context5.prev = _context5.next) {\n                  case 0:\n                    _context5.next = 2;\n                    return wait();\n\n                  case 2:\n                    contentType = kind || firstMainDataPath;\n\n                    if (contentType === 'collectionType') {\n                      emitEvent('willEditNameOfContentType');\n                    }\n\n                    if (contentType === 'singleType') {\n                      emitEvent('willEditNameOfSingleType');\n                    }\n\n                    push({\n                      search: (0, _makeSearch[\"default\"])({\n                        modalType: firstMainDataPath,\n                        actionType: 'edit',\n                        settingType: 'base',\n                        forTarget: firstMainDataPath,\n                        targetUid: targetUid,\n                        header_label_1: label,\n                        header_icon_isCustom_1: false,\n                        header_icon_name_1: contentType === 'singleType' ? contentType : firstMainDataPath,\n                        headerId: (0, _getTrad[\"default\"])('modalForm.header-edit')\n                      })\n                    });\n\n                  case 6:\n                  case \"end\":\n                    return _context5.stop();\n                }\n              }\n            }, _callee5);\n          }));\n\n          function onClick() {\n            return _onClick.apply(this, arguments);\n          }\n\n          return onClick;\n        }()\n      } : null\n    },\n    content: getDescription()\n  };\n  var listTitle = [formatMessage({\n    id: \"\".concat(_pluginId[\"default\"], \".table.attributes.title.\").concat(attributesLength > 1 ? 'plural' : 'singular')\n  }, {\n    number: attributesLength\n  })];\n  var addButtonProps = {\n    icon: true,\n    color: 'primary',\n    label: formatMessage({\n      id: \"\".concat(_pluginId[\"default\"], \".button.attributes.add.another\")\n    }),\n    onClick: function onClick() {\n      var headerDisplayObject = {\n        header_label_1: currentDataName,\n        header_icon_name_1: forTarget === 'contentType' ? contentTypeKind : forTarget,\n        header_icon_isCustom_1: false\n      };\n      handleClickAddField(forTarget, targetUid, headerDisplayObject);\n    }\n  };\n  var listInjectedComponents = (0, _react.useMemo)(function () {\n    return (0, _getComponents[\"default\"])('listView', 'list.link', plugins, {\n      targetUid: targetUid,\n      isTemporary: isTemporary,\n      isInContentTypeView: isInContentTypeView,\n      contentTypeKind: contentTypeKind\n    });\n  }, [plugins, isTemporary, targetUid, isInContentTypeView, contentTypeKind]);\n  var listActions = isInDevelopmentMode ? [].concat((0, _toConsumableArray2[\"default\"])(listInjectedComponents), [/*#__PURE__*/_react[\"default\"].createElement(_ListButton[\"default\"], (0, _extends2[\"default\"])({}, addButtonProps, {\n    key: \"add-button\"\n  }))]) : listInjectedComponents;\n\n  var CustomRow = function CustomRow(props) {\n    var name = props.name;\n    return /*#__PURE__*/_react[\"default\"].createElement(_ListRow[\"default\"], (0, _extends2[\"default\"])({}, props, {\n      attributeName: name,\n      name: name,\n      onClick: handleClickEditField\n    }));\n  };\n\n  CustomRow.defaultProps = {\n    name: null\n  };\n  CustomRow.propTypes = {\n    name: _propTypes[\"default\"].string\n  };\n  return /*#__PURE__*/_react[\"default\"].createElement(_ListViewContext[\"default\"].Provider, {\n    value: {\n      openModalAddField: handleClickAddField\n    }\n  }, /*#__PURE__*/_react[\"default\"].createElement(_Wrapper[\"default\"], null, /*#__PURE__*/_react[\"default\"].createElement(_strapiHelperPlugin.BackHeader, {\n    onClick: goBack\n  }), /*#__PURE__*/_react[\"default\"].createElement(_reactRouterDom.Prompt, {\n    message: formatMessage({\n      id: (0, _getTrad[\"default\"])('prompt.unsaved')\n    }),\n    when: hasModelBeenModified && enablePrompt\n  }), /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: \"container-fluid\"\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: \"row\"\n  }, /*#__PURE__*/_react[\"default\"].createElement(_LeftMenu[\"default\"], {\n    wait: wait\n  }), /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: \"col-md-9 content\",\n    style: {\n      paddingLeft: '30px',\n      paddingRight: '30px'\n    }\n  }, /*#__PURE__*/_react[\"default\"].createElement(_custom.Header, headerProps), /*#__PURE__*/_react[\"default\"].createElement(_strapiHelperPlugin.ListWrapper, {\n    style: {\n      marginBottom: 80\n    }\n  }, /*#__PURE__*/_react[\"default\"].createElement(_ListHeader[\"default\"], {\n    actions: listActions,\n    title: listTitle\n  }), /*#__PURE__*/_react[\"default\"].createElement(_List[\"default\"], {\n    items: (0, _convertAttrObjToArray[\"default\"])(attributes),\n    customRowComponent: function customRowComponent(props) {\n      return /*#__PURE__*/_react[\"default\"].createElement(CustomRow, props);\n    },\n    addComponentToDZ: handleClickAddComponentToDZ,\n    targetUid: targetUid,\n    dataType: forTarget,\n    dataTypeName: currentDataName,\n    mainTypeName: currentDataName,\n    editTarget: forTarget,\n    isMain: true\n  })))))));\n};\n\nvar _default = ListView;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["/Users/joaovictorlobao/prefeituramaragogistrapi/.cache/plugins/strapi-plugin-content-type-builder/admin/src/containers/ListView/index.js"],"names":["ListView","initialData","modifiedData","isInDevelopmentMode","isInContentTypeView","submitData","toggleModalCancel","emitEvent","formatMessage","plugins","push","goBack","search","enablePrompt","togglePrompt","firstMainDataPath","mainDataTypeAttributesPath","targetUid","isTemporary","contentTypeKind","attributes","attributesLength","Object","keys","length","currentDataName","isFromPlugin","hasModelBeenModified","forTarget","handleClickAddField","firstHeaderObj","secondHeaderObj","thirdHeaderObj","fourthHeaderObj","wait","searchObj","modalType","handleClickAddComponentToDZ","dzName","firstHeaderObject","header_label_1","header_icon_name_1","header_icon_isCustom_1","header_label_2","dynamicZoneTarget","settingType","step","actionType","handleClickEditField","attributeName","type","fifthHeaderObj","attributeType","getDescription","description","id","pluginId","Promise","resolve","setTimeout","label","kind","headerProps","actions","color","onClick","disabled","className","title","cta","icon","contentType","headerId","content","listTitle","number","addButtonProps","headerDisplayObject","listInjectedComponents","listActions","CustomRow","props","name","defaultProps","propTypes","PropTypes","string","openModalAddField","paddingLeft","paddingRight","marginBottom"],"mappings":"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","sourcesContent":["import React, { useEffect, useMemo, useState } from 'react';\nimport { Prompt, useHistory, useLocation } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport { get, has, isEqual } from 'lodash';\nimport { BackHeader, ListWrapper, useGlobalContext } from 'strapi-helper-plugin';\nimport { Header } from '@buffetjs/custom';\nimport ListViewContext from '../../contexts/ListViewContext';\nimport convertAttrObjToArray from '../../utils/convertAttrObjToArray';\nimport getAttributeDisplayedType from '../../utils/getAttributeDisplayedType';\nimport pluginId from '../../pluginId';\nimport getComponents from '../../utils/getComponents';\nimport getTrad from '../../utils/getTrad';\nimport makeSearch from '../../utils/makeSearch';\nimport ListRow from '../../components/ListRow';\nimport List from '../../components/List';\nimport ListButton from '../../components/ListButton';\nimport useDataManager from '../../hooks/useDataManager';\nimport ListHeader from '../../components/ListHeader';\nimport LeftMenu from '../LeftMenu';\nimport Wrapper from './Wrapper';\n\n/* eslint-disable indent */\n\nconst ListView = () => {\n  const {\n    initialData,\n    modifiedData,\n    isInDevelopmentMode,\n    isInContentTypeView,\n    submitData,\n    toggleModalCancel,\n  } = useDataManager();\n\n  const { emitEvent, formatMessage, plugins } = useGlobalContext();\n  const { push, goBack } = useHistory();\n  const { search } = useLocation();\n  const [enablePrompt, togglePrompt] = useState(true);\n\n  useEffect(() => {\n    if (search === '') {\n      togglePrompt(true);\n    }\n  }, [search]);\n\n  // Disabling the prompt on the first render if one of the modal is open\n  useEffect(() => {\n    if (search !== '') {\n      togglePrompt(false);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const firstMainDataPath = isInContentTypeView ? 'contentType' : 'component';\n  const mainDataTypeAttributesPath = [firstMainDataPath, 'schema', 'attributes'];\n  const targetUid = get(modifiedData, [firstMainDataPath, 'uid']);\n  const isTemporary = get(modifiedData, [firstMainDataPath, 'isTemporary'], false);\n  const contentTypeKind = get(modifiedData, [firstMainDataPath, 'schema', 'kind'], null);\n\n  const attributes = get(modifiedData, mainDataTypeAttributesPath, {});\n  const attributesLength = Object.keys(attributes).length;\n  const currentDataName = get(initialData, [firstMainDataPath, 'schema', 'name'], '');\n  const isFromPlugin = has(initialData, [firstMainDataPath, 'plugin']);\n  const hasModelBeenModified = !isEqual(modifiedData, initialData);\n  const forTarget = isInContentTypeView ? 'contentType' : 'component';\n\n  const handleClickAddField = async (\n    forTarget,\n    targetUid,\n    firstHeaderObj,\n    secondHeaderObj,\n    thirdHeaderObj,\n    fourthHeaderObj\n  ) => {\n    // disable the prompt\n    await wait();\n\n    const searchObj = {\n      modalType: 'chooseAttribute',\n      forTarget,\n      targetUid,\n      ...firstHeaderObj,\n      ...secondHeaderObj,\n      ...thirdHeaderObj,\n      ...fourthHeaderObj,\n    };\n\n    push({ search: makeSearch(searchObj) });\n  };\n\n  const handleClickAddComponentToDZ = async dzName => {\n    const firstHeaderObject = {\n      header_label_1: currentDataName,\n      header_icon_name_1: 'dynamiczone',\n      header_icon_isCustom_1: false,\n    };\n    const secondHeaderObj = {\n      header_label_2: dzName,\n    };\n    const search = {\n      modalType: 'addComponentToDynamicZone',\n      forTarget: 'contentType',\n      targetUid,\n      dynamicZoneTarget: dzName,\n      settingType: 'base',\n      step: '1',\n      actionType: 'edit',\n      ...firstHeaderObject,\n      ...secondHeaderObj,\n    };\n\n    await wait();\n\n    push({ search: makeSearch(search, true) });\n  };\n\n  const handleClickEditField = async (\n    forTarget,\n    targetUid,\n    attributeName,\n    type,\n    firstHeaderObj,\n    secondHeaderObj,\n    thirdHeaderObj,\n    fourthHeaderObj,\n    fifthHeaderObj\n  ) => {\n    const attributeType = getAttributeDisplayedType(type);\n\n    await wait();\n\n    const search = {\n      modalType: 'attribute',\n      actionType: 'edit',\n      settingType: 'base',\n      forTarget,\n      targetUid,\n      attributeName,\n      attributeType,\n      step: type === 'component' ? '2' : null,\n      ...firstHeaderObj,\n      ...secondHeaderObj,\n      ...thirdHeaderObj,\n      ...fourthHeaderObj,\n      ...fifthHeaderObj,\n    };\n\n    await wait();\n\n    push({ search: makeSearch(search, true) });\n  };\n\n  const getDescription = () => {\n    const description = get(modifiedData, [firstMainDataPath, 'schema', 'description'], null);\n\n    return (\n      description ||\n      formatMessage({\n        id: `${pluginId}.modelPage.contentHeader.emptyDescription.description`,\n      })\n    );\n  };\n\n  const wait = async () => {\n    togglePrompt(false);\n\n    return new Promise(resolve => setTimeout(resolve, 100));\n  };\n  const label = get(modifiedData, [firstMainDataPath, 'schema', 'name'], '');\n  const kind = get(modifiedData, [firstMainDataPath, 'schema', 'kind'], '');\n\n  const headerProps = {\n    actions: isInDevelopmentMode\n      ? [\n          {\n            color: 'cancel',\n            onClick: () => {\n              toggleModalCancel();\n            },\n            label: formatMessage({\n              id: `${pluginId}.form.button.cancel`,\n            }),\n            type: 'button',\n            disabled: isEqual(modifiedData, initialData),\n          },\n          {\n            className: 'button-submit',\n            color: 'success',\n            onClick: () => submitData(),\n            label: formatMessage({\n              id: `${pluginId}.form.button.save`,\n            }),\n            type: 'submit',\n            disabled: isEqual(modifiedData, initialData),\n          },\n        ]\n      : [],\n    title: {\n      label,\n      cta:\n        isInDevelopmentMode && !isFromPlugin\n          ? {\n              icon: 'pencil-alt',\n              onClick: async () => {\n                await wait();\n\n                const contentType = kind || firstMainDataPath;\n\n                if (contentType === 'collectionType') {\n                  emitEvent('willEditNameOfContentType');\n                }\n                if (contentType === 'singleType') {\n                  emitEvent('willEditNameOfSingleType');\n                }\n\n                push({\n                  search: makeSearch({\n                    modalType: firstMainDataPath,\n                    actionType: 'edit',\n                    settingType: 'base',\n                    forTarget: firstMainDataPath,\n                    targetUid,\n                    header_label_1: label,\n                    header_icon_isCustom_1: false,\n                    header_icon_name_1:\n                      contentType === 'singleType' ? contentType : firstMainDataPath,\n                    headerId: getTrad('modalForm.header-edit'),\n                  }),\n                });\n              },\n            }\n          : null,\n    },\n    content: getDescription(),\n  };\n\n  const listTitle = [\n    formatMessage(\n      {\n        id: `${pluginId}.table.attributes.title.${attributesLength > 1 ? 'plural' : 'singular'}`,\n      },\n      { number: attributesLength }\n    ),\n  ];\n\n  const addButtonProps = {\n    icon: true,\n    color: 'primary',\n    label: formatMessage({ id: `${pluginId}.button.attributes.add.another` }),\n    onClick: () => {\n      const headerDisplayObject = {\n        header_label_1: currentDataName,\n        header_icon_name_1: forTarget === 'contentType' ? contentTypeKind : forTarget,\n        header_icon_isCustom_1: false,\n      };\n      handleClickAddField(forTarget, targetUid, headerDisplayObject);\n    },\n  };\n\n  const listInjectedComponents = useMemo(() => {\n    return getComponents('listView', 'list.link', plugins, {\n      targetUid,\n      isTemporary,\n      isInContentTypeView,\n      contentTypeKind,\n    });\n  }, [plugins, isTemporary, targetUid, isInContentTypeView, contentTypeKind]);\n\n  const listActions = isInDevelopmentMode\n    ? [...listInjectedComponents, <ListButton {...addButtonProps} key=\"add-button\" />]\n    : listInjectedComponents;\n\n  const CustomRow = props => {\n    const { name } = props;\n\n    return <ListRow {...props} attributeName={name} name={name} onClick={handleClickEditField} />;\n  };\n\n  CustomRow.defaultProps = {\n    name: null,\n  };\n\n  CustomRow.propTypes = {\n    name: PropTypes.string,\n  };\n\n  return (\n    <ListViewContext.Provider value={{ openModalAddField: handleClickAddField }}>\n      <Wrapper>\n        <BackHeader onClick={goBack} />\n        <Prompt\n          message={formatMessage({ id: getTrad('prompt.unsaved') })}\n          when={hasModelBeenModified && enablePrompt}\n        />\n        <div className=\"container-fluid\">\n          <div className=\"row\">\n            <LeftMenu wait={wait} />\n            <div className=\"col-md-9 content\" style={{ paddingLeft: '30px', paddingRight: '30px' }}>\n              <Header {...headerProps} />\n\n              <ListWrapper style={{ marginBottom: 80 }}>\n                <ListHeader actions={listActions} title={listTitle} />\n                <List\n                  items={convertAttrObjToArray(attributes)}\n                  customRowComponent={props => <CustomRow {...props} />}\n                  addComponentToDZ={handleClickAddComponentToDZ}\n                  targetUid={targetUid}\n                  dataType={forTarget}\n                  dataTypeName={currentDataName}\n                  mainTypeName={currentDataName}\n                  editTarget={forTarget}\n                  isMain\n                />\n              </ListWrapper>\n            </div>\n          </div>\n        </div>\n      </Wrapper>\n    </ListViewContext.Provider>\n  );\n};\n\nexport default ListView;\n"]},"metadata":{},"sourceType":"script"}