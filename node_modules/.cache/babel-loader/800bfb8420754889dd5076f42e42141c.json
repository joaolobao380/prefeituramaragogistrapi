{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _typeof = require(\"@babel/runtime/helpers/typeof\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _strapiHelperPlugin = require(\"strapi-helper-plugin\");\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { \"default\": obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj[\"default\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nvar MediaLib = function MediaLib(_ref) {\n  var isOpen = _ref.isOpen,\n      onChange = _ref.onChange,\n      onToggle = _ref.onToggle;\n\n  var _useStrapi = (0, _strapiHelperPlugin.useStrapi)(),\n      getComponent = _useStrapi.strapi.componentApi.getComponent;\n\n  var _useState = (0, _react.useState)(null),\n      _useState2 = (0, _slicedToArray2[\"default\"])(_useState, 2),\n      data = _useState2[0],\n      setData = _useState2[1];\n\n  var _useState3 = (0, _react.useState)(false),\n      _useState4 = (0, _slicedToArray2[\"default\"])(_useState3, 2),\n      isDisplayed = _useState4[0],\n      setIsDisplayed = _useState4[1];\n\n  (0, _react.useEffect)(function () {\n    if (isOpen) {\n      setIsDisplayed(true);\n    }\n  }, [isOpen]);\n  var Component = getComponent('media-library').Component;\n\n  var handleInputChange = function handleInputChange(data) {\n    if (data) {\n      var formattedData = data.map(function (_ref2) {\n        var name = _ref2.name,\n            alternativeText = _ref2.alternativeText,\n            url = _ref2.url;\n        var alt = alternativeText || name;\n        return {\n          alt: alt,\n          url: (0, _strapiHelperPlugin.prefixFileUrlWithBackendUrl)(url)\n        };\n      });\n      setData(formattedData);\n    }\n  };\n\n  var handleClosed = function handleClosed() {\n    if (data) {\n      onChange(data);\n    }\n\n    setData(null);\n    setIsDisplayed(false);\n  };\n\n  if (Component && isDisplayed) {\n    return /*#__PURE__*/_react[\"default\"].createElement(Component, {\n      allowedTypes: ['images', 'videos', 'files'],\n      isOpen: isOpen,\n      multiple: true,\n      noNavigation: true,\n      onClosed: handleClosed,\n      onInputMediaChange: handleInputChange,\n      onToggle: onToggle\n    });\n  }\n\n  return null;\n};\n\nMediaLib.defaultProps = {\n  isOpen: false,\n  onChange: function onChange() {},\n  onToggle: function onToggle() {}\n};\nMediaLib.propTypes = {\n  isOpen: _propTypes[\"default\"].bool,\n  onChange: _propTypes[\"default\"].func,\n  onToggle: _propTypes[\"default\"].func\n};\nvar _default = MediaLib;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["/Users/joaovictorlobao/prefeituramaragogistrapi/.cache/plugins/strapi-plugin-content-manager/admin/src/components/Wysiwyg/MediaLib.js"],"names":["MediaLib","isOpen","onChange","onToggle","getComponent","strapi","componentApi","data","setData","isDisplayed","setIsDisplayed","Component","handleInputChange","formattedData","map","name","alternativeText","url","alt","handleClosed","defaultProps","propTypes","PropTypes","bool","func"],"mappings":";;;;;;;;;;;;;AAAA;;AACA;;AACA;;;;;;AAEA,IAAMA,QAAQ,GAAG,SAAXA,QAAW,OAAoC;AAAA,MAAjCC,MAAiC,QAAjCA,MAAiC;AAAA,MAAzBC,QAAyB,QAAzBA,QAAyB;AAAA,MAAfC,QAAe,QAAfA,QAAe;;AACnD,mBAII,oCAJJ;AAAA,MAEoBC,YAFpB,cACEC,MADF,CAEIC,YAFJ,CAEoBF,YAFpB;;AAKA,kBAAwB,qBAAS,IAAT,CAAxB;AAAA;AAAA,MAAOG,IAAP;AAAA,MAAaC,OAAb;;AACA,mBAAsC,qBAAS,KAAT,CAAtC;AAAA;AAAA,MAAOC,WAAP;AAAA,MAAoBC,cAApB;;AAEA,wBAAU,YAAM;AACd,QAAIT,MAAJ,EAAY;AACVS,MAAAA,cAAc,CAAC,IAAD,CAAd;AACD;AACF,GAJD,EAIG,CAACT,MAAD,CAJH;AAMA,MAAMU,SAAS,GAAGP,YAAY,CAAC,eAAD,CAAZ,CAA8BO,SAAhD;;AAEA,MAAMC,iBAAiB,GAAG,SAApBA,iBAAoB,CAAAL,IAAI,EAAI;AAChC,QAAIA,IAAJ,EAAU;AACR,UAAMM,aAAa,GAAGN,IAAI,CAACO,GAAL,CAAS,iBAAoC;AAAA,YAAjCC,IAAiC,SAAjCA,IAAiC;AAAA,YAA3BC,eAA2B,SAA3BA,eAA2B;AAAA,YAAVC,GAAU,SAAVA,GAAU;AACjE,YAAMC,GAAG,GAAGF,eAAe,IAAID,IAA/B;AAEA,eAAO;AAAEG,UAAAA,GAAG,EAAHA,GAAF;AAAOD,UAAAA,GAAG,EAAE,qDAA4BA,GAA5B;AAAZ,SAAP;AACD,OAJqB,CAAtB;AAKAT,MAAAA,OAAO,CAACK,aAAD,CAAP;AACD;AACF,GATD;;AAWA,MAAMM,YAAY,GAAG,SAAfA,YAAe,GAAM;AACzB,QAAIZ,IAAJ,EAAU;AACRL,MAAAA,QAAQ,CAACK,IAAD,CAAR;AACD;;AAEDC,IAAAA,OAAO,CAAC,IAAD,CAAP;AACAE,IAAAA,cAAc,CAAC,KAAD,CAAd;AACD,GAPD;;AASA,MAAIC,SAAS,IAAIF,WAAjB,EAA8B;AAC5B,wBACE,gCAAC,SAAD;AACE,MAAA,YAAY,EAAE,CAAC,QAAD,EAAW,QAAX,EAAqB,OAArB,CADhB;AAEE,MAAA,MAAM,EAAER,MAFV;AAGE,MAAA,QAAQ,MAHV;AAIE,MAAA,YAAY,MAJd;AAKE,MAAA,QAAQ,EAAEkB,YALZ;AAME,MAAA,kBAAkB,EAAEP,iBANtB;AAOE,MAAA,QAAQ,EAAET;AAPZ,MADF;AAWD;;AAED,SAAO,IAAP;AACD,CApDD;;AAsDAH,QAAQ,CAACoB,YAAT,GAAwB;AACtBnB,EAAAA,MAAM,EAAE,KADc;AAEtBC,EAAAA,QAAQ,EAAE,oBAAM,CAAE,CAFI;AAGtBC,EAAAA,QAAQ,EAAE,oBAAM,CAAE;AAHI,CAAxB;AAMAH,QAAQ,CAACqB,SAAT,GAAqB;AACnBpB,EAAAA,MAAM,EAAEqB,sBAAUC,IADC;AAEnBrB,EAAAA,QAAQ,EAAEoB,sBAAUE,IAFD;AAGnBrB,EAAAA,QAAQ,EAAEmB,sBAAUE;AAHD,CAArB;eAMexB,Q","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useStrapi, prefixFileUrlWithBackendUrl } from 'strapi-helper-plugin';\nimport PropTypes from 'prop-types';\n\nconst MediaLib = ({ isOpen, onChange, onToggle }) => {\n  const {\n    strapi: {\n      componentApi: { getComponent },\n    },\n  } = useStrapi();\n  const [data, setData] = useState(null);\n  const [isDisplayed, setIsDisplayed] = useState(false);\n\n  useEffect(() => {\n    if (isOpen) {\n      setIsDisplayed(true);\n    }\n  }, [isOpen]);\n\n  const Component = getComponent('media-library').Component;\n\n  const handleInputChange = data => {\n    if (data) {\n      const formattedData = data.map(({ name, alternativeText, url }) => {\n        const alt = alternativeText || name;\n\n        return { alt, url: prefixFileUrlWithBackendUrl(url) };\n      });\n      setData(formattedData);\n    }\n  };\n\n  const handleClosed = () => {\n    if (data) {\n      onChange(data);\n    }\n\n    setData(null);\n    setIsDisplayed(false);\n  };\n\n  if (Component && isDisplayed) {\n    return (\n      <Component\n        allowedTypes={['images', 'videos', 'files']}\n        isOpen={isOpen}\n        multiple\n        noNavigation\n        onClosed={handleClosed}\n        onInputMediaChange={handleInputChange}\n        onToggle={onToggle}\n      />\n    );\n  }\n\n  return null;\n};\n\nMediaLib.defaultProps = {\n  isOpen: false,\n  onChange: () => {},\n  onToggle: () => {},\n};\n\nMediaLib.propTypes = {\n  isOpen: PropTypes.bool,\n  onChange: PropTypes.func,\n  onToggle: PropTypes.func,\n};\n\nexport default MediaLib;\n"]},"metadata":{},"sourceType":"script"}