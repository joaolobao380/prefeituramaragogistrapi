{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _typeof = require(\"@babel/runtime/helpers/typeof\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _lodash = require(\"lodash\");\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _reactstrap = require(\"reactstrap\");\n\nvar _reactIntl = require(\"react-intl\");\n\nvar _pluginId = _interopRequireDefault(require(\"../../../pluginId\"));\n\nvar _hooks = require(\"../../../hooks\");\n\nvar _Category = _interopRequireDefault(require(\"./Category\"));\n\nvar _Wrapper = _interopRequireDefault(require(\"./Wrapper\"));\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { \"default\": obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj[\"default\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nvar Picker = function Picker(_ref) {\n  var components = _ref.components,\n      isOpen = _ref.isOpen,\n      onClickAddComponent = _ref.onClickAddComponent;\n\n  var _useContentTypeLayout = (0, _hooks.useContentTypeLayout)(),\n      getComponentLayout = _useContentTypeLayout.getComponentLayout;\n\n  var _useState = (0, _react.useState)(''),\n      _useState2 = (0, _slicedToArray2[\"default\"])(_useState, 2),\n      categoryToOpen = _useState2[0],\n      setCategoryToOpen = _useState2[1];\n\n  var dynamicComponentCategories = (0, _react.useMemo)(function () {\n    var componentsWithInfo = components.map(function (componentUid) {\n      var _getComponentLayout = getComponentLayout(componentUid),\n          category = _getComponentLayout.category,\n          info = _getComponentLayout.info;\n\n      return {\n        componentUid: componentUid,\n        category: category,\n        info: info\n      };\n    });\n    var categories = (0, _lodash.groupBy)(componentsWithInfo, 'category');\n    return Object.keys(categories).reduce(function (acc, current) {\n      acc.push({\n        category: current,\n        components: categories[current]\n      });\n      return acc;\n    }, []);\n  }, [components, getComponentLayout]);\n  (0, _react.useEffect)(function () {\n    if (isOpen && dynamicComponentCategories.length) {\n      setCategoryToOpen(dynamicComponentCategories[0].category);\n    }\n  }, [isOpen, dynamicComponentCategories]);\n  var handleAddComponentToDz = (0, _react.useCallback)(function (componentUid) {\n    onClickAddComponent(componentUid);\n    setCategoryToOpen('');\n  }, [onClickAddComponent]);\n  var handleClickToggle = (0, _react.useCallback)(function (categoryName) {\n    var nextCategoryToOpen = categoryToOpen === categoryName ? '' : categoryName;\n    setCategoryToOpen(nextCategoryToOpen);\n  }, [categoryToOpen]);\n  return /*#__PURE__*/_react[\"default\"].createElement(_reactstrap.Collapse, {\n    isOpen: isOpen\n  }, /*#__PURE__*/_react[\"default\"].createElement(_Wrapper[\"default\"], null, /*#__PURE__*/_react[\"default\"].createElement(\"div\", null, /*#__PURE__*/_react[\"default\"].createElement(\"p\", {\n    className: \"componentPickerTitle\"\n  }, /*#__PURE__*/_react[\"default\"].createElement(_reactIntl.FormattedMessage, {\n    id: \"\".concat(_pluginId[\"default\"], \".components.DynamicZone.pick-compo\")\n  })), /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: \"categoriesList\"\n  }, dynamicComponentCategories.map(function (_ref2, index) {\n    var category = _ref2.category,\n        components = _ref2.components;\n    return /*#__PURE__*/_react[\"default\"].createElement(_Category[\"default\"], {\n      key: category,\n      category: category,\n      components: components,\n      isOpen: category === categoryToOpen,\n      isFirst: index === 0,\n      onAddComponent: handleAddComponentToDz,\n      onToggle: handleClickToggle\n    });\n  })))));\n};\n\nPicker.propTypes = {\n  components: _propTypes[\"default\"].array.isRequired,\n  isOpen: _propTypes[\"default\"].bool.isRequired,\n  onClickAddComponent: _propTypes[\"default\"].func.isRequired\n};\n\nvar _default = /*#__PURE__*/(0, _react.memo)(Picker);\n\nexports[\"default\"] = _default;","map":{"version":3,"sources":["/Users/joaovictorlobao/prefeituramaragogistrapi/.cache/plugins/strapi-plugin-content-manager/admin/src/components/DynamicZone/Picker/index.js"],"names":["Picker","components","isOpen","onClickAddComponent","getComponentLayout","categoryToOpen","setCategoryToOpen","dynamicComponentCategories","componentsWithInfo","map","componentUid","category","info","categories","Object","keys","reduce","acc","current","push","length","handleAddComponentToDz","handleClickToggle","categoryName","nextCategoryToOpen","pluginId","index","propTypes","PropTypes","array","isRequired","bool","func"],"mappings":"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","sourcesContent":["import React, { memo, useCallback, useEffect, useMemo, useState } from 'react';\nimport { groupBy } from 'lodash';\nimport PropTypes from 'prop-types';\nimport { Collapse } from 'reactstrap';\nimport { FormattedMessage } from 'react-intl';\nimport pluginId from '../../../pluginId';\nimport { useContentTypeLayout } from '../../../hooks';\nimport Category from './Category';\nimport Wrapper from './Wrapper';\n\nconst Picker = ({ components, isOpen, onClickAddComponent }) => {\n  const { getComponentLayout } = useContentTypeLayout();\n  const [categoryToOpen, setCategoryToOpen] = useState('');\n\n  const dynamicComponentCategories = useMemo(() => {\n    const componentsWithInfo = components.map(componentUid => {\n      const { category, info } = getComponentLayout(componentUid);\n\n      return { componentUid, category, info };\n    });\n\n    const categories = groupBy(componentsWithInfo, 'category');\n\n    return Object.keys(categories).reduce((acc, current) => {\n      acc.push({ category: current, components: categories[current] });\n\n      return acc;\n    }, []);\n  }, [components, getComponentLayout]);\n\n  useEffect(() => {\n    if (isOpen && dynamicComponentCategories.length) {\n      setCategoryToOpen(dynamicComponentCategories[0].category);\n    }\n  }, [isOpen, dynamicComponentCategories]);\n\n  const handleAddComponentToDz = useCallback(\n    componentUid => {\n      onClickAddComponent(componentUid);\n      setCategoryToOpen('');\n    },\n    [onClickAddComponent]\n  );\n\n  const handleClickToggle = useCallback(\n    categoryName => {\n      const nextCategoryToOpen = categoryToOpen === categoryName ? '' : categoryName;\n\n      setCategoryToOpen(nextCategoryToOpen);\n    },\n    [categoryToOpen]\n  );\n\n  return (\n    <Collapse isOpen={isOpen}>\n      <Wrapper>\n        <div>\n          <p className=\"componentPickerTitle\">\n            <FormattedMessage id={`${pluginId}.components.DynamicZone.pick-compo`} />\n          </p>\n          <div className=\"categoriesList\">\n            {dynamicComponentCategories.map(({ category, components }, index) => {\n              return (\n                <Category\n                  key={category}\n                  category={category}\n                  components={components}\n                  isOpen={category === categoryToOpen}\n                  isFirst={index === 0}\n                  onAddComponent={handleAddComponentToDz}\n                  onToggle={handleClickToggle}\n                />\n              );\n            })}\n          </div>\n        </div>\n      </Wrapper>\n    </Collapse>\n  );\n};\n\nPicker.propTypes = {\n  components: PropTypes.array.isRequired,\n  isOpen: PropTypes.bool.isRequired,\n  onClickAddComponent: PropTypes.func.isRequired,\n};\n\nexport default memo(Picker);\n"]},"metadata":{},"sourceType":"script"}