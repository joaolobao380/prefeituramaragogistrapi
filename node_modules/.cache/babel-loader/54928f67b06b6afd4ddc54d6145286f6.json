{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createChildrenDefaultForm = exports.createSubCategoryForm = exports[\"default\"] = void 0;\n\nvar _lodash = require(\"lodash\");\n\nvar _createDefaultCTFormFromLayout = require(\"./createDefaultCTFormFromLayout\");\n\nvar _findMatchingPermissions = _interopRequireDefault(require(\"./findMatchingPermissions\"));\n\nvar createSubCategoryForm = function createSubCategoryForm(actions, conditions, permissions) {\n  return actions.reduce(function (acc, current) {\n    var foundMatchingPermission = (0, _findMatchingPermissions[\"default\"])(permissions, current.action, null);\n    acc[current.action] = {\n      properties: {\n        enabled: foundMatchingPermission !== undefined\n      },\n      conditions: (0, _createDefaultCTFormFromLayout.createDefaultConditionsForm)(conditions, (0, _lodash.get)(foundMatchingPermission, 'conditions', []))\n    };\n    return acc;\n  }, {});\n};\n\nexports.createSubCategoryForm = createSubCategoryForm;\n\nvar createChildrenDefaultForm = function createChildrenDefaultForm(childrenForm, conditions, initialPermissions) {\n  return childrenForm.reduce(function (acc, current) {\n    acc[current.subCategoryId] = createSubCategoryForm(current.actions, conditions, initialPermissions);\n    return acc;\n  }, {});\n};\n\nexports.createChildrenDefaultForm = createChildrenDefaultForm;\n\nvar createDefaultPluginsFormFromLayout = function createDefaultPluginsFormFromLayout(pluginsLayout, conditions) {\n  var initialPermissions = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n  return pluginsLayout.reduce(function (acc, _ref) {\n    var categoryId = _ref.categoryId,\n        childrenForm = _ref.childrenForm;\n    var childrenDefaultForm = createChildrenDefaultForm(childrenForm, conditions, initialPermissions);\n    acc[categoryId] = childrenDefaultForm;\n    return acc;\n  }, {});\n};\n\nvar _default = createDefaultPluginsFormFromLayout;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["/Users/joaovictorlobao/prefeituramaragogistrapi/.cache/admin/src/components/Roles/Permissions/utils/createDefaultPluginsFormFromLayout.js"],"names":["createSubCategoryForm","actions","conditions","permissions","reduce","acc","current","foundMatchingPermission","action","properties","enabled","undefined","createChildrenDefaultForm","childrenForm","initialPermissions","subCategoryId","createDefaultPluginsFormFromLayout","pluginsLayout","categoryId","childrenDefaultForm"],"mappings":";;;;;;;;;AAAA;;AACA;;AACA;;AAEA,IAAMA,qBAAqB,GAAG,SAAxBA,qBAAwB,CAACC,OAAD,EAAUC,UAAV,EAAsBC,WAAtB,EAAsC;AAClE,SAAOF,OAAO,CAACG,MAAR,CAAe,UAACC,GAAD,EAAMC,OAAN,EAAkB;AACtC,QAAMC,uBAAuB,GAAG,yCAAuBJ,WAAvB,EAAoCG,OAAO,CAACE,MAA5C,EAAoD,IAApD,CAAhC;AAEAH,IAAAA,GAAG,CAACC,OAAO,CAACE,MAAT,CAAH,GAAsB;AACpBC,MAAAA,UAAU,EAAE;AACVC,QAAAA,OAAO,EAAEH,uBAAuB,KAAKI;AAD3B,OADQ;AAIpBT,MAAAA,UAAU,EAAE,gEACVA,UADU,EAEV,iBAAIK,uBAAJ,EAA6B,YAA7B,EAA2C,EAA3C,CAFU;AAJQ,KAAtB;AAUA,WAAOF,GAAP;AACD,GAdM,EAcJ,EAdI,CAAP;AAeD,CAhBD;;;;AAkBA,IAAMO,yBAAyB,GAAG,SAA5BA,yBAA4B,CAACC,YAAD,EAAeX,UAAf,EAA2BY,kBAA3B,EAAkD;AAClF,SAAOD,YAAY,CAACT,MAAb,CAAoB,UAACC,GAAD,EAAMC,OAAN,EAAkB;AAC3CD,IAAAA,GAAG,CAACC,OAAO,CAACS,aAAT,CAAH,GAA6Bf,qBAAqB,CAChDM,OAAO,CAACL,OADwC,EAEhDC,UAFgD,EAGhDY,kBAHgD,CAAlD;AAMA,WAAOT,GAAP;AACD,GARM,EAQJ,EARI,CAAP;AASD,CAVD;;;;AAYA,IAAMW,kCAAkC,GAAG,SAArCA,kCAAqC,CAACC,aAAD,EAAgBf,UAAhB,EAAwD;AAAA,MAA5BY,kBAA4B,uEAAP,EAAO;AACjG,SAAOG,aAAa,CAACb,MAAd,CAAqB,UAACC,GAAD,QAAuC;AAAA,QAA/Ba,UAA+B,QAA/BA,UAA+B;AAAA,QAAnBL,YAAmB,QAAnBA,YAAmB;AACjE,QAAMM,mBAAmB,GAAGP,yBAAyB,CACnDC,YADmD,EAEnDX,UAFmD,EAGnDY,kBAHmD,CAArD;AAKAT,IAAAA,GAAG,CAACa,UAAD,CAAH,GAAkBC,mBAAlB;AAEA,WAAOd,GAAP;AACD,GATM,EASJ,EATI,CAAP;AAUD,CAXD;;eAaeW,kC","sourcesContent":["import { get } from 'lodash';\nimport { createDefaultConditionsForm } from './createDefaultCTFormFromLayout';\nimport findMatchingPermission from './findMatchingPermissions';\n\nconst createSubCategoryForm = (actions, conditions, permissions) => {\n  return actions.reduce((acc, current) => {\n    const foundMatchingPermission = findMatchingPermission(permissions, current.action, null);\n\n    acc[current.action] = {\n      properties: {\n        enabled: foundMatchingPermission !== undefined,\n      },\n      conditions: createDefaultConditionsForm(\n        conditions,\n        get(foundMatchingPermission, 'conditions', [])\n      ),\n    };\n\n    return acc;\n  }, {});\n};\n\nconst createChildrenDefaultForm = (childrenForm, conditions, initialPermissions) => {\n  return childrenForm.reduce((acc, current) => {\n    acc[current.subCategoryId] = createSubCategoryForm(\n      current.actions,\n      conditions,\n      initialPermissions\n    );\n\n    return acc;\n  }, {});\n};\n\nconst createDefaultPluginsFormFromLayout = (pluginsLayout, conditions, initialPermissions = []) => {\n  return pluginsLayout.reduce((acc, { categoryId, childrenForm }) => {\n    const childrenDefaultForm = createChildrenDefaultForm(\n      childrenForm,\n      conditions,\n      initialPermissions\n    );\n    acc[categoryId] = childrenDefaultForm;\n\n    return acc;\n  }, {});\n};\n\nexport default createDefaultPluginsFormFromLayout;\nexport { createSubCategoryForm, createChildrenDefaultForm };\n"]},"metadata":{},"sourceType":"script"}