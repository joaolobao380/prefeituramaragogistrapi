{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _typeof = require(\"@babel/runtime/helpers/typeof\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _reactFontawesome = require(\"@fortawesome/react-fontawesome\");\n\nvar _freeSolidSvgIcons = require(\"@fortawesome/free-solid-svg-icons\");\n\nvar _core = require(\"@buffetjs/core\");\n\nvar _strapiHelperPlugin = require(\"strapi-helper-plugin\");\n\nvar _reactRouterDom = require(\"react-router-dom\");\n\nvar _config = require(\"../../../config\");\n\nvar _utils = require(\"./utils\");\n\nvar _reducer = require(\"./reducer\");\n\nvar _init = _interopRequireDefault(require(\"./init\"));\n\nvar _Wrapper = _interopRequireDefault(require(\"./Wrapper\"));\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { \"default\": obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj[\"default\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nvar List = /*#__PURE__*/(0, _react.forwardRef)(function (_ref, ref) {\n  var canDelete = _ref.canDelete,\n      canUpdate = _ref.canUpdate,\n      data = _ref.data,\n      filters = _ref.filters,\n      isLoading = _ref.isLoading,\n      onChange = _ref.onChange,\n      onClickDelete = _ref.onClickDelete,\n      searchParam = _ref.searchParam;\n\n  var _useHistory = (0, _reactRouterDom.useHistory)(),\n      push = _useHistory.push;\n\n  var _useReducer = (0, _react.useReducer)(_reducer.reducer, _reducer.initialState, _init[\"default\"]),\n      _useReducer2 = (0, _slicedToArray2[\"default\"])(_useReducer, 2),\n      rows = _useReducer2[0].rows,\n      dispatch = _useReducer2[1];\n\n  var _useGlobalContext = (0, _strapiHelperPlugin.useGlobalContext)(),\n      formatMessage = _useGlobalContext.formatMessage;\n\n  (0, _react.useEffect)(function () {\n    dispatch({\n      type: 'SET_DATA',\n      data: data\n    });\n  }, [data]);\n  (0, _react.useImperativeHandle)(ref, function () {\n    return {\n      resetDataToDelete: function resetDataToDelete() {\n        dispatch({\n          type: 'RESET_DATA_TO_DELETE'\n        });\n      }\n    };\n  });\n  var tableEmptyText = 'Users.components.List.empty';\n\n  if (searchParam) {\n    tableEmptyText = \"\".concat(tableEmptyText, \".withSearch\");\n  }\n\n  if (filters.length) {\n    tableEmptyText = \"\".concat(tableEmptyText, \".withFilters\");\n  }\n\n  var tableEmptyTextTranslated = formatMessage({\n    id: tableEmptyText\n  }, {\n    search: searchParam\n  });\n\n  var handleChange = function handleChange(row, index) {\n    dispatch({\n      type: 'ON_CHANGE',\n      index: index\n    });\n    onChange((0, _utils.getSelectedIds)(rows, index));\n  };\n\n  var handleClickDelete = (0, _react.useCallback)(function (id) {\n    var rowIndex = rows.findIndex(function (obj) {\n      return obj.id === id;\n    });\n    dispatch({\n      type: 'ON_CLICK_DELETE',\n      index: rowIndex\n    });\n    onClickDelete(id);\n  }, [rows, onClickDelete]);\n\n  var handleChangeAll = function handleChangeAll() {\n    dispatch({\n      type: 'ON_CHANGE_ALL'\n    });\n    var selectedIds = [];\n    var areAllEntriesSelected = (0, _utils.checkIfAllEntriesAreSelected)(rows);\n\n    if (!areAllEntriesSelected) {\n      for (var i = 0; i < rows.length; i++) {\n        selectedIds.push(rows[i].id);\n      }\n    }\n\n    onChange(selectedIds);\n  };\n\n  var handleClick = function handleClick(id) {\n    push(\"\".concat(_config.SETTINGS_BASE_URL, \"/users/\").concat(id));\n  };\n\n  return /*#__PURE__*/_react[\"default\"].createElement(_Wrapper[\"default\"], {\n    withHigherHeight: !data.length\n  }, /*#__PURE__*/_react[\"default\"].createElement(_core.Table, {\n    className: \"table-wrapper\",\n    isLoading: isLoading,\n    headers: _utils.headers,\n    onClickRow: function onClickRow(e, data) {\n      handleClick(data.id);\n    },\n    onSelect: handleChange,\n    onSelectAll: handleChangeAll,\n    rows: rows,\n    rowLinks: [{\n      icon: canUpdate ? /*#__PURE__*/_react[\"default\"].createElement(_reactFontawesome.FontAwesomeIcon, {\n        icon: _freeSolidSvgIcons.faPencilAlt\n      }) : null,\n      onClick: function onClick(data) {\n        handleClick(data.id);\n      }\n    }, {\n      icon: canDelete ? /*#__PURE__*/_react[\"default\"].createElement(_reactFontawesome.FontAwesomeIcon, {\n        icon: _freeSolidSvgIcons.faTrashAlt\n      }) : null,\n      onClick: function onClick(data) {\n        handleClickDelete(data.id);\n      }\n    }],\n    tableEmptyText: tableEmptyTextTranslated,\n    withBulkAction: canDelete\n  }));\n});\nList.defaultProps = {\n  canDelete: false,\n  canUpdate: false,\n  data: [],\n  filters: [],\n  isLoading: false,\n  onChange: function onChange() {},\n  onClickDelete: function onClickDelete() {},\n  searchParam: ''\n};\nList.propTypes = {\n  canDelete: _propTypes[\"default\"].bool,\n  canUpdate: _propTypes[\"default\"].bool,\n  data: _propTypes[\"default\"].array,\n  filters: _propTypes[\"default\"].array,\n  isLoading: _propTypes[\"default\"].bool,\n  onChange: _propTypes[\"default\"].func,\n  onClickDelete: _propTypes[\"default\"].func,\n  searchParam: _propTypes[\"default\"].string\n};\nvar _default = List;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["/Users/joaovictorlobao/prefeituramaragogistrapi/.cache/admin/src/components/Users/List/index.js"],"names":["List","ref","canDelete","canUpdate","data","filters","isLoading","onChange","onClickDelete","searchParam","push","reducer","initialState","init","rows","dispatch","formatMessage","type","resetDataToDelete","tableEmptyText","length","tableEmptyTextTranslated","id","search","handleChange","row","index","handleClickDelete","rowIndex","findIndex","obj","handleChangeAll","selectedIds","areAllEntriesSelected","i","handleClick","SETTINGS_BASE_URL","headers","e","icon","faPencilAlt","onClick","faTrashAlt","defaultProps","propTypes","PropTypes","bool","array","func","string"],"mappings":"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","sourcesContent":["import React, { forwardRef, useCallback, useEffect, useImperativeHandle, useReducer } from 'react';\nimport PropTypes from 'prop-types';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faTrashAlt, faPencilAlt } from '@fortawesome/free-solid-svg-icons';\nimport { Table } from '@buffetjs/core';\nimport { useGlobalContext } from 'strapi-helper-plugin';\nimport { useHistory } from 'react-router-dom';\nimport { SETTINGS_BASE_URL } from '../../../config';\nimport { checkIfAllEntriesAreSelected, getSelectedIds, headers } from './utils';\nimport { initialState, reducer } from './reducer';\nimport init from './init';\nimport Wrapper from './Wrapper';\n\nconst List = forwardRef(\n  (\n    { canDelete, canUpdate, data, filters, isLoading, onChange, onClickDelete, searchParam },\n    ref\n  ) => {\n    const { push } = useHistory();\n    const [{ rows }, dispatch] = useReducer(reducer, initialState, init);\n\n    const { formatMessage } = useGlobalContext();\n\n    useEffect(() => {\n      dispatch({\n        type: 'SET_DATA',\n        data,\n      });\n    }, [data]);\n\n    useImperativeHandle(ref, () => ({\n      resetDataToDelete: () => {\n        dispatch({\n          type: 'RESET_DATA_TO_DELETE',\n        });\n      },\n    }));\n\n    let tableEmptyText = 'Users.components.List.empty';\n\n    if (searchParam) {\n      tableEmptyText = `${tableEmptyText}.withSearch`;\n    }\n\n    if (filters.length) {\n      tableEmptyText = `${tableEmptyText}.withFilters`;\n    }\n\n    const tableEmptyTextTranslated = formatMessage({ id: tableEmptyText }, { search: searchParam });\n\n    const handleChange = (row, index) => {\n      dispatch({\n        type: 'ON_CHANGE',\n        index,\n      });\n\n      onChange(getSelectedIds(rows, index));\n    };\n\n    const handleClickDelete = useCallback(\n      id => {\n        const rowIndex = rows.findIndex(obj => obj.id === id);\n\n        dispatch({\n          type: 'ON_CLICK_DELETE',\n          index: rowIndex,\n        });\n\n        onClickDelete(id);\n      },\n      [rows, onClickDelete]\n    );\n\n    const handleChangeAll = () => {\n      dispatch({\n        type: 'ON_CHANGE_ALL',\n      });\n\n      let selectedIds = [];\n      const areAllEntriesSelected = checkIfAllEntriesAreSelected(rows);\n\n      if (!areAllEntriesSelected) {\n        for (let i = 0; i < rows.length; i++) {\n          selectedIds.push(rows[i].id);\n        }\n      }\n\n      onChange(selectedIds);\n    };\n\n    const handleClick = id => {\n      push(`${SETTINGS_BASE_URL}/users/${id}`);\n    };\n\n    return (\n      <Wrapper withHigherHeight={!data.length}>\n        <Table\n          className=\"table-wrapper\"\n          isLoading={isLoading}\n          headers={headers}\n          onClickRow={(e, data) => {\n            handleClick(data.id);\n          }}\n          onSelect={handleChange}\n          onSelectAll={handleChangeAll}\n          rows={rows}\n          rowLinks={[\n            {\n              icon: canUpdate ? <FontAwesomeIcon icon={faPencilAlt} /> : null,\n              onClick: data => {\n                handleClick(data.id);\n              },\n            },\n            {\n              icon: canDelete ? <FontAwesomeIcon icon={faTrashAlt} /> : null,\n              onClick: data => {\n                handleClickDelete(data.id);\n              },\n            },\n          ]}\n          tableEmptyText={tableEmptyTextTranslated}\n          withBulkAction={canDelete}\n        />\n      </Wrapper>\n    );\n  }\n);\n\nList.defaultProps = {\n  canDelete: false,\n  canUpdate: false,\n  data: [],\n  filters: [],\n  isLoading: false,\n  onChange: () => {},\n  onClickDelete: () => {},\n  searchParam: '',\n};\n\nList.propTypes = {\n  canDelete: PropTypes.bool,\n  canUpdate: PropTypes.bool,\n  data: PropTypes.array,\n  filters: PropTypes.array,\n  isLoading: PropTypes.bool,\n  onChange: PropTypes.func,\n  onClickDelete: PropTypes.func,\n  searchParam: PropTypes.string,\n};\n\nexport default List;\n"]},"metadata":{},"sourceType":"script"}