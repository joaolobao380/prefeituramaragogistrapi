{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.initialState = exports[\"default\"] = void 0;\n\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\n\nvar _immutable = require(\"immutable\");\n\nvar _lodash = require(\"lodash\");\n\nvar header = {\n  key: '',\n  value: ''\n};\nvar initialWebhook = {\n  events: [],\n  headers: [header],\n  name: '',\n  url: ''\n};\nvar initialState = (0, _immutable.fromJS)({\n  formErrors: {},\n  initialData: initialWebhook,\n  isTriggering: false,\n  modifiedData: initialWebhook,\n  isLoading: true,\n  triggerResponse: {}\n});\nexports.initialState = initialState;\n\nvar reducer = function reducer(state, action) {\n  switch (action.type) {\n    case 'ADD_NEW_HEADER':\n      return state.updateIn(['modifiedData'].concat((0, _toConsumableArray2[\"default\"])(action.keys)), function (arr) {\n        return arr.push((0, _immutable.fromJS)(header));\n      });\n\n    case 'GET_DATA_SUCCEEDED':\n      {\n        var headers = (0, _lodash.get)(action, ['data', 'headers'], {});\n        var formattedHeaders = [header];\n\n        if (Object.keys(headers).length > 0) {\n          formattedHeaders = Object.keys(headers).map(function (key) {\n            return {\n              key: key,\n              value: headers[key]\n            };\n          });\n        }\n\n        var data = (0, _immutable.fromJS)(action.data).update('headers', function () {\n          return (0, _immutable.fromJS)(formattedHeaders);\n        });\n        return state.update('isLoading', function () {\n          return false;\n        }).update('initialData', function () {\n          return data;\n        }).update('modifiedData', function () {\n          return data;\n        });\n      }\n\n    case 'ON_CHANGE':\n      return state.updateIn(['modifiedData'].concat((0, _toConsumableArray2[\"default\"])(action.keys)), function () {\n        return action.value;\n      });\n\n    case 'ON_HEADER_REMOVE':\n      {\n        return state.updateIn(['modifiedData', 'headers'], function (headers) {\n          if (headers.size === 1) {\n            return (0, _immutable.fromJS)([header]);\n          }\n\n          return headers.remove(action.index);\n        });\n      }\n\n    case 'ON_TRIGGER_CANCELED':\n      return state.update('isTriggering', function () {\n        return false;\n      }).set('triggerResponse', (0, _immutable.fromJS)({}));\n\n    case 'RESET_FORM':\n      return state.update('modifiedData', function () {\n        return state.get('initialData');\n      });\n\n    case 'SET_ERRORS':\n      return state.update('formErrors', function () {\n        return (0, _immutable.fromJS)(action.errors);\n      });\n\n    case 'SET_IS_TRIGGERING':\n      return state.update('isTriggering', function (isTriggering) {\n        return !isTriggering;\n      });\n\n    case 'SUBMIT_SUCCEEDED':\n      return state.update('initialData', function () {\n        return state.get('modifiedData');\n      });\n\n    case 'TRIGGER_SUCCEEDED':\n      return state.update('triggerResponse', function () {\n        return (0, _immutable.fromJS)(action.response);\n      }).update('isTriggering', function () {\n        return false;\n      });\n\n    case 'UNSET_LOADER':\n      return state.update('isLoading', function () {\n        return false;\n      });\n\n    default:\n      return state;\n  }\n};\n\nvar _default = reducer;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["/Users/joaovictorlobao/prefeituramaragogistrapi/.cache/admin/src/containers/Webhooks/EditView/reducer.js"],"names":["header","key","value","initialWebhook","events","headers","name","url","initialState","formErrors","initialData","isTriggering","modifiedData","isLoading","triggerResponse","reducer","state","action","type","updateIn","keys","arr","push","formattedHeaders","Object","length","map","data","update","size","remove","index","set","get","errors","response"],"mappings":"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","sourcesContent":["import { fromJS } from 'immutable';\nimport { get } from 'lodash';\n\nconst header = { key: '', value: '' };\n\nconst initialWebhook = {\n  events: [],\n  headers: [header],\n  name: '',\n  url: '',\n};\n\nconst initialState = fromJS({\n  formErrors: {},\n  initialData: initialWebhook,\n  isTriggering: false,\n  modifiedData: initialWebhook,\n  isLoading: true,\n  triggerResponse: {},\n});\n\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case 'ADD_NEW_HEADER':\n      return state.updateIn(['modifiedData', ...action.keys], arr => arr.push(fromJS(header)));\n    case 'GET_DATA_SUCCEEDED': {\n      const headers = get(action, ['data', 'headers'], {});\n      let formattedHeaders = [header];\n\n      if (Object.keys(headers).length > 0) {\n        formattedHeaders = Object.keys(headers).map(key => {\n          return { key, value: headers[key] };\n        });\n      }\n\n      const data = fromJS(action.data).update('headers', () => fromJS(formattedHeaders));\n\n      return state\n        .update('isLoading', () => false)\n        .update('initialData', () => data)\n        .update('modifiedData', () => data);\n    }\n    case 'ON_CHANGE':\n      return state.updateIn(['modifiedData', ...action.keys], () => action.value);\n    case 'ON_HEADER_REMOVE': {\n      return state.updateIn(['modifiedData', 'headers'], headers => {\n        if (headers.size === 1) {\n          return fromJS([header]);\n        }\n\n        return headers.remove(action.index);\n      });\n    }\n    case 'ON_TRIGGER_CANCELED':\n      return state.update('isTriggering', () => false).set('triggerResponse', fromJS({}));\n    case 'RESET_FORM':\n      return state.update('modifiedData', () => state.get('initialData'));\n    case 'SET_ERRORS':\n      return state.update('formErrors', () => fromJS(action.errors));\n    case 'SET_IS_TRIGGERING':\n      return state.update('isTriggering', isTriggering => !isTriggering);\n    case 'SUBMIT_SUCCEEDED':\n      return state.update('initialData', () => state.get('modifiedData'));\n    case 'TRIGGER_SUCCEEDED':\n      return state\n        .update('triggerResponse', () => fromJS(action.response))\n        .update('isTriggering', () => false);\n    case 'UNSET_LOADER':\n      return state.update('isLoading', () => false);\n    default:\n      return state;\n  }\n};\n\nexport default reducer;\nexport { initialState };\n"]},"metadata":{},"sourceType":"script"}