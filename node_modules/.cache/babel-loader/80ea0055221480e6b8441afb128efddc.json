{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _reactIntl = require(\"react-intl\");\n\nvar _formatValue = _interopRequireDefault(require(\"./utils/formatValue\"));\n\nvar _Wrapper = _interopRequireDefault(require(\"./Wrapper\"));\n\nvar _EventRow = _interopRequireDefault(require(\"./EventRow\"));\n\nvar displayedData = {\n  headers: {\n    \"default\": ['Settings.webhooks.events.create', 'Settings.webhooks.events.update', 'app.utils.delete'],\n    draftAndPublish: ['Settings.webhooks.events.create', 'Settings.webhooks.events.update', 'app.utils.delete', 'app.utils.publish', 'app.utils.unpublish']\n  },\n  events: {\n    \"default\": {\n      entry: ['entry.create', 'entry.update', 'entry.delete'],\n      media: ['media.create', 'media.update', 'media.delete']\n    },\n    draftAndPublish: {\n      entry: ['entry.create', 'entry.update', 'entry.delete', 'entry.publish', 'entry.unpublish'],\n      media: ['media.create', 'media.update', 'media.delete']\n    }\n  }\n};\n\nvar EventInput = function EventInput(_ref) {\n  var onChange = _ref.onChange,\n      inputName = _ref.name,\n      inputValue = _ref.value,\n      shouldShowDPEvents = _ref.shouldShowDPEvents;\n  var headersName = shouldShowDPEvents ? displayedData.headers.draftAndPublish : displayedData.headers[\"default\"];\n  var events = shouldShowDPEvents ? displayedData.events.draftAndPublish : displayedData.events[\"default\"];\n  var disabledEvents = [];\n  var formattedValue = (0, _formatValue[\"default\"])(inputValue);\n\n  var handleChange = function handleChange(_ref2) {\n    var _ref2$target = _ref2.target,\n        name = _ref2$target.name,\n        value = _ref2$target.value;\n    var set = new Set(inputValue);\n\n    if (value) {\n      set.add(name);\n    } else {\n      set[\"delete\"](name);\n    }\n\n    onChange({\n      target: {\n        name: inputName,\n        value: Array.from(set)\n      }\n    });\n  };\n\n  var handleChangeAll = function handleChangeAll(_ref3) {\n    var _ref3$target = _ref3.target,\n        name = _ref3$target.name,\n        value = _ref3$target.value;\n    var set = new Set(inputValue);\n\n    if (value) {\n      events[name].forEach(function (event) {\n        if (!disabledEvents.includes(event)) {\n          set.add(event);\n        }\n      });\n    } else {\n      events[name].forEach(function (event) {\n        return set[\"delete\"](event);\n      });\n    }\n\n    onChange({\n      target: {\n        name: inputName,\n        value: Array.from(set)\n      }\n    });\n  };\n\n  return /*#__PURE__*/_react[\"default\"].createElement(_Wrapper[\"default\"], null, /*#__PURE__*/_react[\"default\"].createElement(\"table\", null, /*#__PURE__*/_react[\"default\"].createElement(\"thead\", null, /*#__PURE__*/_react[\"default\"].createElement(\"tr\", null, /*#__PURE__*/_react[\"default\"].createElement(\"td\", null), headersName.map(function (header) {\n    if (header === 'app.utils.publish' || header === 'app.utils.unpublish') {\n      return /*#__PURE__*/_react[\"default\"].createElement(_reactIntl.FormattedMessage, {\n        id: \"Settings.webhooks.event.publish-tooltip\",\n        key: header\n      }, function (msg) {\n        return /*#__PURE__*/_react[\"default\"].createElement(\"td\", {\n          title: msg\n        }, /*#__PURE__*/_react[\"default\"].createElement(_reactIntl.FormattedMessage, {\n          id: header\n        }));\n      });\n    }\n\n    return /*#__PURE__*/_react[\"default\"].createElement(\"td\", {\n      key: header\n    }, /*#__PURE__*/_react[\"default\"].createElement(_reactIntl.FormattedMessage, {\n      id: header\n    }));\n  }))), /*#__PURE__*/_react[\"default\"].createElement(\"tbody\", null, Object.keys(events).map(function (event) {\n    return /*#__PURE__*/_react[\"default\"].createElement(_EventRow[\"default\"], {\n      disabledEvents: disabledEvents,\n      key: event,\n      name: event,\n      events: events[event],\n      inputValue: formattedValue[event],\n      handleChange: handleChange,\n      handleChangeAll: handleChangeAll\n    });\n  }))));\n};\n\nEventInput.propTypes = {\n  name: _propTypes[\"default\"].string.isRequired,\n  onChange: _propTypes[\"default\"].func.isRequired,\n  shouldShowDPEvents: _propTypes[\"default\"].bool.isRequired,\n  value: _propTypes[\"default\"].array.isRequired\n};\nvar _default = EventInput;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["/Users/joaovictorlobao/prefeituramaragogistrapi/.cache/admin/src/components/Webhooks/EventInput/index.js"],"names":["displayedData","headers","draftAndPublish","events","entry","media","EventInput","onChange","inputName","name","inputValue","value","shouldShowDPEvents","headersName","disabledEvents","formattedValue","handleChange","target","set","Set","add","Array","from","handleChangeAll","forEach","event","includes","map","header","msg","Object","keys","propTypes","PropTypes","string","isRequired","func","bool","array"],"mappings":";;;;;;;;;AAAA;;AACA;;AACA;;AAEA;;AACA;;AACA;;AAEA,IAAMA,aAAa,GAAG;AACpBC,EAAAA,OAAO,EAAE;AACP,eAAS,CACP,iCADO,EAEP,iCAFO,EAGP,kBAHO,CADF;AAMPC,IAAAA,eAAe,EAAE,CACf,iCADe,EAEf,iCAFe,EAGf,kBAHe,EAIf,mBAJe,EAKf,qBALe;AANV,GADW;AAepBC,EAAAA,MAAM,EAAE;AACN,eAAS;AACPC,MAAAA,KAAK,EAAE,CAAC,cAAD,EAAiB,cAAjB,EAAiC,cAAjC,CADA;AAEPC,MAAAA,KAAK,EAAE,CAAC,cAAD,EAAiB,cAAjB,EAAiC,cAAjC;AAFA,KADH;AAKNH,IAAAA,eAAe,EAAE;AACfE,MAAAA,KAAK,EAAE,CAAC,cAAD,EAAiB,cAAjB,EAAiC,cAAjC,EAAiD,eAAjD,EAAkE,iBAAlE,CADQ;AAEfC,MAAAA,KAAK,EAAE,CAAC,cAAD,EAAiB,cAAjB,EAAiC,cAAjC;AAFQ;AALX;AAfY,CAAtB;;AA2BA,IAAMC,UAAU,GAAG,SAAbA,UAAa,OAA0E;AAAA,MAAvEC,QAAuE,QAAvEA,QAAuE;AAAA,MAAvDC,SAAuD,QAA7DC,IAA6D;AAAA,MAArCC,UAAqC,QAA5CC,KAA4C;AAAA,MAAzBC,kBAAyB,QAAzBA,kBAAyB;AAC3F,MAAMC,WAAW,GAAGD,kBAAkB,GAClCZ,aAAa,CAACC,OAAd,CAAsBC,eADY,GAElCF,aAAa,CAACC,OAAd,WAFJ;AAGA,MAAME,MAAM,GAAGS,kBAAkB,GAC7BZ,aAAa,CAACG,MAAd,CAAqBD,eADQ,GAE7BF,aAAa,CAACG,MAAd,WAFJ;AAIA,MAAMW,cAAc,GAAG,EAAvB;AAEA,MAAMC,cAAc,GAAG,6BAAYL,UAAZ,CAAvB;;AAEA,MAAMM,YAAY,GAAG,SAAfA,YAAe,QAAiC;AAAA,6BAA9BC,MAA8B;AAAA,QAApBR,IAAoB,gBAApBA,IAAoB;AAAA,QAAdE,KAAc,gBAAdA,KAAc;AACpD,QAAIO,GAAG,GAAG,IAAIC,GAAJ,CAAQT,UAAR,CAAV;;AAEA,QAAIC,KAAJ,EAAW;AACTO,MAAAA,GAAG,CAACE,GAAJ,CAAQX,IAAR;AACD,KAFD,MAEO;AACLS,MAAAA,GAAG,UAAH,CAAWT,IAAX;AACD;;AACDF,IAAAA,QAAQ,CAAC;AAAEU,MAAAA,MAAM,EAAE;AAAER,QAAAA,IAAI,EAAED,SAAR;AAAmBG,QAAAA,KAAK,EAAEU,KAAK,CAACC,IAAN,CAAWJ,GAAX;AAA1B;AAAV,KAAD,CAAR;AACD,GATD;;AAWA,MAAMK,eAAe,GAAG,SAAlBA,eAAkB,QAAiC;AAAA,6BAA9BN,MAA8B;AAAA,QAApBR,IAAoB,gBAApBA,IAAoB;AAAA,QAAdE,KAAc,gBAAdA,KAAc;AACvD,QAAIO,GAAG,GAAG,IAAIC,GAAJ,CAAQT,UAAR,CAAV;;AAEA,QAAIC,KAAJ,EAAW;AACTR,MAAAA,MAAM,CAACM,IAAD,CAAN,CAAae,OAAb,CAAqB,UAAAC,KAAK,EAAI;AAC5B,YAAI,CAACX,cAAc,CAACY,QAAf,CAAwBD,KAAxB,CAAL,EAAqC;AACnCP,UAAAA,GAAG,CAACE,GAAJ,CAAQK,KAAR;AACD;AACF,OAJD;AAKD,KAND,MAMO;AACLtB,MAAAA,MAAM,CAACM,IAAD,CAAN,CAAae,OAAb,CAAqB,UAAAC,KAAK;AAAA,eAAIP,GAAG,UAAH,CAAWO,KAAX,CAAJ;AAAA,OAA1B;AACD;;AACDlB,IAAAA,QAAQ,CAAC;AAAEU,MAAAA,MAAM,EAAE;AAAER,QAAAA,IAAI,EAAED,SAAR;AAAmBG,QAAAA,KAAK,EAAEU,KAAK,CAACC,IAAN,CAAWJ,GAAX;AAA1B;AAAV,KAAD,CAAR;AACD,GAbD;;AAeA,sBACE,gCAAC,mBAAD,qBACE,4DACE,4DACE,yDACE,2CADF,EAEGL,WAAW,CAACc,GAAZ,CAAgB,UAAAC,MAAM,EAAI;AACzB,QAAIA,MAAM,KAAK,mBAAX,IAAkCA,MAAM,KAAK,qBAAjD,EAAwE;AACtE,0BACE,gCAAC,2BAAD;AAAkB,QAAA,EAAE,EAAC,yCAArB;AAA+D,QAAA,GAAG,EAAEA;AAApE,SACG,UAAAC,GAAG;AAAA,4BACF;AAAI,UAAA,KAAK,EAAEA;AAAX,wBACE,gCAAC,2BAAD;AAAkB,UAAA,EAAE,EAAED;AAAtB,UADF,CADE;AAAA,OADN,CADF;AASD;;AAED,wBACE;AAAI,MAAA,GAAG,EAAEA;AAAT,oBACE,gCAAC,2BAAD;AAAkB,MAAA,EAAE,EAAEA;AAAtB,MADF,CADF;AAKD,GAlBA,CAFH,CADF,CADF,eAyBE,+CACGE,MAAM,CAACC,IAAP,CAAY5B,MAAZ,EAAoBwB,GAApB,CAAwB,UAAAF,KAAK,EAAI;AAChC,wBACE,gCAAC,oBAAD;AACE,MAAA,cAAc,EAAEX,cADlB;AAEE,MAAA,GAAG,EAAEW,KAFP;AAGE,MAAA,IAAI,EAAEA,KAHR;AAIE,MAAA,MAAM,EAAEtB,MAAM,CAACsB,KAAD,CAJhB;AAKE,MAAA,UAAU,EAAEV,cAAc,CAACU,KAAD,CAL5B;AAME,MAAA,YAAY,EAAET,YANhB;AAOE,MAAA,eAAe,EAAEO;AAPnB,MADF;AAWD,GAZA,CADH,CAzBF,CADF,CADF;AA6CD,CAnFD;;AAqFAjB,UAAU,CAAC0B,SAAX,GAAuB;AACrBvB,EAAAA,IAAI,EAAEwB,sBAAUC,MAAV,CAAiBC,UADF;AAErB5B,EAAAA,QAAQ,EAAE0B,sBAAUG,IAAV,CAAeD,UAFJ;AAGrBvB,EAAAA,kBAAkB,EAAEqB,sBAAUI,IAAV,CAAeF,UAHd;AAIrBxB,EAAAA,KAAK,EAAEsB,sBAAUK,KAAV,CAAgBH;AAJF,CAAvB;eAOe7B,U","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { FormattedMessage } from 'react-intl';\n\nimport formatValue from './utils/formatValue';\nimport Wrapper from './Wrapper';\nimport EventRow from './EventRow';\n\nconst displayedData = {\n  headers: {\n    default: [\n      'Settings.webhooks.events.create',\n      'Settings.webhooks.events.update',\n      'app.utils.delete',\n    ],\n    draftAndPublish: [\n      'Settings.webhooks.events.create',\n      'Settings.webhooks.events.update',\n      'app.utils.delete',\n      'app.utils.publish',\n      'app.utils.unpublish',\n    ],\n  },\n  events: {\n    default: {\n      entry: ['entry.create', 'entry.update', 'entry.delete'],\n      media: ['media.create', 'media.update', 'media.delete'],\n    },\n    draftAndPublish: {\n      entry: ['entry.create', 'entry.update', 'entry.delete', 'entry.publish', 'entry.unpublish'],\n      media: ['media.create', 'media.update', 'media.delete'],\n    },\n  },\n};\n\nconst EventInput = ({ onChange, name: inputName, value: inputValue, shouldShowDPEvents }) => {\n  const headersName = shouldShowDPEvents\n    ? displayedData.headers.draftAndPublish\n    : displayedData.headers.default;\n  const events = shouldShowDPEvents\n    ? displayedData.events.draftAndPublish\n    : displayedData.events.default;\n\n  const disabledEvents = [];\n\n  const formattedValue = formatValue(inputValue);\n\n  const handleChange = ({ target: { name, value } }) => {\n    let set = new Set(inputValue);\n\n    if (value) {\n      set.add(name);\n    } else {\n      set.delete(name);\n    }\n    onChange({ target: { name: inputName, value: Array.from(set) } });\n  };\n\n  const handleChangeAll = ({ target: { name, value } }) => {\n    let set = new Set(inputValue);\n\n    if (value) {\n      events[name].forEach(event => {\n        if (!disabledEvents.includes(event)) {\n          set.add(event);\n        }\n      });\n    } else {\n      events[name].forEach(event => set.delete(event));\n    }\n    onChange({ target: { name: inputName, value: Array.from(set) } });\n  };\n\n  return (\n    <Wrapper>\n      <table>\n        <thead>\n          <tr>\n            <td />\n            {headersName.map(header => {\n              if (header === 'app.utils.publish' || header === 'app.utils.unpublish') {\n                return (\n                  <FormattedMessage id=\"Settings.webhooks.event.publish-tooltip\" key={header}>\n                    {msg => (\n                      <td title={msg}>\n                        <FormattedMessage id={header} />\n                      </td>\n                    )}\n                  </FormattedMessage>\n                );\n              }\n\n              return (\n                <td key={header}>\n                  <FormattedMessage id={header} />\n                </td>\n              );\n            })}\n          </tr>\n        </thead>\n        <tbody>\n          {Object.keys(events).map(event => {\n            return (\n              <EventRow\n                disabledEvents={disabledEvents}\n                key={event}\n                name={event}\n                events={events[event]}\n                inputValue={formattedValue[event]}\n                handleChange={handleChange}\n                handleChangeAll={handleChangeAll}\n              />\n            );\n          })}\n        </tbody>\n      </table>\n    </Wrapper>\n  );\n};\n\nEventInput.propTypes = {\n  name: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired,\n  shouldShowDPEvents: PropTypes.bool.isRequired,\n  value: PropTypes.array.isRequired,\n};\n\nexport default EventInput;\n"]},"metadata":{},"sourceType":"script"}