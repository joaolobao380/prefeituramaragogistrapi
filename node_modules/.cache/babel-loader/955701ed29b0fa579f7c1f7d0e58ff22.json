{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _typeof = require(\"@babel/runtime/helpers/typeof\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _core = require(\"@buffetjs/core\");\n\nvar _reactFontawesome = require(\"@fortawesome/react-fontawesome\");\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _reactIntl = require(\"react-intl\");\n\nvar _lodash = require(\"lodash\");\n\nvar _strapiHelperPlugin = require(\"strapi-helper-plugin\");\n\nvar _getTrad = _interopRequireDefault(require(\"../../../utils/getTrad\"));\n\nvar _SubCategory = _interopRequireDefault(require(\"./SubCategory\"));\n\nvar _RowStyle = _interopRequireDefault(require(\"./RowStyle\"));\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { \"default\": obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj[\"default\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2[\"default\"])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nvar PermissionRow = function PermissionRow(_ref) {\n  var isOpen = _ref.isOpen,\n      isWhite = _ref.isWhite,\n      name = _ref.name,\n      onOpenPlugin = _ref.onOpenPlugin,\n      permissions = _ref.permissions;\n\n  var _useIntl = (0, _reactIntl.useIntl)(),\n      formatMessage = _useIntl.formatMessage;\n\n  var subCategories = (0, _react.useMemo)(function () {\n    // Avoid computing when not necesserary\n    if (!isOpen) {\n      return [];\n    }\n\n    return (0, _lodash.sortBy)(Object.values(permissions.controllers).reduce(function (acc, curr, index) {\n      var currentName = \"\".concat(name, \".controllers.\").concat(Object.keys(permissions.controllers)[index]);\n      var actions = (0, _lodash.sortBy)(Object.keys(curr).reduce(function (acc, current) {\n        return [].concat((0, _toConsumableArray2[\"default\"])(acc), [_objectSpread(_objectSpread({}, curr[current]), {}, {\n          label: current,\n          name: \"\".concat(currentName, \".\").concat(current)\n        })]);\n      }, []), 'label');\n      return [].concat((0, _toConsumableArray2[\"default\"])(acc), [{\n        actions: actions,\n        label: Object.keys(permissions.controllers)[index],\n        name: currentName\n      }]);\n    }, []), 'label');\n  }, [isOpen, name, permissions]);\n  return /*#__PURE__*/_react[\"default\"].createElement(_strapiHelperPlugin.RowContainer, {\n    isWhite: isWhite\n  }, /*#__PURE__*/_react[\"default\"].createElement(_RowStyle[\"default\"], {\n    isActive: isOpen,\n    isWhite: isWhite,\n    onClick: onOpenPlugin\n  }, /*#__PURE__*/_react[\"default\"].createElement(_core.Flex, {\n    alignItems: \"center\",\n    justifyContent: \"space-between\"\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"div\", null, /*#__PURE__*/_react[\"default\"].createElement(_core.Text, {\n    color: \"grey\",\n    fontWeight: \"bold\",\n    fontSize: \"xs\",\n    textTransform: \"uppercase\"\n  }, name), /*#__PURE__*/_react[\"default\"].createElement(_core.Text, {\n    lineHeight: \"22px\",\n    color: \"grey\"\n  }, formatMessage({\n    id: (0, _getTrad[\"default\"])('Plugin.permissions.plugins.description')\n  }, {\n    name: name\n  }))), /*#__PURE__*/_react[\"default\"].createElement(\"div\", null, /*#__PURE__*/_react[\"default\"].createElement(_reactFontawesome.FontAwesomeIcon, {\n    style: {\n      width: '11px'\n    },\n    color: \"#9EA7B8\",\n    icon: isOpen ? 'chevron-up' : 'chevron-down'\n  })))), isOpen && /*#__PURE__*/_react[\"default\"].createElement(_strapiHelperPlugin.PermissionsWrapper, {\n    isWhite: isWhite\n  }, subCategories.map(function (subCategory) {\n    return /*#__PURE__*/_react[\"default\"].createElement(_SubCategory[\"default\"], {\n      key: subCategory.name,\n      subCategory: subCategory\n    });\n  })));\n};\n\nPermissionRow.propTypes = {\n  isOpen: _propTypes[\"default\"].bool.isRequired,\n  isWhite: _propTypes[\"default\"].bool.isRequired,\n  name: _propTypes[\"default\"].string.isRequired,\n  onOpenPlugin: _propTypes[\"default\"].func.isRequired,\n  permissions: _propTypes[\"default\"].object.isRequired\n};\nvar _default = PermissionRow;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["/Users/joaovictorlobao/prefeituramaragogistrapi/.cache/plugins/strapi-plugin-users-permissions/admin/src/components/Permissions/PermissionRow/index.js"],"names":["PermissionRow","isOpen","isWhite","name","onOpenPlugin","permissions","formatMessage","subCategories","Object","values","controllers","reduce","acc","curr","index","currentName","keys","actions","current","label","id","width","map","subCategory","propTypes","PropTypes","bool","isRequired","string","func","object"],"mappings":";;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAEA;;AACA;;AACA;;;;;;;;;;AAEA,IAAMA,aAAa,GAAG,SAAhBA,aAAgB,OAA0D;AAAA,MAAvDC,MAAuD,QAAvDA,MAAuD;AAAA,MAA/CC,OAA+C,QAA/CA,OAA+C;AAAA,MAAtCC,IAAsC,QAAtCA,IAAsC;AAAA,MAAhCC,YAAgC,QAAhCA,YAAgC;AAAA,MAAlBC,WAAkB,QAAlBA,WAAkB;;AAC9E,iBAA0B,yBAA1B;AAAA,MAAQC,aAAR,YAAQA,aAAR;;AAEA,MAAMC,aAAa,GAAG,oBAAQ,YAAM;AAClC;AACA,QAAI,CAACN,MAAL,EAAa;AACX,aAAO,EAAP;AACD;;AAED,WAAO,oBACLO,MAAM,CAACC,MAAP,CAAcJ,WAAW,CAACK,WAA1B,EAAuCC,MAAvC,CAA8C,UAACC,GAAD,EAAMC,IAAN,EAAYC,KAAZ,EAAsB;AAClE,UAAMC,WAAW,aAAMZ,IAAN,0BAA0BK,MAAM,CAACQ,IAAP,CAAYX,WAAW,CAACK,WAAxB,EAAqCI,KAArC,CAA1B,CAAjB;AACA,UAAMG,OAAO,GAAG,oBACdT,MAAM,CAACQ,IAAP,CAAYH,IAAZ,EAAkBF,MAAlB,CAAyB,UAACC,GAAD,EAAMM,OAAN,EAAkB;AACzC,6DACKN,GADL,oCAGOC,IAAI,CAACK,OAAD,CAHX;AAIIC,UAAAA,KAAK,EAAED,OAJX;AAKIf,UAAAA,IAAI,YAAKY,WAAL,cAAoBG,OAApB;AALR;AAQD,OATD,EASG,EATH,CADc,EAWd,OAXc,CAAhB;AAcA,2DACKN,GADL,IAEE;AACEK,QAAAA,OAAO,EAAPA,OADF;AAEEE,QAAAA,KAAK,EAAEX,MAAM,CAACQ,IAAP,CAAYX,WAAW,CAACK,WAAxB,EAAqCI,KAArC,CAFT;AAGEX,QAAAA,IAAI,EAAEY;AAHR,OAFF;AAQD,KAxBD,EAwBG,EAxBH,CADK,EA0BL,OA1BK,CAAP;AA4BD,GAlCqB,EAkCnB,CAACd,MAAD,EAASE,IAAT,EAAeE,WAAf,CAlCmB,CAAtB;AAoCA,sBACE,gCAAC,gCAAD;AAAc,IAAA,OAAO,EAAEH;AAAvB,kBACE,gCAAC,oBAAD;AAAU,IAAA,QAAQ,EAAED,MAApB;AAA4B,IAAA,OAAO,EAAEC,OAArC;AAA8C,IAAA,OAAO,EAAEE;AAAvD,kBACE,gCAAC,UAAD;AAAM,IAAA,UAAU,EAAC,QAAjB;AAA0B,IAAA,cAAc,EAAC;AAAzC,kBACE,0DACE,gCAAC,UAAD;AAAM,IAAA,KAAK,EAAC,MAAZ;AAAmB,IAAA,UAAU,EAAC,MAA9B;AAAqC,IAAA,QAAQ,EAAC,IAA9C;AAAmD,IAAA,aAAa,EAAC;AAAjE,KACGD,IADH,CADF,eAIE,gCAAC,UAAD;AAAM,IAAA,UAAU,EAAC,MAAjB;AAAwB,IAAA,KAAK,EAAC;AAA9B,KACGG,aAAa,CAAC;AAAEc,IAAAA,EAAE,EAAE,yBAAQ,wCAAR;AAAN,GAAD,EAA4D;AAAEjB,IAAAA,IAAI,EAAJA;AAAF,GAA5D,CADhB,CAJF,CADF,eASE,0DACE,gCAAC,iCAAD;AACE,IAAA,KAAK,EAAE;AAAEkB,MAAAA,KAAK,EAAE;AAAT,KADT;AAEE,IAAA,KAAK,EAAC,SAFR;AAGE,IAAA,IAAI,EAAEpB,MAAM,GAAG,YAAH,GAAkB;AAHhC,IADF,CATF,CADF,CADF,EAoBGA,MAAM,iBACL,gCAAC,sCAAD;AAAoB,IAAA,OAAO,EAAEC;AAA7B,KACGK,aAAa,CAACe,GAAd,CAAkB,UAAAC,WAAW;AAAA,wBAC5B,gCAAC,uBAAD;AAAa,MAAA,GAAG,EAAEA,WAAW,CAACpB,IAA9B;AAAoC,MAAA,WAAW,EAAEoB;AAAjD,MAD4B;AAAA,GAA7B,CADH,CArBJ,CADF;AA8BD,CArED;;AAuEAvB,aAAa,CAACwB,SAAd,GAA0B;AACxBvB,EAAAA,MAAM,EAAEwB,sBAAUC,IAAV,CAAeC,UADC;AAExBzB,EAAAA,OAAO,EAAEuB,sBAAUC,IAAV,CAAeC,UAFA;AAGxBxB,EAAAA,IAAI,EAAEsB,sBAAUG,MAAV,CAAiBD,UAHC;AAIxBvB,EAAAA,YAAY,EAAEqB,sBAAUI,IAAV,CAAeF,UAJL;AAKxBtB,EAAAA,WAAW,EAAEoB,sBAAUK,MAAV,CAAiBH;AALN,CAA1B;eAQe3B,a","sourcesContent":["import React, { useMemo } from 'react';\nimport { Flex, Text } from '@buffetjs/core';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport PropTypes from 'prop-types';\nimport { useIntl } from 'react-intl';\nimport { sortBy } from 'lodash';\nimport { PermissionsWrapper, RowContainer } from 'strapi-helper-plugin';\n\nimport getTrad from '../../../utils/getTrad';\nimport SubCategory from './SubCategory';\nimport RowStyle from './RowStyle';\n\nconst PermissionRow = ({ isOpen, isWhite, name, onOpenPlugin, permissions }) => {\n  const { formatMessage } = useIntl();\n\n  const subCategories = useMemo(() => {\n    // Avoid computing when not necesserary\n    if (!isOpen) {\n      return [];\n    }\n\n    return sortBy(\n      Object.values(permissions.controllers).reduce((acc, curr, index) => {\n        const currentName = `${name}.controllers.${Object.keys(permissions.controllers)[index]}`;\n        const actions = sortBy(\n          Object.keys(curr).reduce((acc, current) => {\n            return [\n              ...acc,\n              {\n                ...curr[current],\n                label: current,\n                name: `${currentName}.${current}`,\n              },\n            ];\n          }, []),\n          'label'\n        );\n\n        return [\n          ...acc,\n          {\n            actions,\n            label: Object.keys(permissions.controllers)[index],\n            name: currentName,\n          },\n        ];\n      }, []),\n      'label'\n    );\n  }, [isOpen, name, permissions]);\n\n  return (\n    <RowContainer isWhite={isWhite}>\n      <RowStyle isActive={isOpen} isWhite={isWhite} onClick={onOpenPlugin}>\n        <Flex alignItems=\"center\" justifyContent=\"space-between\">\n          <div>\n            <Text color=\"grey\" fontWeight=\"bold\" fontSize=\"xs\" textTransform=\"uppercase\">\n              {name}\n            </Text>\n            <Text lineHeight=\"22px\" color=\"grey\">\n              {formatMessage({ id: getTrad('Plugin.permissions.plugins.description') }, { name })}\n            </Text>\n          </div>\n          <div>\n            <FontAwesomeIcon\n              style={{ width: '11px' }}\n              color=\"#9EA7B8\"\n              icon={isOpen ? 'chevron-up' : 'chevron-down'}\n            />\n          </div>\n        </Flex>\n      </RowStyle>\n      {isOpen && (\n        <PermissionsWrapper isWhite={isWhite}>\n          {subCategories.map(subCategory => (\n            <SubCategory key={subCategory.name} subCategory={subCategory} />\n          ))}\n        </PermissionsWrapper>\n      )}\n    </RowContainer>\n  );\n};\n\nPermissionRow.propTypes = {\n  isOpen: PropTypes.bool.isRequired,\n  isWhite: PropTypes.bool.isRequired,\n  name: PropTypes.string.isRequired,\n  onOpenPlugin: PropTypes.func.isRequired,\n  permissions: PropTypes.object.isRequired,\n};\n\nexport default PermissionRow;\n"]},"metadata":{},"sourceType":"script"}