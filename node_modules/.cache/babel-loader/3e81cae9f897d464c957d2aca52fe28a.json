{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _addLocaleToLinksSearch = _interopRequireDefault(require(\"./utils/addLocaleToLinksSearch\"));\n\nvar addLocaleToCollectionTypesMiddleware = function addLocaleToCollectionTypesMiddleware() {\n  return function (_ref) {\n    var getState = _ref.getState;\n    return function (next) {\n      return function (action) {\n        if (action.type !== 'StrapiAdmin/LeftMenu/SET_CT_OR_ST_LINKS') {\n          return next(action);\n        }\n\n        if (action.data.authorizedCtLinks.length) {\n          var store = getState();\n\n          var _store$get = store.get('i18n_locales'),\n              locales = _store$get.locales;\n\n          var _store$get2 = store.get('permissionsManager'),\n              collectionTypesRelatedPermissions = _store$get2.collectionTypesRelatedPermissions;\n\n          action.data.authorizedCtLinks = (0, _addLocaleToLinksSearch[\"default\"])(action.data.authorizedCtLinks, 'collectionType', action.data.contentTypeSchemas, locales, collectionTypesRelatedPermissions);\n        }\n\n        return next(action);\n      };\n    };\n  };\n};\n\nvar _default = addLocaleToCollectionTypesMiddleware;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["/Users/joaovictorlobao/prefeituramaragogistrapi/.cache/plugins/strapi-plugin-i18n/admin/src/middlewares/addLocaleToCollectionTypesMiddleware.js"],"names":["addLocaleToCollectionTypesMiddleware","getState","next","action","type","data","authorizedCtLinks","length","store","get","locales","collectionTypesRelatedPermissions","contentTypeSchemas"],"mappings":";;;;;;;;;AAAA;;AAEA,IAAMA,oCAAoC,GAAG,SAAvCA,oCAAuC;AAAA,SAAM;AAAA,QAAGC,QAAH,QAAGA,QAAH;AAAA,WAAkB,UAAAC,IAAI;AAAA,aAAI,UAAAC,MAAM,EAAI;AACrF,YAAIA,MAAM,CAACC,IAAP,KAAgB,yCAApB,EAA+D;AAC7D,iBAAOF,IAAI,CAACC,MAAD,CAAX;AACD;;AAED,YAAIA,MAAM,CAACE,IAAP,CAAYC,iBAAZ,CAA8BC,MAAlC,EAA0C;AACxC,cAAMC,KAAK,GAAGP,QAAQ,EAAtB;;AACA,2BAAoBO,KAAK,CAACC,GAAN,CAAU,cAAV,CAApB;AAAA,cAAQC,OAAR,cAAQA,OAAR;;AACA,4BAA8CF,KAAK,CAACC,GAAN,CAAU,oBAAV,CAA9C;AAAA,cAAQE,iCAAR,eAAQA,iCAAR;;AAEAR,UAAAA,MAAM,CAACE,IAAP,CAAYC,iBAAZ,GAAgC,wCAC9BH,MAAM,CAACE,IAAP,CAAYC,iBADkB,EAE9B,gBAF8B,EAG9BH,MAAM,CAACE,IAAP,CAAYO,kBAHkB,EAI9BF,OAJ8B,EAK9BC,iCAL8B,CAAhC;AAOD;;AAED,eAAOT,IAAI,CAACC,MAAD,CAAX;AACD,OApBwE;AAAA,KAAtB;AAAA,GAAN;AAAA,CAA7C;;eAsBeH,oC","sourcesContent":["import addLocaleToLinksSearch from './utils/addLocaleToLinksSearch';\n\nconst addLocaleToCollectionTypesMiddleware = () => ({ getState }) => next => action => {\n  if (action.type !== 'StrapiAdmin/LeftMenu/SET_CT_OR_ST_LINKS') {\n    return next(action);\n  }\n\n  if (action.data.authorizedCtLinks.length) {\n    const store = getState();\n    const { locales } = store.get('i18n_locales');\n    const { collectionTypesRelatedPermissions } = store.get('permissionsManager');\n\n    action.data.authorizedCtLinks = addLocaleToLinksSearch(\n      action.data.authorizedCtLinks,\n      'collectionType',\n      action.data.contentTypeSchemas,\n      locales,\n      collectionTypesRelatedPermissions\n    );\n  }\n\n  return next(action);\n};\n\nexport default addLocaleToCollectionTypesMiddleware;\n"]},"metadata":{},"sourceType":"script"}