{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.generateLinks = exports[\"default\"] = void 0;\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _lodash = require(\"lodash\");\n\nvar _qs = require(\"qs\");\n\nvar generateLinks = function generateLinks(links, type) {\n  var configurations = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n  return links.filter(function (link) {\n    return link.isDisplayed;\n  }).map(function (link) {\n    var collectionTypesPermissions = [{\n      action: 'plugins::content-manager.explorer.create',\n      subject: link.uid\n    }, {\n      action: 'plugins::content-manager.explorer.read',\n      subject: link.uid\n    }];\n    var singleTypesPermissions = [{\n      action: 'plugins::content-manager.explorer.read',\n      subject: link.uid\n    }];\n    var permissions = type === 'collectionTypes' ? collectionTypesPermissions : singleTypesPermissions;\n    var currentContentTypeConfig = configurations.find(function (_ref) {\n      var uid = _ref.uid;\n      return uid === link.uid;\n    });\n    var search = null;\n\n    if (currentContentTypeConfig) {\n      var searchParams = {\n        page: 1,\n        pageSize: currentContentTypeConfig.settings.pageSize,\n        _sort: \"\".concat(currentContentTypeConfig.settings.defaultSortBy, \":\").concat(currentContentTypeConfig.settings.defaultSortOrder)\n      };\n      search = (0, _qs.stringify)(searchParams, {\n        encode: false\n      });\n    }\n\n    return {\n      icon: 'circle',\n      destination: \"/plugins/content-manager/\".concat(link.kind, \"/\").concat(link.uid),\n      isDisplayed: true,\n      label: link.info.label,\n      permissions: permissions,\n      search: search\n    };\n  });\n};\n\nexports.generateLinks = generateLinks;\n\nvar generateModelsLinks = function generateModelsLinks(models, modelsConfigurations) {\n  var _chain$groupBy$map$so = (0, _lodash.chain)(models).groupBy('kind').map(function (value, key) {\n    return {\n      name: key,\n      links: value\n    };\n  }).sortBy('name').value(),\n      _chain$groupBy$map$so2 = (0, _slicedToArray2[\"default\"])(_chain$groupBy$map$so, 2),\n      collectionTypes = _chain$groupBy$map$so2[0],\n      singleTypes = _chain$groupBy$map$so2[1];\n\n  return {\n    collectionTypesSectionLinks: generateLinks((0, _lodash.get)(collectionTypes, 'links', []), 'collectionTypes', modelsConfigurations),\n    singleTypesSectionLinks: generateLinks((0, _lodash.get)(singleTypes, 'links', []), 'singleTypes')\n  };\n};\n\nvar _default = generateModelsLinks;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["/Users/joaovictorlobao/prefeituramaragogistrapi/.cache/admin/src/containers/LeftMenu/utils/generateModelsLinks.js"],"names":["generateLinks","links","type","configurations","filter","link","isDisplayed","map","collectionTypesPermissions","action","subject","uid","singleTypesPermissions","permissions","currentContentTypeConfig","find","search","searchParams","page","pageSize","settings","_sort","defaultSortBy","defaultSortOrder","encode","icon","destination","kind","label","info","generateModelsLinks","models","modelsConfigurations","groupBy","value","key","name","sortBy","collectionTypes","singleTypes","collectionTypesSectionLinks","singleTypesSectionLinks"],"mappings":";;;;;;;;;;;AAAA;;AACA;;AAEA,IAAMA,aAAa,GAAG,SAAhBA,aAAgB,CAACC,KAAD,EAAQC,IAAR,EAAsC;AAAA,MAAxBC,cAAwB,uEAAP,EAAO;AAC1D,SAAOF,KAAK,CACTG,MADI,CACG,UAAAC,IAAI;AAAA,WAAIA,IAAI,CAACC,WAAT;AAAA,GADP,EAEJC,GAFI,CAEA,UAAAF,IAAI,EAAI;AACX,QAAMG,0BAA0B,GAAG,CACjC;AAAEC,MAAAA,MAAM,EAAE,0CAAV;AAAsDC,MAAAA,OAAO,EAAEL,IAAI,CAACM;AAApE,KADiC,EAEjC;AAAEF,MAAAA,MAAM,EAAE,wCAAV;AAAoDC,MAAAA,OAAO,EAAEL,IAAI,CAACM;AAAlE,KAFiC,CAAnC;AAIA,QAAMC,sBAAsB,GAAG,CAC7B;AAAEH,MAAAA,MAAM,EAAE,wCAAV;AAAoDC,MAAAA,OAAO,EAAEL,IAAI,CAACM;AAAlE,KAD6B,CAA/B;AAGA,QAAME,WAAW,GACfX,IAAI,KAAK,iBAAT,GAA6BM,0BAA7B,GAA0DI,sBAD5D;AAGA,QAAME,wBAAwB,GAAGX,cAAc,CAACY,IAAf,CAAoB;AAAA,UAAGJ,GAAH,QAAGA,GAAH;AAAA,aAAaA,GAAG,KAAKN,IAAI,CAACM,GAA1B;AAAA,KAApB,CAAjC;AAEA,QAAIK,MAAM,GAAG,IAAb;;AAEA,QAAIF,wBAAJ,EAA8B;AAC5B,UAAMG,YAAY,GAAG;AACnBC,QAAAA,IAAI,EAAE,CADa;AAEnBC,QAAAA,QAAQ,EAAEL,wBAAwB,CAACM,QAAzB,CAAkCD,QAFzB;AAGnBE,QAAAA,KAAK,YAAKP,wBAAwB,CAACM,QAAzB,CAAkCE,aAAvC,cAAwDR,wBAAwB,CAACM,QAAzB,CAAkCG,gBAA1F;AAHc,OAArB;AAMAP,MAAAA,MAAM,GAAG,mBAAUC,YAAV,EAAwB;AAAEO,QAAAA,MAAM,EAAE;AAAV,OAAxB,CAAT;AACD;;AAED,WAAO;AACLC,MAAAA,IAAI,EAAE,QADD;AAELC,MAAAA,WAAW,qCAA8BrB,IAAI,CAACsB,IAAnC,cAA2CtB,IAAI,CAACM,GAAhD,CAFN;AAGLL,MAAAA,WAAW,EAAE,IAHR;AAILsB,MAAAA,KAAK,EAAEvB,IAAI,CAACwB,IAAL,CAAUD,KAJZ;AAKLf,MAAAA,WAAW,EAAXA,WALK;AAMLG,MAAAA,MAAM,EAANA;AANK,KAAP;AAQD,GAnCI,CAAP;AAoCD,CArCD;;;;AAuCA,IAAMc,mBAAmB,GAAG,SAAtBA,mBAAsB,CAACC,MAAD,EAASC,oBAAT,EAAkC;AAC5D,8BAAuC,mBAAMD,MAAN,EACpCE,OADoC,CAC5B,MAD4B,EAEpC1B,GAFoC,CAEhC,UAAC2B,KAAD,EAAQC,GAAR;AAAA,WAAiB;AAAEC,MAAAA,IAAI,EAAED,GAAR;AAAalC,MAAAA,KAAK,EAAEiC;AAApB,KAAjB;AAAA,GAFgC,EAGpCG,MAHoC,CAG7B,MAH6B,EAIpCH,KAJoC,EAAvC;AAAA;AAAA,MAAOI,eAAP;AAAA,MAAwBC,WAAxB;;AAMA,SAAO;AACLC,IAAAA,2BAA2B,EAAExC,aAAa,CACxC,iBAAIsC,eAAJ,EAAqB,OAArB,EAA8B,EAA9B,CADwC,EAExC,iBAFwC,EAGxCN,oBAHwC,CADrC;AAMLS,IAAAA,uBAAuB,EAAEzC,aAAa,CAAC,iBAAIuC,WAAJ,EAAiB,OAAjB,EAA0B,EAA1B,CAAD,EAAgC,aAAhC;AANjC,GAAP;AAQD,CAfD;;eAiBeT,mB","sourcesContent":["import { chain, get } from 'lodash';\nimport { stringify } from 'qs';\n\nconst generateLinks = (links, type, configurations = []) => {\n  return links\n    .filter(link => link.isDisplayed)\n    .map(link => {\n      const collectionTypesPermissions = [\n        { action: 'plugins::content-manager.explorer.create', subject: link.uid },\n        { action: 'plugins::content-manager.explorer.read', subject: link.uid },\n      ];\n      const singleTypesPermissions = [\n        { action: 'plugins::content-manager.explorer.read', subject: link.uid },\n      ];\n      const permissions =\n        type === 'collectionTypes' ? collectionTypesPermissions : singleTypesPermissions;\n\n      const currentContentTypeConfig = configurations.find(({ uid }) => uid === link.uid);\n\n      let search = null;\n\n      if (currentContentTypeConfig) {\n        const searchParams = {\n          page: 1,\n          pageSize: currentContentTypeConfig.settings.pageSize,\n          _sort: `${currentContentTypeConfig.settings.defaultSortBy}:${currentContentTypeConfig.settings.defaultSortOrder}`,\n        };\n\n        search = stringify(searchParams, { encode: false });\n      }\n\n      return {\n        icon: 'circle',\n        destination: `/plugins/content-manager/${link.kind}/${link.uid}`,\n        isDisplayed: true,\n        label: link.info.label,\n        permissions,\n        search,\n      };\n    });\n};\n\nconst generateModelsLinks = (models, modelsConfigurations) => {\n  const [collectionTypes, singleTypes] = chain(models)\n    .groupBy('kind')\n    .map((value, key) => ({ name: key, links: value }))\n    .sortBy('name')\n    .value();\n\n  return {\n    collectionTypesSectionLinks: generateLinks(\n      get(collectionTypes, 'links', []),\n      'collectionTypes',\n      modelsConfigurations\n    ),\n    singleTypesSectionLinks: generateLinks(get(singleTypes, 'links', []), 'singleTypes'),\n  };\n};\n\nexport default generateModelsLinks;\nexport { generateLinks };\n"]},"metadata":{},"sourceType":"script"}