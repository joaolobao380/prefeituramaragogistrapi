{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _lodash = require(\"lodash\");\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2[\"default\"])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nvar extendCTBInitialDataMiddleware = function extendCTBInitialDataMiddleware() {\n  return function () {\n    return function (next) {\n      return function (action) {\n        if (action.type === 'ContentTypeBuilder/FormModal/SET_DATA_TO_EDIT' && action.modalType === 'contentType') {\n          var i18n = {\n            localized: false\n          };\n          var pluginOptions = action.data.pluginOptions ? _objectSpread(_objectSpread({}, action.data.pluginOptions), {}, {\n            i18n: i18n\n          }) : {\n            i18n: i18n\n          };\n\n          var data = _objectSpread(_objectSpread({}, action.data), {}, {\n            pluginOptions: pluginOptions\n          });\n\n          if (action.actionType === 'create') {\n            return next(_objectSpread(_objectSpread({}, action), {}, {\n              data: data\n            }));\n          } // Override the action if the pluginOption config does not contain i18n\n          // In this case we need to set the proper initialData shape\n\n\n          if (!(0, _lodash.has)(action.data.pluginOptions, 'i18n.localized')) {\n            return next(_objectSpread(_objectSpread({}, action), {}, {\n              data: data\n            }));\n          }\n        } // action is not the one we want to override\n\n\n        return next(action);\n      };\n    };\n  };\n};\n\nvar _default = extendCTBInitialDataMiddleware;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["/Users/joaovictorlobao/prefeituramaragogistrapi/.cache/plugins/strapi-plugin-i18n/admin/src/middlewares/extendCTBInitialDataMiddleware.js"],"names":["extendCTBInitialDataMiddleware","next","action","type","modalType","i18n","localized","pluginOptions","data","actionType"],"mappings":";;;;;;;;;;;AAAA;;;;;;AAEA,IAAMA,8BAA8B,GAAG,SAAjCA,8BAAiC,GAAM;AAC3C,SAAO;AAAA,WAAM,UAAAC,IAAI;AAAA,aAAI,UAAAC,MAAM,EAAI;AAC7B,YACEA,MAAM,CAACC,IAAP,KAAgB,+CAAhB,IACAD,MAAM,CAACE,SAAP,KAAqB,aAFvB,EAGE;AACA,cAAMC,IAAI,GAAG;AAAEC,YAAAA,SAAS,EAAE;AAAb,WAAb;AAEA,cAAMC,aAAa,GAAGL,MAAM,CAACM,IAAP,CAAYD,aAAZ,mCACbL,MAAM,CAACM,IAAP,CAAYD,aADC;AACcF,YAAAA,IAAI,EAAJA;AADd,eAElB;AAAEA,YAAAA,IAAI,EAAJA;AAAF,WAFJ;;AAIA,cAAMG,IAAI,mCAAQN,MAAM,CAACM,IAAf;AAAqBD,YAAAA,aAAa,EAAbA;AAArB,YAAV;;AAEA,cAAIL,MAAM,CAACO,UAAP,KAAsB,QAA1B,EAAoC;AAClC,mBAAOR,IAAI,iCAAMC,MAAN;AAAcM,cAAAA,IAAI,EAAJA;AAAd,eAAX;AACD,WAXD,CAaA;AACA;;;AACA,cAAI,CAAC,iBAAIN,MAAM,CAACM,IAAP,CAAYD,aAAhB,EAA+B,gBAA/B,CAAL,EAAuD;AACrD,mBAAON,IAAI,iCAAMC,MAAN;AAAcM,cAAAA,IAAI,EAAJA;AAAd,eAAX;AACD;AACF,SAtB4B,CAwB7B;;;AACA,eAAOP,IAAI,CAACC,MAAD,CAAX;AACD,OA1BgB;AAAA,KAAV;AAAA,GAAP;AA2BD,CA5BD;;eA8BeF,8B","sourcesContent":["import { has } from 'lodash';\n\nconst extendCTBInitialDataMiddleware = () => {\n  return () => next => action => {\n    if (\n      action.type === 'ContentTypeBuilder/FormModal/SET_DATA_TO_EDIT' &&\n      action.modalType === 'contentType'\n    ) {\n      const i18n = { localized: false };\n\n      const pluginOptions = action.data.pluginOptions\n        ? { ...action.data.pluginOptions, i18n }\n        : { i18n };\n\n      const data = { ...action.data, pluginOptions };\n\n      if (action.actionType === 'create') {\n        return next({ ...action, data });\n      }\n\n      // Override the action if the pluginOption config does not contain i18n\n      // In this case we need to set the proper initialData shape\n      if (!has(action.data.pluginOptions, 'i18n.localized')) {\n        return next({ ...action, data });\n      }\n    }\n\n    // action is not the one we want to override\n    return next(action);\n  };\n};\n\nexport default extendCTBInitialDataMiddleware;\n"]},"metadata":{},"sourceType":"script"}